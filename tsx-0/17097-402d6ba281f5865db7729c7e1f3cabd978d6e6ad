{"code":"(()=>{\n\"use strict\";const{detachNodeFromParent}=require(\"../lib/xast.js\");const{collectStylesheet,computeStyle}=require(\"../lib/style.js\");const{path2js,js2path,intersects}=require(\"./_path.js\");exports.name=\"mergePaths\";exports.description=\"merges multiple paths in one if possible\";exports.fn=(root,params)=>{const{force=false,floatPrecision,noSpaceAfterFlags=false}=params;const stylesheet=collectStylesheet(root);return{element:{enter:node=>{let prevChild=null;for(const child of node.children){if(prevChild==null||prevChild.type!==\"element\"||prevChild.name!==\"path\"||prevChild.children.length!==0||prevChild.attributes.d==null){prevChild=child;continue}if(child.type!==\"element\"||child.name!==\"path\"||child.children.length!==0||child.attributes.d==null){prevChild=child;continue}const computedStyle=computeStyle(stylesheet,child);if(computedStyle[\"marker-start\"]||computedStyle[\"marker-mid\"]||computedStyle[\"marker-end\"]){prevChild=child;continue}const prevChildAttrs=Object.keys(prevChild.attributes);const childAttrs=Object.keys(child.attributes);let attributesAreEqual=prevChildAttrs.length===childAttrs.length;for(const name of childAttrs){if(name!==\"d\"){if(prevChild.attributes[name]==null||prevChild.attributes[name]!==child.attributes[name]){attributesAreEqual=false}}}const prevPathJS=path2js(prevChild);const curPathJS=path2js(child);if(attributesAreEqual&&(force||!intersects(prevPathJS,curPathJS))){js2path(prevChild,prevPathJS.concat(curPathJS),{floatPrecision,noSpaceAfterFlags});detachNodeFromParent(child,node);continue}prevChild=child}}}}};\n})()\n","warnings":[],"map":{"version":3,"mappings":";aAEA,KAAM,CAAE,oBAAqB,EAAI,QAAQ,gBAAgB,EACzD,KAAM,CAAE,kBAAmB,YAAa,EAAI,QAAQ,iBAAiB,EACrE,KAAM,CAAE,QAAS,QAAS,UAAW,EAAI,QAAQ,YAAY,EAE7D,QAAQ,KAAO,aACf,QAAQ,YAAc,2CAStB,QAAQ,GAAK,CAAC,KAAM,SAAW,CAC7B,KAAM,CACJ,MAAQ,MACR,eACA,kBAAoB,KACtB,EAAI,OACJ,MAAM,WAAa,kBAAkB,IAAI,EAEzC,MAAO,CACL,QAAS,CACP,MAAQ,MAAS,CACf,IAAI,UAAY,KAEhB,UAAW,SAAS,KAAK,SAAU,CAEjC,GACE,WAAa,MACb,UAAU,OAAS,WACnB,UAAU,OAAS,QACnB,UAAU,SAAS,SAAW,GAC9B,UAAU,WAAW,GAAK,KAC1B,CACA,UAAY,MACZ,QACF,CAGA,GACE,MAAM,OAAS,WACf,MAAM,OAAS,QACf,MAAM,SAAS,SAAW,GAC1B,MAAM,WAAW,GAAK,KACtB,CACA,UAAY,MACZ,QACF,CAGA,MAAM,cAAgB,aAAa,WAAY,KAAK,EACpD,GACE,cAAc,cAAc,GAC5B,cAAc,YAAY,GAC1B,cAAc,YAAY,EAC1B,CACA,UAAY,MACZ,QACF,CAEA,MAAM,eAAiB,OAAO,KAAK,UAAU,UAAU,EACvD,MAAM,WAAa,OAAO,KAAK,MAAM,UAAU,EAC/C,IAAI,mBAAqB,eAAe,SAAW,WAAW,OAC9D,UAAW,QAAQ,WAAY,CAC7B,GAAI,OAAS,IAAK,CAChB,GACE,UAAU,WAAW,IAAI,GAAK,MAC9B,UAAU,WAAW,IAAI,IAAM,MAAM,WAAW,IAAI,EACpD,CACA,mBAAqB,KACvB,CACF,CACF,CACA,MAAM,WAAa,QAAQ,SAAS,EACpC,MAAM,UAAY,QAAQ,KAAK,EAE/B,GACE,qBACC,OAAS,CAAC,WAAW,WAAY,SAAS,GAC3C,CACA,QAAQ,UAAW,WAAW,OAAO,SAAS,EAAG,CAC/C,eACA,iBACF,CAAC,EACD,qBAAqB,MAAO,IAAI,EAChC,QACF,CAEA,UAAY,KACd,CACF,CACF,CACF,CACF","names":[],"sources":["/Users/markbakker/RiderProjects/mycrm/node_modules/.pnpm/svgo@3.0.3/node_modules/svgo/plugins/mergePaths.js"],"sourcesContent":["'use strict';\n\nconst { detachNodeFromParent } = require('../lib/xast.js');\nconst { collectStylesheet, computeStyle } = require('../lib/style.js');\nconst { path2js, js2path, intersects } = require('./_path.js');\n\nexports.name = 'mergePaths';\nexports.description = 'merges multiple paths in one if possible';\n\n/**\n * Merge multiple Paths into one.\n *\n * @author Kir Belevich, Lev Solntsev\n *\n * @type {import('./plugins-types').Plugin<'mergePaths'>}\n */\nexports.fn = (root, params) => {\n  const {\n    force = false,\n    floatPrecision,\n    noSpaceAfterFlags = false, // a20 60 45 0 1 30 20 â†’ a20 60 45 0130 20\n  } = params;\n  const stylesheet = collectStylesheet(root);\n\n  return {\n    element: {\n      enter: (node) => {\n        let prevChild = null;\n\n        for (const child of node.children) {\n          // skip if previous element is not path or contains animation elements\n          if (\n            prevChild == null ||\n            prevChild.type !== 'element' ||\n            prevChild.name !== 'path' ||\n            prevChild.children.length !== 0 ||\n            prevChild.attributes.d == null\n          ) {\n            prevChild = child;\n            continue;\n          }\n\n          // skip if element is not path or contains animation elements\n          if (\n            child.type !== 'element' ||\n            child.name !== 'path' ||\n            child.children.length !== 0 ||\n            child.attributes.d == null\n          ) {\n            prevChild = child;\n            continue;\n          }\n\n          // preserve paths with markers\n          const computedStyle = computeStyle(stylesheet, child);\n          if (\n            computedStyle['marker-start'] ||\n            computedStyle['marker-mid'] ||\n            computedStyle['marker-end']\n          ) {\n            prevChild = child;\n            continue;\n          }\n\n          const prevChildAttrs = Object.keys(prevChild.attributes);\n          const childAttrs = Object.keys(child.attributes);\n          let attributesAreEqual = prevChildAttrs.length === childAttrs.length;\n          for (const name of childAttrs) {\n            if (name !== 'd') {\n              if (\n                prevChild.attributes[name] == null ||\n                prevChild.attributes[name] !== child.attributes[name]\n              ) {\n                attributesAreEqual = false;\n              }\n            }\n          }\n          const prevPathJS = path2js(prevChild);\n          const curPathJS = path2js(child);\n\n          if (\n            attributesAreEqual &&\n            (force || !intersects(prevPathJS, curPathJS))\n          ) {\n            js2path(prevChild, prevPathJS.concat(curPathJS), {\n              floatPrecision,\n              noSpaceAfterFlags,\n            });\n            detachNodeFromParent(child, node);\n            continue;\n          }\n\n          prevChild = child;\n        }\n      },\n    },\n  };\n};\n"]}}