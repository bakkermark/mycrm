{"code":"(()=>{\n\"use strict\";const{detachNodeFromParent}=require(\"../lib/xast.js\");const{attrsGroups}=require(\"./_collections.js\");exports.name=\"removeScriptElement\";exports.description=\"removes scripts (disabled by default)\";const eventAttrs=[...attrsGroups.animationEvent,...attrsGroups.documentEvent,...attrsGroups.documentElementEvent,...attrsGroups.globalEvent,...attrsGroups.graphicalEvent];exports.fn=()=>{return{element:{enter:(node,parentNode)=>{if(node.name===\"script\"){detachNodeFromParent(node,parentNode);return}for(const attr of eventAttrs){if(node.attributes[attr]!=null){delete node.attributes[attr]}}},exit:(node,parentNode)=>{if(node.name!==\"a\"){return}for(const attr of Object.keys(node.attributes)){if(attr===\"href\"||attr.endsWith(\":href\")){if(node.attributes[attr]==null||!node.attributes[attr].trimStart().startsWith(\"javascript:\")){continue}const index=parentNode.children.indexOf(node);parentNode.children.splice(index,1,...node.children);for(const child of node.children){Object.defineProperty(child,\"parentNode\",{writable:true,value:parentNode})}}}}}}};\n})()\n","warnings":[],"map":{"version":3,"mappings":";aAEA,KAAM,CAAE,oBAAqB,EAAI,QAAQ,gBAAgB,EACzD,KAAM,CAAE,WAAY,EAAI,QAAQ,mBAAmB,EAEnD,QAAQ,KAAO,sBACf,QAAQ,YAAc,wCAGtB,MAAM,WAAa,CACjB,GAAG,YAAY,eACf,GAAG,YAAY,cACf,GAAG,YAAY,qBACf,GAAG,YAAY,YACf,GAAG,YAAY,cACjB,EAUA,QAAQ,GAAK,IAAM,CACjB,MAAO,CACL,QAAS,CACP,MAAO,CAAC,KAAM,aAAe,CAC3B,GAAI,KAAK,OAAS,SAAU,CAC1B,qBAAqB,KAAM,UAAU,EACrC,MACF,CAEA,UAAW,QAAQ,WAAY,CAC7B,GAAI,KAAK,WAAW,IAAI,GAAK,KAAM,CACjC,OAAO,KAAK,WAAW,IAAI,CAC7B,CACF,CACF,EACA,KAAM,CAAC,KAAM,aAAe,CAC1B,GAAI,KAAK,OAAS,IAAK,CACrB,MACF,CAEA,UAAW,QAAQ,OAAO,KAAK,KAAK,UAAU,EAAG,CAC/C,GAAI,OAAS,QAAU,KAAK,SAAS,OAAO,EAAG,CAC7C,GACE,KAAK,WAAW,IAAI,GAAK,MACzB,CAAC,KAAK,WAAW,IAAI,EAAE,UAAU,EAAE,WAAW,aAAa,EAC3D,CACA,QACF,CAEA,MAAM,MAAQ,WAAW,SAAS,QAAQ,IAAI,EAC9C,WAAW,SAAS,OAAO,MAAO,EAAG,GAAG,KAAK,QAAQ,EAGrD,UAAW,SAAS,KAAK,SAAU,CACjC,OAAO,eAAe,MAAO,aAAc,CACzC,SAAU,KACV,MAAO,UACT,CAAC,CACH,CACF,CACF,CACF,CACF,CACF,CACF","names":[],"sources":["/Users/markbakker/RiderProjects/mycrm/node_modules/.pnpm/svgo@3.0.3/node_modules/svgo/plugins/removeScriptElement.js"],"sourcesContent":["'use strict';\n\nconst { detachNodeFromParent } = require('../lib/xast.js');\nconst { attrsGroups } = require('./_collections.js');\n\nexports.name = 'removeScriptElement';\nexports.description = 'removes scripts (disabled by default)';\n\n/** Union of all event attributes. */\nconst eventAttrs = [\n  ...attrsGroups.animationEvent,\n  ...attrsGroups.documentEvent,\n  ...attrsGroups.documentElementEvent,\n  ...attrsGroups.globalEvent,\n  ...attrsGroups.graphicalEvent,\n];\n\n/**\n * Remove scripts.\n *\n * https://www.w3.org/TR/SVG11/script.html\n *\n * @author Patrick Klingemann\n * @type {import('./plugins-types').Plugin<'removeScriptElement'>}\n */\nexports.fn = () => {\n  return {\n    element: {\n      enter: (node, parentNode) => {\n        if (node.name === 'script') {\n          detachNodeFromParent(node, parentNode);\n          return;\n        }\n\n        for (const attr of eventAttrs) {\n          if (node.attributes[attr] != null) {\n            delete node.attributes[attr];\n          }\n        }\n      },\n      exit: (node, parentNode) => {\n        if (node.name !== 'a') {\n          return;\n        }\n\n        for (const attr of Object.keys(node.attributes)) {\n          if (attr === 'href' || attr.endsWith(':href')) {\n            if (\n              node.attributes[attr] == null ||\n              !node.attributes[attr].trimStart().startsWith('javascript:')\n            ) {\n              continue;\n            }\n\n            const index = parentNode.children.indexOf(node);\n            parentNode.children.splice(index, 1, ...node.children);\n\n            // TODO remove legacy parentNode in v4\n            for (const child of node.children) {\n              Object.defineProperty(child, 'parentNode', {\n                writable: true,\n                value: parentNode,\n              });\n            }\n          }\n        }\n      },\n    },\n  };\n};\n"]}}