{"code":"(()=>{\n\"use strict\";var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __assign=exports&&exports.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};var __createBinding=exports&&exports.__createBinding||(Object.create?function(o,m,k,k2){if(k2===void 0)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||(\"get\"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===void 0)k2=k;o[k2]=m[k]});var __setModuleDefault=exports&&exports.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,\"default\",{enumerable:true,value:v})}:function(o,v){o[\"default\"]=v});var __importStar=exports&&exports.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null){for(var k in mod)if(k!==\"default\"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k)}__setModuleDefault(result,mod);return result};var __spreadArray=exports&&exports.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}return to.concat(ar||Array.prototype.slice.call(from))};Object.defineProperty(exports,\"__esModule\",{value:true});exports.select=exports.filter=exports.some=exports.is=exports.aliases=exports.pseudos=exports.filters=void 0;var css_what_1=require(\"css-what\");var css_select_1=require(\"css-select\");var DomUtils=__importStar(require(\"domutils\"));var boolbase=__importStar(require(\"boolbase\"));var helpers_js_1=require(\"./helpers.js\");var positionals_js_1=require(\"./positionals.js\");var css_select_2=require(\"css-select\");Object.defineProperty(exports,\"filters\",{enumerable:true,get:function(){return css_select_2.filters}});Object.defineProperty(exports,\"pseudos\",{enumerable:true,get:function(){return css_select_2.pseudos}});Object.defineProperty(exports,\"aliases\",{enumerable:true,get:function(){return css_select_2.aliases}});var UNIVERSAL_SELECTOR={type:css_what_1.SelectorType.Universal,namespace:null};var SCOPE_PSEUDO={type:css_what_1.SelectorType.Pseudo,name:\"scope\",data:null};function is(element,selector,options){if(options===void 0){options={}}return some([element],selector,options)}__name(is,\"is\");exports.is=is;function some(elements,selector,options){if(options===void 0){options={}}if(typeof selector===\"function\")return elements.some(selector);var _a=(0,helpers_js_1.groupSelectors)((0,css_what_1.parse)(selector)),plain=_a[0],filtered=_a[1];return plain.length>0&&elements.some((0,css_select_1._compileToken)(plain,options))||filtered.some(function(sel){return filterBySelector(sel,elements,options).length>0})}__name(some,\"some\");exports.some=some;function filterByPosition(filter2,elems,data,options){var num=typeof data===\"string\"?parseInt(data,10):NaN;switch(filter2){case\"first\":case\"lt\":return elems;case\"last\":return elems.length>0?[elems[elems.length-1]]:elems;case\"nth\":case\"eq\":return isFinite(num)&&Math.abs(num)<elems.length?[num<0?elems[elems.length+num]:elems[num]]:[];case\"gt\":return isFinite(num)?elems.slice(num+1):[];case\"even\":return elems.filter(function(_,i){return i%2===0});case\"odd\":return elems.filter(function(_,i){return i%2===1});case\"not\":{var filtered_1=new Set(filterParsed(data,elems,options));return elems.filter(function(e){return!filtered_1.has(e)})}}}__name(filterByPosition,\"filterByPosition\");function filter(selector,elements,options){if(options===void 0){options={}}return filterParsed((0,css_what_1.parse)(selector),elements,options)}__name(filter,\"filter\");exports.filter=filter;function filterParsed(selector,elements,options){if(elements.length===0)return[];var _a=(0,helpers_js_1.groupSelectors)(selector),plainSelectors=_a[0],filteredSelectors=_a[1];var found;if(plainSelectors.length){var filtered=filterElements(elements,plainSelectors,options);if(filteredSelectors.length===0){return filtered}if(filtered.length){found=new Set(filtered)}}for(var i=0;i<filteredSelectors.length&&(found===null||found===void 0?void 0:found.size)!==elements.length;i++){var filteredSelector=filteredSelectors[i];var missing=found?elements.filter(function(e){return DomUtils.isTag(e)&&!found.has(e)}):elements;if(missing.length===0)break;var filtered=filterBySelector(filteredSelector,elements,options);if(filtered.length){if(!found){if(i===filteredSelectors.length-1){return filtered}found=new Set(filtered)}else{filtered.forEach(function(el){return found.add(el)})}}}return typeof found!==\"undefined\"?found.size===elements.length?elements:elements.filter(function(el){return found.has(el)}):[]}__name(filterParsed,\"filterParsed\");function filterBySelector(selector,elements,options){var _a;if(selector.some(css_what_1.isTraversal)){var root=(_a=options.root)!==null&&_a!==void 0?_a:(0,helpers_js_1.getDocumentRoot)(elements[0]);var opts=__assign(__assign({},options),{context:elements,relativeSelector:false});selector.push(SCOPE_PSEUDO);return findFilterElements(root,selector,opts,true,elements.length)}return findFilterElements(elements,selector,options,false,elements.length)}__name(filterBySelector,\"filterBySelector\");function select(selector,root,options,limit){if(options===void 0){options={}}if(limit===void 0){limit=Infinity}if(typeof selector===\"function\"){return find(root,selector)}var _a=(0,helpers_js_1.groupSelectors)((0,css_what_1.parse)(selector)),plain=_a[0],filtered=_a[1];var results=filtered.map(function(sel){return findFilterElements(root,sel,options,true,limit)});if(plain.length){results.push(findElements(root,plain,options,limit))}if(results.length===0){return[]}if(results.length===1){return results[0]}return DomUtils.uniqueSort(results.reduce(function(a,b){return __spreadArray(__spreadArray([],a,true),b,true)}))}__name(select,\"select\");exports.select=select;function findFilterElements(root,selector,options,queryForSelector,totalLimit){var filterIndex=selector.findIndex(positionals_js_1.isFilter);var sub=selector.slice(0,filterIndex);var filter2=selector[filterIndex];var partLimit=selector.length-1===filterIndex?totalLimit:Infinity;var limit=(0,positionals_js_1.getLimit)(filter2.name,filter2.data,partLimit);if(limit===0)return[];var elemsNoLimit=sub.length===0&&!Array.isArray(root)?DomUtils.getChildren(root).filter(DomUtils.isTag):sub.length===0?(Array.isArray(root)?root:[root]).filter(DomUtils.isTag):queryForSelector||sub.some(css_what_1.isTraversal)?findElements(root,[sub],options,limit):filterElements(root,[sub],options);var elems=elemsNoLimit.slice(0,limit);var result=filterByPosition(filter2.name,elems,filter2.data,options);if(result.length===0||selector.length===filterIndex+1){return result}var remainingSelector=selector.slice(filterIndex+1);var remainingHasTraversal=remainingSelector.some(css_what_1.isTraversal);if(remainingHasTraversal){if((0,css_what_1.isTraversal)(remainingSelector[0])){var type=remainingSelector[0].type;if(type===css_what_1.SelectorType.Sibling||type===css_what_1.SelectorType.Adjacent){result=(0,css_select_1.prepareContext)(result,DomUtils,true)}remainingSelector.unshift(UNIVERSAL_SELECTOR)}options=__assign(__assign({},options),{relativeSelector:false,rootFunc:function(el){return result.includes(el)}})}else if(options.rootFunc&&options.rootFunc!==boolbase.trueFunc){options=__assign(__assign({},options),{rootFunc:boolbase.trueFunc})}return remainingSelector.some(positionals_js_1.isFilter)?findFilterElements(result,remainingSelector,options,false,totalLimit):remainingHasTraversal?findElements(result,[remainingSelector],options,totalLimit):filterElements(result,[remainingSelector],options)}__name(findFilterElements,\"findFilterElements\");function findElements(root,sel,options,limit){var query=(0,css_select_1._compileToken)(sel,options,root);return find(root,query,limit)}__name(findElements,\"findElements\");function find(root,query,limit){if(limit===void 0){limit=Infinity}var elems=(0,css_select_1.prepareContext)(root,DomUtils,query.shouldTestNextSiblings);return DomUtils.find(function(node){return DomUtils.isTag(node)&&query(node)},elems,true,limit)}__name(find,\"find\");function filterElements(elements,sel,options){var els=(Array.isArray(elements)?elements:[elements]).filter(DomUtils.isTag);if(els.length===0)return els;var query=(0,css_select_1._compileToken)(sel,options);return query===boolbase.trueFunc?els:els.filter(query)}__name(filterElements,\"filterElements\");\n})()\n","warnings":[],"map":{"version":3,"mappings":"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","names":["filter"],"sources":["/Users/markbakker/RiderProjects/mycrm/node_modules/.pnpm/cheerio-select@2.1.0/node_modules/cheerio-select/lib/index.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.select = exports.filter = exports.some = exports.is = exports.aliases = exports.pseudos = exports.filters = void 0;\nvar css_what_1 = require(\"css-what\");\nvar css_select_1 = require(\"css-select\");\nvar DomUtils = __importStar(require(\"domutils\"));\nvar boolbase = __importStar(require(\"boolbase\"));\nvar helpers_js_1 = require(\"./helpers.js\");\nvar positionals_js_1 = require(\"./positionals.js\");\n// Re-export pseudo extension points\nvar css_select_2 = require(\"css-select\");\nObject.defineProperty(exports, \"filters\", { enumerable: true, get: function () { return css_select_2.filters; } });\nObject.defineProperty(exports, \"pseudos\", { enumerable: true, get: function () { return css_select_2.pseudos; } });\nObject.defineProperty(exports, \"aliases\", { enumerable: true, get: function () { return css_select_2.aliases; } });\nvar UNIVERSAL_SELECTOR = {\n    type: css_what_1.SelectorType.Universal,\n    namespace: null,\n};\nvar SCOPE_PSEUDO = {\n    type: css_what_1.SelectorType.Pseudo,\n    name: \"scope\",\n    data: null,\n};\nfunction is(element, selector, options) {\n    if (options === void 0) { options = {}; }\n    return some([element], selector, options);\n}\nexports.is = is;\nfunction some(elements, selector, options) {\n    if (options === void 0) { options = {}; }\n    if (typeof selector === \"function\")\n        return elements.some(selector);\n    var _a = (0, helpers_js_1.groupSelectors)((0, css_what_1.parse)(selector)), plain = _a[0], filtered = _a[1];\n    return ((plain.length > 0 && elements.some((0, css_select_1._compileToken)(plain, options))) ||\n        filtered.some(function (sel) { return filterBySelector(sel, elements, options).length > 0; }));\n}\nexports.some = some;\nfunction filterByPosition(filter, elems, data, options) {\n    var num = typeof data === \"string\" ? parseInt(data, 10) : NaN;\n    switch (filter) {\n        case \"first\":\n        case \"lt\":\n            // Already done in `getLimit`\n            return elems;\n        case \"last\":\n            return elems.length > 0 ? [elems[elems.length - 1]] : elems;\n        case \"nth\":\n        case \"eq\":\n            return isFinite(num) && Math.abs(num) < elems.length\n                ? [num < 0 ? elems[elems.length + num] : elems[num]]\n                : [];\n        case \"gt\":\n            return isFinite(num) ? elems.slice(num + 1) : [];\n        case \"even\":\n            return elems.filter(function (_, i) { return i % 2 === 0; });\n        case \"odd\":\n            return elems.filter(function (_, i) { return i % 2 === 1; });\n        case \"not\": {\n            var filtered_1 = new Set(filterParsed(data, elems, options));\n            return elems.filter(function (e) { return !filtered_1.has(e); });\n        }\n    }\n}\nfunction filter(selector, elements, options) {\n    if (options === void 0) { options = {}; }\n    return filterParsed((0, css_what_1.parse)(selector), elements, options);\n}\nexports.filter = filter;\n/**\n * Filter a set of elements by a selector.\n *\n * Will return elements in the original order.\n *\n * @param selector Selector to filter by.\n * @param elements Elements to filter.\n * @param options Options for selector.\n */\nfunction filterParsed(selector, elements, options) {\n    if (elements.length === 0)\n        return [];\n    var _a = (0, helpers_js_1.groupSelectors)(selector), plainSelectors = _a[0], filteredSelectors = _a[1];\n    var found;\n    if (plainSelectors.length) {\n        var filtered = filterElements(elements, plainSelectors, options);\n        // If there are no filters, just return\n        if (filteredSelectors.length === 0) {\n            return filtered;\n        }\n        // Otherwise, we have to do some filtering\n        if (filtered.length) {\n            found = new Set(filtered);\n        }\n    }\n    for (var i = 0; i < filteredSelectors.length && (found === null || found === void 0 ? void 0 : found.size) !== elements.length; i++) {\n        var filteredSelector = filteredSelectors[i];\n        var missing = found\n            ? elements.filter(function (e) { return DomUtils.isTag(e) && !found.has(e); })\n            : elements;\n        if (missing.length === 0)\n            break;\n        var filtered = filterBySelector(filteredSelector, elements, options);\n        if (filtered.length) {\n            if (!found) {\n                /*\n                 * If we haven't found anything before the last selector,\n                 * just return what we found now.\n                 */\n                if (i === filteredSelectors.length - 1) {\n                    return filtered;\n                }\n                found = new Set(filtered);\n            }\n            else {\n                filtered.forEach(function (el) { return found.add(el); });\n            }\n        }\n    }\n    return typeof found !== \"undefined\"\n        ? (found.size === elements.length\n            ? elements\n            : // Filter elements to preserve order\n                elements.filter(function (el) {\n                    return found.has(el);\n                }))\n        : [];\n}\nfunction filterBySelector(selector, elements, options) {\n    var _a;\n    if (selector.some(css_what_1.isTraversal)) {\n        /*\n         * Get root node, run selector with the scope\n         * set to all of our nodes.\n         */\n        var root = (_a = options.root) !== null && _a !== void 0 ? _a : (0, helpers_js_1.getDocumentRoot)(elements[0]);\n        var opts = __assign(__assign({}, options), { context: elements, relativeSelector: false });\n        selector.push(SCOPE_PSEUDO);\n        return findFilterElements(root, selector, opts, true, elements.length);\n    }\n    // Performance optimization: If we don't have to traverse, just filter set.\n    return findFilterElements(elements, selector, options, false, elements.length);\n}\nfunction select(selector, root, options, limit) {\n    if (options === void 0) { options = {}; }\n    if (limit === void 0) { limit = Infinity; }\n    if (typeof selector === \"function\") {\n        return find(root, selector);\n    }\n    var _a = (0, helpers_js_1.groupSelectors)((0, css_what_1.parse)(selector)), plain = _a[0], filtered = _a[1];\n    var results = filtered.map(function (sel) {\n        return findFilterElements(root, sel, options, true, limit);\n    });\n    // Plain selectors can be queried in a single go\n    if (plain.length) {\n        results.push(findElements(root, plain, options, limit));\n    }\n    if (results.length === 0) {\n        return [];\n    }\n    // If there was only a single selector, just return the result\n    if (results.length === 1) {\n        return results[0];\n    }\n    // Sort results, filtering for duplicates\n    return DomUtils.uniqueSort(results.reduce(function (a, b) { return __spreadArray(__spreadArray([], a, true), b, true); }));\n}\nexports.select = select;\n/**\n *\n * @param root Element(s) to search from.\n * @param selector Selector to look for.\n * @param options Options for querying.\n * @param queryForSelector Query multiple levels deep for the initial selector, even if it doesn't contain a traversal.\n */\nfunction findFilterElements(root, selector, options, queryForSelector, totalLimit) {\n    var filterIndex = selector.findIndex(positionals_js_1.isFilter);\n    var sub = selector.slice(0, filterIndex);\n    var filter = selector[filterIndex];\n    // If we are at the end of the selector, we can limit the number of elements to retrieve.\n    var partLimit = selector.length - 1 === filterIndex ? totalLimit : Infinity;\n    /*\n     * Set the number of elements to retrieve.\n     * Eg. for :first, we only have to get a single element.\n     */\n    var limit = (0, positionals_js_1.getLimit)(filter.name, filter.data, partLimit);\n    if (limit === 0)\n        return [];\n    /*\n     * Skip `findElements` call if our selector starts with a positional\n     * pseudo.\n     */\n    var elemsNoLimit = sub.length === 0 && !Array.isArray(root)\n        ? DomUtils.getChildren(root).filter(DomUtils.isTag)\n        : sub.length === 0\n            ? (Array.isArray(root) ? root : [root]).filter(DomUtils.isTag)\n            : queryForSelector || sub.some(css_what_1.isTraversal)\n                ? findElements(root, [sub], options, limit)\n                : filterElements(root, [sub], options);\n    var elems = elemsNoLimit.slice(0, limit);\n    var result = filterByPosition(filter.name, elems, filter.data, options);\n    if (result.length === 0 || selector.length === filterIndex + 1) {\n        return result;\n    }\n    var remainingSelector = selector.slice(filterIndex + 1);\n    var remainingHasTraversal = remainingSelector.some(css_what_1.isTraversal);\n    if (remainingHasTraversal) {\n        if ((0, css_what_1.isTraversal)(remainingSelector[0])) {\n            var type = remainingSelector[0].type;\n            if (type === css_what_1.SelectorType.Sibling ||\n                type === css_what_1.SelectorType.Adjacent) {\n                // If we have a sibling traversal, we need to also look at the siblings.\n                result = (0, css_select_1.prepareContext)(result, DomUtils, true);\n            }\n            // Avoid a traversal-first selector error.\n            remainingSelector.unshift(UNIVERSAL_SELECTOR);\n        }\n        options = __assign(__assign({}, options), { \n            // Avoid absolutizing the selector\n            relativeSelector: false, \n            /*\n             * Add a custom root func, to make sure traversals don't match elements\n             * that aren't a part of the considered tree.\n             */\n            rootFunc: function (el) { return result.includes(el); } });\n    }\n    else if (options.rootFunc && options.rootFunc !== boolbase.trueFunc) {\n        options = __assign(__assign({}, options), { rootFunc: boolbase.trueFunc });\n    }\n    /*\n     * If we have another filter, recursively call `findFilterElements`,\n     * with the `recursive` flag disabled. We only have to look for more\n     * elements when we see a traversal.\n     *\n     * Otherwise,\n     */\n    return remainingSelector.some(positionals_js_1.isFilter)\n        ? findFilterElements(result, remainingSelector, options, false, totalLimit)\n        : remainingHasTraversal\n            ? // Query existing elements to resolve traversal.\n                findElements(result, [remainingSelector], options, totalLimit)\n            : // If we don't have any more traversals, simply filter elements.\n                filterElements(result, [remainingSelector], options);\n}\nfunction findElements(root, sel, options, limit) {\n    var query = (0, css_select_1._compileToken)(sel, options, root);\n    return find(root, query, limit);\n}\nfunction find(root, query, limit) {\n    if (limit === void 0) { limit = Infinity; }\n    var elems = (0, css_select_1.prepareContext)(root, DomUtils, query.shouldTestNextSiblings);\n    return DomUtils.find(function (node) { return DomUtils.isTag(node) && query(node); }, elems, true, limit);\n}\nfunction filterElements(elements, sel, options) {\n    var els = (Array.isArray(elements) ? elements : [elements]).filter(DomUtils.isTag);\n    if (els.length === 0)\n        return els;\n    var query = (0, css_select_1._compileToken)(sel, options);\n    return query === boolbase.trueFunc ? els : els.filter(query);\n}\n//# sourceMappingURL=index.js.map"]}}