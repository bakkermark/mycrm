{"code":"(()=>{\n\"use strict\";var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __createBinding=exports&&exports.__createBinding||(Object.create?function(o,m,k,k2){if(k2===void 0)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||(\"get\"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===void 0)k2=k;o[k2]=m[k]});var __exportStar=exports&&exports.__exportStar||function(m,exports2){for(var p in m)if(p!==\"default\"&&!Object.prototype.hasOwnProperty.call(exports2,p))__createBinding(exports2,m,p)};Object.defineProperty(exports,\"__esModule\",{value:true});exports.DomHandler=void 0;var domelementtype_1=require(\"domelementtype\");var node_js_1=require(\"./node.js\");__exportStar(require(\"./node.js\"),exports);var defaultOpts={withStartIndices:false,withEndIndices:false,xmlMode:false};var DomHandler=function(){function DomHandler2(callback,options,elementCB){this.dom=[];this.root=new node_js_1.Document(this.dom);this.done=false;this.tagStack=[this.root];this.lastNode=null;this.parser=null;if(typeof options===\"function\"){elementCB=options;options=defaultOpts}if(typeof callback===\"object\"){options=callback;callback=void 0}this.callback=callback!==null&&callback!==void 0?callback:null;this.options=options!==null&&options!==void 0?options:defaultOpts;this.elementCB=elementCB!==null&&elementCB!==void 0?elementCB:null}__name(DomHandler2,\"DomHandler\");DomHandler2.prototype.onparserinit=function(parser){this.parser=parser};DomHandler2.prototype.onreset=function(){this.dom=[];this.root=new node_js_1.Document(this.dom);this.done=false;this.tagStack=[this.root];this.lastNode=null;this.parser=null};DomHandler2.prototype.onend=function(){if(this.done)return;this.done=true;this.parser=null;this.handleCallback(null)};DomHandler2.prototype.onerror=function(error){this.handleCallback(error)};DomHandler2.prototype.onclosetag=function(){this.lastNode=null;var elem=this.tagStack.pop();if(this.options.withEndIndices){elem.endIndex=this.parser.endIndex}if(this.elementCB)this.elementCB(elem)};DomHandler2.prototype.onopentag=function(name,attribs){var type=this.options.xmlMode?domelementtype_1.ElementType.Tag:void 0;var element=new node_js_1.Element(name,attribs,void 0,type);this.addNode(element);this.tagStack.push(element)};DomHandler2.prototype.ontext=function(data){var lastNode=this.lastNode;if(lastNode&&lastNode.type===domelementtype_1.ElementType.Text){lastNode.data+=data;if(this.options.withEndIndices){lastNode.endIndex=this.parser.endIndex}}else{var node=new node_js_1.Text(data);this.addNode(node);this.lastNode=node}};DomHandler2.prototype.oncomment=function(data){if(this.lastNode&&this.lastNode.type===domelementtype_1.ElementType.Comment){this.lastNode.data+=data;return}var node=new node_js_1.Comment(data);this.addNode(node);this.lastNode=node};DomHandler2.prototype.oncommentend=function(){this.lastNode=null};DomHandler2.prototype.oncdatastart=function(){var text=new node_js_1.Text(\"\");var node=new node_js_1.CDATA([text]);this.addNode(node);text.parent=node;this.lastNode=text};DomHandler2.prototype.oncdataend=function(){this.lastNode=null};DomHandler2.prototype.onprocessinginstruction=function(name,data){var node=new node_js_1.ProcessingInstruction(name,data);this.addNode(node)};DomHandler2.prototype.handleCallback=function(error){if(typeof this.callback===\"function\"){this.callback(error,this.dom)}else if(error){throw error}};DomHandler2.prototype.addNode=function(node){var parent=this.tagStack[this.tagStack.length-1];var previousSibling=parent.children[parent.children.length-1];if(this.options.withStartIndices){node.startIndex=this.parser.startIndex}if(this.options.withEndIndices){node.endIndex=this.parser.endIndex}parent.children.push(node);if(previousSibling){node.prev=previousSibling;previousSibling.next=node}node.parent=parent;this.lastNode=null};return DomHandler2}();exports.DomHandler=DomHandler;exports.default=DomHandler;\n})()\n","warnings":[],"map":{"version":3,"mappings":"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","names":["exports","DomHandler"],"sources":["/Users/markbakker/RiderProjects/mycrm/node_modules/.pnpm/domhandler@5.0.3/node_modules/domhandler/lib/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DomHandler = void 0;\nvar domelementtype_1 = require(\"domelementtype\");\nvar node_js_1 = require(\"./node.js\");\n__exportStar(require(\"./node.js\"), exports);\n// Default options\nvar defaultOpts = {\n    withStartIndices: false,\n    withEndIndices: false,\n    xmlMode: false,\n};\nvar DomHandler = /** @class */ (function () {\n    /**\n     * @param callback Called once parsing has completed.\n     * @param options Settings for the handler.\n     * @param elementCB Callback whenever a tag is closed.\n     */\n    function DomHandler(callback, options, elementCB) {\n        /** The elements of the DOM */\n        this.dom = [];\n        /** The root element for the DOM */\n        this.root = new node_js_1.Document(this.dom);\n        /** Indicated whether parsing has been completed. */\n        this.done = false;\n        /** Stack of open tags. */\n        this.tagStack = [this.root];\n        /** A data node that is still being written to. */\n        this.lastNode = null;\n        /** Reference to the parser instance. Used for location information. */\n        this.parser = null;\n        // Make it possible to skip arguments, for backwards-compatibility\n        if (typeof options === \"function\") {\n            elementCB = options;\n            options = defaultOpts;\n        }\n        if (typeof callback === \"object\") {\n            options = callback;\n            callback = undefined;\n        }\n        this.callback = callback !== null && callback !== void 0 ? callback : null;\n        this.options = options !== null && options !== void 0 ? options : defaultOpts;\n        this.elementCB = elementCB !== null && elementCB !== void 0 ? elementCB : null;\n    }\n    DomHandler.prototype.onparserinit = function (parser) {\n        this.parser = parser;\n    };\n    // Resets the handler back to starting state\n    DomHandler.prototype.onreset = function () {\n        this.dom = [];\n        this.root = new node_js_1.Document(this.dom);\n        this.done = false;\n        this.tagStack = [this.root];\n        this.lastNode = null;\n        this.parser = null;\n    };\n    // Signals the handler that parsing is done\n    DomHandler.prototype.onend = function () {\n        if (this.done)\n            return;\n        this.done = true;\n        this.parser = null;\n        this.handleCallback(null);\n    };\n    DomHandler.prototype.onerror = function (error) {\n        this.handleCallback(error);\n    };\n    DomHandler.prototype.onclosetag = function () {\n        this.lastNode = null;\n        var elem = this.tagStack.pop();\n        if (this.options.withEndIndices) {\n            elem.endIndex = this.parser.endIndex;\n        }\n        if (this.elementCB)\n            this.elementCB(elem);\n    };\n    DomHandler.prototype.onopentag = function (name, attribs) {\n        var type = this.options.xmlMode ? domelementtype_1.ElementType.Tag : undefined;\n        var element = new node_js_1.Element(name, attribs, undefined, type);\n        this.addNode(element);\n        this.tagStack.push(element);\n    };\n    DomHandler.prototype.ontext = function (data) {\n        var lastNode = this.lastNode;\n        if (lastNode && lastNode.type === domelementtype_1.ElementType.Text) {\n            lastNode.data += data;\n            if (this.options.withEndIndices) {\n                lastNode.endIndex = this.parser.endIndex;\n            }\n        }\n        else {\n            var node = new node_js_1.Text(data);\n            this.addNode(node);\n            this.lastNode = node;\n        }\n    };\n    DomHandler.prototype.oncomment = function (data) {\n        if (this.lastNode && this.lastNode.type === domelementtype_1.ElementType.Comment) {\n            this.lastNode.data += data;\n            return;\n        }\n        var node = new node_js_1.Comment(data);\n        this.addNode(node);\n        this.lastNode = node;\n    };\n    DomHandler.prototype.oncommentend = function () {\n        this.lastNode = null;\n    };\n    DomHandler.prototype.oncdatastart = function () {\n        var text = new node_js_1.Text(\"\");\n        var node = new node_js_1.CDATA([text]);\n        this.addNode(node);\n        text.parent = node;\n        this.lastNode = text;\n    };\n    DomHandler.prototype.oncdataend = function () {\n        this.lastNode = null;\n    };\n    DomHandler.prototype.onprocessinginstruction = function (name, data) {\n        var node = new node_js_1.ProcessingInstruction(name, data);\n        this.addNode(node);\n    };\n    DomHandler.prototype.handleCallback = function (error) {\n        if (typeof this.callback === \"function\") {\n            this.callback(error, this.dom);\n        }\n        else if (error) {\n            throw error;\n        }\n    };\n    DomHandler.prototype.addNode = function (node) {\n        var parent = this.tagStack[this.tagStack.length - 1];\n        var previousSibling = parent.children[parent.children.length - 1];\n        if (this.options.withStartIndices) {\n            node.startIndex = this.parser.startIndex;\n        }\n        if (this.options.withEndIndices) {\n            node.endIndex = this.parser.endIndex;\n        }\n        parent.children.push(node);\n        if (previousSibling) {\n            node.prev = previousSibling;\n            previousSibling.next = node;\n        }\n        node.parent = parent;\n        this.lastNode = null;\n    };\n    return DomHandler;\n}());\nexports.DomHandler = DomHandler;\nexports.default = DomHandler;\n"]}}