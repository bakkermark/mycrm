{"code":"(()=>{\n\"use strict\";var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});const Header=require(\"./header.js\");const path=require(\"path\");class Pax{static{__name(this,\"Pax\")}constructor(obj,global){this.atime=obj.atime||null;this.charset=obj.charset||null;this.comment=obj.comment||null;this.ctime=obj.ctime||null;this.gid=obj.gid||null;this.gname=obj.gname||null;this.linkpath=obj.linkpath||null;this.mtime=obj.mtime||null;this.path=obj.path||null;this.size=obj.size||null;this.uid=obj.uid||null;this.uname=obj.uname||null;this.dev=obj.dev||null;this.ino=obj.ino||null;this.nlink=obj.nlink||null;this.global=global||false}encode(){const body=this.encodeBody();if(body===\"\"){return null}const bodyLen=Buffer.byteLength(body);const bufLen=512*Math.ceil(1+bodyLen/512);const buf=Buffer.allocUnsafe(bufLen);for(let i=0;i<512;i++){buf[i]=0}new Header({path:(\"PaxHeader/\"+path.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:bodyLen,mtime:this.mtime||null,type:this.global?\"GlobalExtendedHeader\":\"ExtendedHeader\",linkpath:\"\",uname:this.uname||\"\",gname:this.gname||\"\",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(buf);buf.write(body,512,bodyLen,\"utf8\");for(let i=bodyLen+512;i<buf.length;i++){buf[i]=0}return buf}encodeBody(){return this.encodeField(\"path\")+this.encodeField(\"ctime\")+this.encodeField(\"atime\")+this.encodeField(\"dev\")+this.encodeField(\"ino\")+this.encodeField(\"nlink\")+this.encodeField(\"charset\")+this.encodeField(\"comment\")+this.encodeField(\"gid\")+this.encodeField(\"gname\")+this.encodeField(\"linkpath\")+this.encodeField(\"mtime\")+this.encodeField(\"size\")+this.encodeField(\"uid\")+this.encodeField(\"uname\")}encodeField(field){if(this[field]===null||this[field]===void 0){return\"\"}const v=this[field]instanceof Date?this[field].getTime()/1e3:this[field];const s=\" \"+(field===\"dev\"||field===\"ino\"||field===\"nlink\"?\"SCHILY.\":\"\")+field+\"=\"+v+\"\\n\";const byteLen=Buffer.byteLength(s);let digits=Math.floor(Math.log(byteLen)/Math.log(10))+1;if(byteLen+digits>=Math.pow(10,digits)){digits+=1}const len=digits+byteLen;return len+s}}Pax.parse=(string,ex,g)=>new Pax(merge(parseKV(string),ex),g);const merge=__name((a,b)=>b?Object.keys(a).reduce((s,k)=>(s[k]=a[k],s),b):a,\"merge\");const parseKV=__name(string=>string.replace(/\\n$/,\"\").split(\"\\n\").reduce(parseKVLine,Object.create(null)),\"parseKV\");const parseKVLine=__name((set,line)=>{const n=parseInt(line,10);if(n!==Buffer.byteLength(line)+1){return set}line=line.slice((n+\" \").length);const kv=line.split(\"=\");const k=kv.shift().replace(/^SCHILY\\.(dev|ino|nlink)/,\"$1\");if(!k){return set}const v=kv.join(\"=\");set[k]=/^([A-Z]+\\.)?([mac]|birth|creation)time$/.test(k)?new Date(v*1e3):/^[0-9]+$/.test(v)?+v:v;return set},\"parseKVLine\");module.exports=Pax;\n})()\n","warnings":[],"map":{"version":3,"mappings":";+HACA,MAAM,OAAS,QAAQ,aAAa,EACpC,MAAM,KAAO,QAAQ,MAAM,EAE3B,MAAM,GAAI,CAJV,MAIU,oBACR,YAAa,IAAK,OAAQ,CACxB,KAAK,MAAQ,IAAI,OAAS,KAC1B,KAAK,QAAU,IAAI,SAAW,KAC9B,KAAK,QAAU,IAAI,SAAW,KAC9B,KAAK,MAAQ,IAAI,OAAS,KAC1B,KAAK,IAAM,IAAI,KAAO,KACtB,KAAK,MAAQ,IAAI,OAAS,KAC1B,KAAK,SAAW,IAAI,UAAY,KAChC,KAAK,MAAQ,IAAI,OAAS,KAC1B,KAAK,KAAO,IAAI,MAAQ,KACxB,KAAK,KAAO,IAAI,MAAQ,KACxB,KAAK,IAAM,IAAI,KAAO,KACtB,KAAK,MAAQ,IAAI,OAAS,KAC1B,KAAK,IAAM,IAAI,KAAO,KACtB,KAAK,IAAM,IAAI,KAAO,KACtB,KAAK,MAAQ,IAAI,OAAS,KAC1B,KAAK,OAAS,QAAU,KAC1B,CAEA,QAAU,CACR,MAAM,KAAO,KAAK,WAAW,EAC7B,GAAI,OAAS,GAAI,CACf,OAAO,IACT,CAEA,MAAM,QAAU,OAAO,WAAW,IAAI,EAGtC,MAAM,OAAS,IAAM,KAAK,KAAK,EAAI,QAAU,GAAG,EAChD,MAAM,IAAM,OAAO,YAAY,MAAM,EAGrC,QAAS,EAAI,EAAG,EAAI,IAAK,IAAK,CAC5B,IAAI,CAAC,EAAI,CACX,CAEA,IAAI,OAAO,CAIT,MAAO,aAAe,KAAK,SAAS,KAAK,IAAI,GAAG,MAAM,EAAG,EAAE,EAC3D,KAAM,KAAK,MAAQ,IACnB,IAAK,KAAK,KAAO,KACjB,IAAK,KAAK,KAAO,KACjB,KAAM,QACN,MAAO,KAAK,OAAS,KACrB,KAAM,KAAK,OAAS,uBAAyB,iBAC7C,SAAU,GACV,MAAO,KAAK,OAAS,GACrB,MAAO,KAAK,OAAS,GACrB,OAAQ,EACR,OAAQ,EACR,MAAO,KAAK,OAAS,KACrB,MAAO,KAAK,OAAS,IACvB,CAAC,EAAE,OAAO,GAAG,EAEb,IAAI,MAAM,KAAM,IAAK,QAAS,MAAM,EAGpC,QAAS,EAAI,QAAU,IAAK,EAAI,IAAI,OAAQ,IAAK,CAC/C,IAAI,CAAC,EAAI,CACX,CAEA,OAAO,GACT,CAEA,YAAc,CACZ,OACE,KAAK,YAAY,MAAM,EACvB,KAAK,YAAY,OAAO,EACxB,KAAK,YAAY,OAAO,EACxB,KAAK,YAAY,KAAK,EACtB,KAAK,YAAY,KAAK,EACtB,KAAK,YAAY,OAAO,EACxB,KAAK,YAAY,SAAS,EAC1B,KAAK,YAAY,SAAS,EAC1B,KAAK,YAAY,KAAK,EACtB,KAAK,YAAY,OAAO,EACxB,KAAK,YAAY,UAAU,EAC3B,KAAK,YAAY,OAAO,EACxB,KAAK,YAAY,MAAM,EACvB,KAAK,YAAY,KAAK,EACtB,KAAK,YAAY,OAAO,CAE5B,CAEA,YAAa,MAAO,CAClB,GAAI,KAAK,KAAK,IAAM,MAAQ,KAAK,KAAK,IAAM,OAAW,CACrD,MAAO,EACT,CACA,MAAM,EAAI,KAAK,KAAK,YAAa,KAAO,KAAK,KAAK,EAAE,QAAQ,EAAI,IAC5D,KAAK,KAAK,EACd,MAAM,EAAI,KACP,QAAU,OAAS,QAAU,OAAS,QAAU,QAC7C,UAAY,IAChB,MAAQ,IAAM,EAAI,KACpB,MAAM,QAAU,OAAO,WAAW,CAAC,EAInC,IAAI,OAAS,KAAK,MAAM,KAAK,IAAI,OAAO,EAAI,KAAK,IAAI,EAAE,CAAC,EAAI,EAC5D,GAAI,QAAU,QAAU,KAAK,IAAI,GAAI,MAAM,EAAG,CAC5C,QAAU,CACZ,CACA,MAAM,IAAM,OAAS,QACrB,OAAO,IAAM,CACf,CACF,CAEA,IAAI,MAAQ,CAAC,OAAQ,GAAI,IAAM,IAAI,IAAI,MAAM,QAAQ,MAAM,EAAG,EAAE,EAAG,CAAC,EAEpE,MAAM,MAAQ,QAAC,EAAG,IAChB,EAAI,OAAO,KAAK,CAAC,EAAE,OAAO,CAAC,EAAG,KAAO,EAAE,CAAC,EAAI,EAAE,CAAC,EAAG,GAAI,CAAC,EAAI,EAD/C,SAGd,MAAM,QAAU,eACd,OACG,QAAQ,MAAO,EAAE,EACjB,MAAM,IAAI,EACV,OAAO,YAAa,OAAO,OAAO,IAAI,CAAC,EAJ5B,WAMhB,MAAM,YAAc,QAAC,IAAK,OAAS,CACjC,MAAM,EAAI,SAAS,KAAM,EAAE,EAI3B,GAAI,IAAM,OAAO,WAAW,IAAI,EAAI,EAAG,CACrC,OAAO,GACT,CAEA,KAAO,KAAK,OAAO,EAAI,KAAK,MAAM,EAClC,MAAM,GAAK,KAAK,MAAM,GAAG,EACzB,MAAM,EAAI,GAAG,MAAM,EAAE,QAAQ,2BAA4B,IAAI,EAC7D,GAAI,CAAC,EAAG,CACN,OAAO,GACT,CAEA,MAAM,EAAI,GAAG,KAAK,GAAG,EACrB,IAAI,CAAC,EAAI,0CAA0C,KAAK,CAAC,EACrD,IAAI,KAAK,EAAI,GAAI,EACjB,WAAW,KAAK,CAAC,EAAI,CAAC,EACtB,EACJ,OAAO,GACT,EAtBoB,eAwBpB,OAAO,QAAU","names":[],"sources":["/Users/markbakker/RiderProjects/mycrm/node_modules/.pnpm/tar@6.2.0/node_modules/tar/lib/pax.js"],"sourcesContent":["'use strict'\nconst Header = require('./header.js')\nconst path = require('path')\n\nclass Pax {\n  constructor (obj, global) {\n    this.atime = obj.atime || null\n    this.charset = obj.charset || null\n    this.comment = obj.comment || null\n    this.ctime = obj.ctime || null\n    this.gid = obj.gid || null\n    this.gname = obj.gname || null\n    this.linkpath = obj.linkpath || null\n    this.mtime = obj.mtime || null\n    this.path = obj.path || null\n    this.size = obj.size || null\n    this.uid = obj.uid || null\n    this.uname = obj.uname || null\n    this.dev = obj.dev || null\n    this.ino = obj.ino || null\n    this.nlink = obj.nlink || null\n    this.global = global || false\n  }\n\n  encode () {\n    const body = this.encodeBody()\n    if (body === '') {\n      return null\n    }\n\n    const bodyLen = Buffer.byteLength(body)\n    // round up to 512 bytes\n    // add 512 for header\n    const bufLen = 512 * Math.ceil(1 + bodyLen / 512)\n    const buf = Buffer.allocUnsafe(bufLen)\n\n    // 0-fill the header section, it might not hit every field\n    for (let i = 0; i < 512; i++) {\n      buf[i] = 0\n    }\n\n    new Header({\n      // XXX split the path\n      // then the path should be PaxHeader + basename, but less than 99,\n      // prepend with the dirname\n      path: ('PaxHeader/' + path.basename(this.path)).slice(0, 99),\n      mode: this.mode || 0o644,\n      uid: this.uid || null,\n      gid: this.gid || null,\n      size: bodyLen,\n      mtime: this.mtime || null,\n      type: this.global ? 'GlobalExtendedHeader' : 'ExtendedHeader',\n      linkpath: '',\n      uname: this.uname || '',\n      gname: this.gname || '',\n      devmaj: 0,\n      devmin: 0,\n      atime: this.atime || null,\n      ctime: this.ctime || null,\n    }).encode(buf)\n\n    buf.write(body, 512, bodyLen, 'utf8')\n\n    // null pad after the body\n    for (let i = bodyLen + 512; i < buf.length; i++) {\n      buf[i] = 0\n    }\n\n    return buf\n  }\n\n  encodeBody () {\n    return (\n      this.encodeField('path') +\n      this.encodeField('ctime') +\n      this.encodeField('atime') +\n      this.encodeField('dev') +\n      this.encodeField('ino') +\n      this.encodeField('nlink') +\n      this.encodeField('charset') +\n      this.encodeField('comment') +\n      this.encodeField('gid') +\n      this.encodeField('gname') +\n      this.encodeField('linkpath') +\n      this.encodeField('mtime') +\n      this.encodeField('size') +\n      this.encodeField('uid') +\n      this.encodeField('uname')\n    )\n  }\n\n  encodeField (field) {\n    if (this[field] === null || this[field] === undefined) {\n      return ''\n    }\n    const v = this[field] instanceof Date ? this[field].getTime() / 1000\n      : this[field]\n    const s = ' ' +\n      (field === 'dev' || field === 'ino' || field === 'nlink'\n        ? 'SCHILY.' : '') +\n      field + '=' + v + '\\n'\n    const byteLen = Buffer.byteLength(s)\n    // the digits includes the length of the digits in ascii base-10\n    // so if it's 9 characters, then adding 1 for the 9 makes it 10\n    // which makes it 11 chars.\n    let digits = Math.floor(Math.log(byteLen) / Math.log(10)) + 1\n    if (byteLen + digits >= Math.pow(10, digits)) {\n      digits += 1\n    }\n    const len = digits + byteLen\n    return len + s\n  }\n}\n\nPax.parse = (string, ex, g) => new Pax(merge(parseKV(string), ex), g)\n\nconst merge = (a, b) =>\n  b ? Object.keys(a).reduce((s, k) => (s[k] = a[k], s), b) : a\n\nconst parseKV = string =>\n  string\n    .replace(/\\n$/, '')\n    .split('\\n')\n    .reduce(parseKVLine, Object.create(null))\n\nconst parseKVLine = (set, line) => {\n  const n = parseInt(line, 10)\n\n  // XXX Values with \\n in them will fail this.\n  // Refactor to not be a naive line-by-line parse.\n  if (n !== Buffer.byteLength(line) + 1) {\n    return set\n  }\n\n  line = line.slice((n + ' ').length)\n  const kv = line.split('=')\n  const k = kv.shift().replace(/^SCHILY\\.(dev|ino|nlink)/, '$1')\n  if (!k) {\n    return set\n  }\n\n  const v = kv.join('=')\n  set[k] = /^([A-Z]+\\.)?([mac]|birth|creation)time$/.test(k)\n    ? new Date(v * 1000)\n    : /^[0-9]+$/.test(v) ? +v\n    : v\n  return set\n}\n\nmodule.exports = Pax\n"]}}