{"code":"(()=>{\n\"use strict\";var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});Object.defineProperty(exports,\"__esModule\",{value:true});exports.Parser=void 0;const index_js_1=require(\"../tokenizer/index.js\");const open_element_stack_js_1=require(\"./open-element-stack.js\");const formatting_element_list_js_1=require(\"./formatting-element-list.js\");const default_js_1=require(\"../tree-adapters/default.js\");const doctype=require(\"../common/doctype.js\");const foreignContent=require(\"../common/foreign-content.js\");const error_codes_js_1=require(\"../common/error-codes.js\");const unicode=require(\"../common/unicode.js\");const html_js_1=require(\"../common/html.js\");const token_js_1=require(\"../common/token.js\");const HIDDEN_INPUT_TYPE=\"hidden\";const AA_OUTER_LOOP_ITER=8;const AA_INNER_LOOP_ITER=3;var InsertionMode;(function(InsertionMode2){InsertionMode2[InsertionMode2[\"INITIAL\"]=0]=\"INITIAL\";InsertionMode2[InsertionMode2[\"BEFORE_HTML\"]=1]=\"BEFORE_HTML\";InsertionMode2[InsertionMode2[\"BEFORE_HEAD\"]=2]=\"BEFORE_HEAD\";InsertionMode2[InsertionMode2[\"IN_HEAD\"]=3]=\"IN_HEAD\";InsertionMode2[InsertionMode2[\"IN_HEAD_NO_SCRIPT\"]=4]=\"IN_HEAD_NO_SCRIPT\";InsertionMode2[InsertionMode2[\"AFTER_HEAD\"]=5]=\"AFTER_HEAD\";InsertionMode2[InsertionMode2[\"IN_BODY\"]=6]=\"IN_BODY\";InsertionMode2[InsertionMode2[\"TEXT\"]=7]=\"TEXT\";InsertionMode2[InsertionMode2[\"IN_TABLE\"]=8]=\"IN_TABLE\";InsertionMode2[InsertionMode2[\"IN_TABLE_TEXT\"]=9]=\"IN_TABLE_TEXT\";InsertionMode2[InsertionMode2[\"IN_CAPTION\"]=10]=\"IN_CAPTION\";InsertionMode2[InsertionMode2[\"IN_COLUMN_GROUP\"]=11]=\"IN_COLUMN_GROUP\";InsertionMode2[InsertionMode2[\"IN_TABLE_BODY\"]=12]=\"IN_TABLE_BODY\";InsertionMode2[InsertionMode2[\"IN_ROW\"]=13]=\"IN_ROW\";InsertionMode2[InsertionMode2[\"IN_CELL\"]=14]=\"IN_CELL\";InsertionMode2[InsertionMode2[\"IN_SELECT\"]=15]=\"IN_SELECT\";InsertionMode2[InsertionMode2[\"IN_SELECT_IN_TABLE\"]=16]=\"IN_SELECT_IN_TABLE\";InsertionMode2[InsertionMode2[\"IN_TEMPLATE\"]=17]=\"IN_TEMPLATE\";InsertionMode2[InsertionMode2[\"AFTER_BODY\"]=18]=\"AFTER_BODY\";InsertionMode2[InsertionMode2[\"IN_FRAMESET\"]=19]=\"IN_FRAMESET\";InsertionMode2[InsertionMode2[\"AFTER_FRAMESET\"]=20]=\"AFTER_FRAMESET\";InsertionMode2[InsertionMode2[\"AFTER_AFTER_BODY\"]=21]=\"AFTER_AFTER_BODY\";InsertionMode2[InsertionMode2[\"AFTER_AFTER_FRAMESET\"]=22]=\"AFTER_AFTER_FRAMESET\"})(InsertionMode||(InsertionMode={}));const BASE_LOC={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1};const TABLE_STRUCTURE_TAGS=new Set([html_js_1.TAG_ID.TABLE,html_js_1.TAG_ID.TBODY,html_js_1.TAG_ID.TFOOT,html_js_1.TAG_ID.THEAD,html_js_1.TAG_ID.TR]);const defaultParserOptions={scriptingEnabled:true,sourceCodeLocationInfo:false,treeAdapter:default_js_1.defaultTreeAdapter,onParseError:null};class Parser{static{__name(this,\"Parser\")}constructor(options,document,fragmentContext=null,scriptHandler=null){this.fragmentContext=fragmentContext;this.scriptHandler=scriptHandler;this.currentToken=null;this.stopped=false;this.insertionMode=InsertionMode.INITIAL;this.originalInsertionMode=InsertionMode.INITIAL;this.headElement=null;this.formElement=null;this.currentNotInHTML=false;this.tmplInsertionModeStack=[];this.pendingCharacterTokens=[];this.hasNonWhitespacePendingCharacterToken=false;this.framesetOk=true;this.skipNextNewLine=false;this.fosterParentingEnabled=false;this.options=Object.assign(Object.assign({},defaultParserOptions),options);this.treeAdapter=this.options.treeAdapter;this.onParseError=this.options.onParseError;if(this.onParseError){this.options.sourceCodeLocationInfo=true}this.document=document!==null&&document!==void 0?document:this.treeAdapter.createDocument();this.tokenizer=new index_js_1.Tokenizer(this.options,this);this.activeFormattingElements=new formatting_element_list_js_1.FormattingElementList(this.treeAdapter);this.fragmentContextID=fragmentContext?(0,html_js_1.getTagID)(this.treeAdapter.getTagName(fragmentContext)):html_js_1.TAG_ID.UNKNOWN;this._setContextModes(fragmentContext!==null&&fragmentContext!==void 0?fragmentContext:this.document,this.fragmentContextID);this.openElements=new open_element_stack_js_1.OpenElementStack(this.document,this.treeAdapter,this)}static parse(html,options){const parser=new this(options);parser.tokenizer.write(html,true);return parser.document}static getFragmentParser(fragmentContext,options){const opts=Object.assign(Object.assign({},defaultParserOptions),options);fragmentContext!==null&&fragmentContext!==void 0?fragmentContext:fragmentContext=opts.treeAdapter.createElement(html_js_1.TAG_NAMES.TEMPLATE,html_js_1.NS.HTML,[]);const documentMock=opts.treeAdapter.createElement(\"documentmock\",html_js_1.NS.HTML,[]);const parser=new this(opts,documentMock,fragmentContext);if(parser.fragmentContextID===html_js_1.TAG_ID.TEMPLATE){parser.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE)}parser._initTokenizerForFragmentParsing();parser._insertFakeRootElement();parser._resetInsertionMode();parser._findFormInFragmentContext();return parser}getFragment(){const rootElement=this.treeAdapter.getFirstChild(this.document);const fragment=this.treeAdapter.createDocumentFragment();this._adoptNodes(rootElement,fragment);return fragment}_err(token,code,beforeToken){var _a;if(!this.onParseError)return;const loc=(_a=token.location)!==null&&_a!==void 0?_a:BASE_LOC;const err={code,startLine:loc.startLine,startCol:loc.startCol,startOffset:loc.startOffset,endLine:beforeToken?loc.startLine:loc.endLine,endCol:beforeToken?loc.startCol:loc.endCol,endOffset:beforeToken?loc.startOffset:loc.endOffset};this.onParseError(err)}onItemPush(node,tid,isTop){var _a,_b;(_b=(_a=this.treeAdapter).onItemPush)===null||_b===void 0?void 0:_b.call(_a,node);if(isTop&&this.openElements.stackTop>0)this._setContextModes(node,tid)}onItemPop(node,isTop){var _a,_b;if(this.options.sourceCodeLocationInfo){this._setEndLocation(node,this.currentToken)}(_b=(_a=this.treeAdapter).onItemPop)===null||_b===void 0?void 0:_b.call(_a,node,this.openElements.current);if(isTop){let current;let currentTagId;if(this.openElements.stackTop===0&&this.fragmentContext){current=this.fragmentContext;currentTagId=this.fragmentContextID}else{({current,currentTagId}=this.openElements)}this._setContextModes(current,currentTagId)}}_setContextModes(current,tid){const isHTML=current===this.document||this.treeAdapter.getNamespaceURI(current)===html_js_1.NS.HTML;this.currentNotInHTML=!isHTML;this.tokenizer.inForeignNode=!isHTML&&!this._isIntegrationPoint(tid,current)}_switchToTextParsing(currentToken,nextTokenizerState){this._insertElement(currentToken,html_js_1.NS.HTML);this.tokenizer.state=nextTokenizerState;this.originalInsertionMode=this.insertionMode;this.insertionMode=InsertionMode.TEXT}switchToPlaintextParsing(){this.insertionMode=InsertionMode.TEXT;this.originalInsertionMode=InsertionMode.IN_BODY;this.tokenizer.state=index_js_1.TokenizerMode.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let node=this.fragmentContext;while(node){if(this.treeAdapter.getTagName(node)===html_js_1.TAG_NAMES.FORM){this.formElement=node;break}node=this.treeAdapter.getParentNode(node)}}_initTokenizerForFragmentParsing(){if(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==html_js_1.NS.HTML){return}switch(this.fragmentContextID){case html_js_1.TAG_ID.TITLE:case html_js_1.TAG_ID.TEXTAREA:{this.tokenizer.state=index_js_1.TokenizerMode.RCDATA;break}case html_js_1.TAG_ID.STYLE:case html_js_1.TAG_ID.XMP:case html_js_1.TAG_ID.IFRAME:case html_js_1.TAG_ID.NOEMBED:case html_js_1.TAG_ID.NOFRAMES:case html_js_1.TAG_ID.NOSCRIPT:{this.tokenizer.state=index_js_1.TokenizerMode.RAWTEXT;break}case html_js_1.TAG_ID.SCRIPT:{this.tokenizer.state=index_js_1.TokenizerMode.SCRIPT_DATA;break}case html_js_1.TAG_ID.PLAINTEXT:{this.tokenizer.state=index_js_1.TokenizerMode.PLAINTEXT;break}default:}}_setDocumentType(token){const name=token.name||\"\";const publicId=token.publicId||\"\";const systemId=token.systemId||\"\";this.treeAdapter.setDocumentType(this.document,name,publicId,systemId);if(token.location){const documentChildren=this.treeAdapter.getChildNodes(this.document);const docTypeNode=documentChildren.find(node=>this.treeAdapter.isDocumentTypeNode(node));if(docTypeNode){this.treeAdapter.setNodeSourceCodeLocation(docTypeNode,token.location)}}}_attachElementToTree(element,location){if(this.options.sourceCodeLocationInfo){const loc=location&&Object.assign(Object.assign({},location),{startTag:location});this.treeAdapter.setNodeSourceCodeLocation(element,loc)}if(this._shouldFosterParentOnInsertion()){this._fosterParentElement(element)}else{const parent=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(parent,element)}}_appendElement(token,namespaceURI){const element=this.treeAdapter.createElement(token.tagName,namespaceURI,token.attrs);this._attachElementToTree(element,token.location)}_insertElement(token,namespaceURI){const element=this.treeAdapter.createElement(token.tagName,namespaceURI,token.attrs);this._attachElementToTree(element,token.location);this.openElements.push(element,token.tagID)}_insertFakeElement(tagName,tagID){const element=this.treeAdapter.createElement(tagName,html_js_1.NS.HTML,[]);this._attachElementToTree(element,null);this.openElements.push(element,tagID)}_insertTemplate(token){const tmpl=this.treeAdapter.createElement(token.tagName,html_js_1.NS.HTML,token.attrs);const content=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(tmpl,content);this._attachElementToTree(tmpl,token.location);this.openElements.push(tmpl,token.tagID);if(this.options.sourceCodeLocationInfo)this.treeAdapter.setNodeSourceCodeLocation(content,null)}_insertFakeRootElement(){const element=this.treeAdapter.createElement(html_js_1.TAG_NAMES.HTML,html_js_1.NS.HTML,[]);if(this.options.sourceCodeLocationInfo)this.treeAdapter.setNodeSourceCodeLocation(element,null);this.treeAdapter.appendChild(this.openElements.current,element);this.openElements.push(element,html_js_1.TAG_ID.HTML)}_appendCommentNode(token,parent){const commentNode=this.treeAdapter.createCommentNode(token.data);this.treeAdapter.appendChild(parent,commentNode);if(this.options.sourceCodeLocationInfo){this.treeAdapter.setNodeSourceCodeLocation(commentNode,token.location)}}_insertCharacters(token){let parent;let beforeElement;if(this._shouldFosterParentOnInsertion()){({parent,beforeElement}=this._findFosterParentingLocation());if(beforeElement){this.treeAdapter.insertTextBefore(parent,token.chars,beforeElement)}else{this.treeAdapter.insertText(parent,token.chars)}}else{parent=this.openElements.currentTmplContentOrNode;this.treeAdapter.insertText(parent,token.chars)}if(!token.location)return;const siblings=this.treeAdapter.getChildNodes(parent);const textNodeIdx=beforeElement?siblings.lastIndexOf(beforeElement):siblings.length;const textNode=siblings[textNodeIdx-1];const tnLoc=this.treeAdapter.getNodeSourceCodeLocation(textNode);if(tnLoc){const{endLine,endCol,endOffset}=token.location;this.treeAdapter.updateNodeSourceCodeLocation(textNode,{endLine,endCol,endOffset})}else if(this.options.sourceCodeLocationInfo){this.treeAdapter.setNodeSourceCodeLocation(textNode,token.location)}}_adoptNodes(donor,recipient){for(let child=this.treeAdapter.getFirstChild(donor);child;child=this.treeAdapter.getFirstChild(donor)){this.treeAdapter.detachNode(child);this.treeAdapter.appendChild(recipient,child)}}_setEndLocation(element,closingToken){if(this.treeAdapter.getNodeSourceCodeLocation(element)&&closingToken.location){const ctLoc=closingToken.location;const tn=this.treeAdapter.getTagName(element);const endLoc=closingToken.type===token_js_1.TokenType.END_TAG&&tn===closingToken.tagName?{endTag:Object.assign({},ctLoc),endLine:ctLoc.endLine,endCol:ctLoc.endCol,endOffset:ctLoc.endOffset}:{endLine:ctLoc.startLine,endCol:ctLoc.startCol,endOffset:ctLoc.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(element,endLoc)}}shouldProcessStartTagTokenInForeignContent(token){if(!this.currentNotInHTML)return false;let current;let currentTagId;if(this.openElements.stackTop===0&&this.fragmentContext){current=this.fragmentContext;currentTagId=this.fragmentContextID}else{({current,currentTagId}=this.openElements)}if(token.tagID===html_js_1.TAG_ID.SVG&&this.treeAdapter.getTagName(current)===html_js_1.TAG_NAMES.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(current)===html_js_1.NS.MATHML){return false}return this.tokenizer.inForeignNode||(token.tagID===html_js_1.TAG_ID.MGLYPH||token.tagID===html_js_1.TAG_ID.MALIGNMARK)&&!this._isIntegrationPoint(currentTagId,current,html_js_1.NS.HTML)}_processToken(token){switch(token.type){case token_js_1.TokenType.CHARACTER:{this.onCharacter(token);break}case token_js_1.TokenType.NULL_CHARACTER:{this.onNullCharacter(token);break}case token_js_1.TokenType.COMMENT:{this.onComment(token);break}case token_js_1.TokenType.DOCTYPE:{this.onDoctype(token);break}case token_js_1.TokenType.START_TAG:{this._processStartTag(token);break}case token_js_1.TokenType.END_TAG:{this.onEndTag(token);break}case token_js_1.TokenType.EOF:{this.onEof(token);break}case token_js_1.TokenType.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(token);break}}}_isIntegrationPoint(tid,element,foreignNS){const ns=this.treeAdapter.getNamespaceURI(element);const attrs=this.treeAdapter.getAttrList(element);return foreignContent.isIntegrationPoint(tid,ns,attrs,foreignNS)}_reconstructActiveFormattingElements(){const listLength=this.activeFormattingElements.entries.length;if(listLength){const endIndex=this.activeFormattingElements.entries.findIndex(entry=>entry.type===formatting_element_list_js_1.EntryType.Marker||this.openElements.contains(entry.element));const unopenIdx=endIndex<0?listLength-1:endIndex-1;for(let i=unopenIdx;i>=0;i--){const entry=this.activeFormattingElements.entries[i];this._insertElement(entry.token,this.treeAdapter.getNamespaceURI(entry.element));entry.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags();this.openElements.popUntilTableCellPopped();this.activeFormattingElements.clearToLastMarker();this.insertionMode=InsertionMode.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(html_js_1.TAG_ID.P);this.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.P)}_resetInsertionMode(){for(let i=this.openElements.stackTop;i>=0;i--){switch(i===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[i]){case html_js_1.TAG_ID.TR:{this.insertionMode=InsertionMode.IN_ROW;return}case html_js_1.TAG_ID.TBODY:case html_js_1.TAG_ID.THEAD:case html_js_1.TAG_ID.TFOOT:{this.insertionMode=InsertionMode.IN_TABLE_BODY;return}case html_js_1.TAG_ID.CAPTION:{this.insertionMode=InsertionMode.IN_CAPTION;return}case html_js_1.TAG_ID.COLGROUP:{this.insertionMode=InsertionMode.IN_COLUMN_GROUP;return}case html_js_1.TAG_ID.TABLE:{this.insertionMode=InsertionMode.IN_TABLE;return}case html_js_1.TAG_ID.BODY:{this.insertionMode=InsertionMode.IN_BODY;return}case html_js_1.TAG_ID.FRAMESET:{this.insertionMode=InsertionMode.IN_FRAMESET;return}case html_js_1.TAG_ID.SELECT:{this._resetInsertionModeForSelect(i);return}case html_js_1.TAG_ID.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case html_js_1.TAG_ID.HTML:{this.insertionMode=this.headElement?InsertionMode.AFTER_HEAD:InsertionMode.BEFORE_HEAD;return}case html_js_1.TAG_ID.TD:case html_js_1.TAG_ID.TH:{if(i>0){this.insertionMode=InsertionMode.IN_CELL;return}break}case html_js_1.TAG_ID.HEAD:{if(i>0){this.insertionMode=InsertionMode.IN_HEAD;return}break}}}this.insertionMode=InsertionMode.IN_BODY}_resetInsertionModeForSelect(selectIdx){if(selectIdx>0){for(let i=selectIdx-1;i>0;i--){const tn=this.openElements.tagIDs[i];if(tn===html_js_1.TAG_ID.TEMPLATE){break}else if(tn===html_js_1.TAG_ID.TABLE){this.insertionMode=InsertionMode.IN_SELECT_IN_TABLE;return}}}this.insertionMode=InsertionMode.IN_SELECT}_isElementCausesFosterParenting(tn){return TABLE_STRUCTURE_TAGS.has(tn)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let i=this.openElements.stackTop;i>=0;i--){const openElement=this.openElements.items[i];switch(this.openElements.tagIDs[i]){case html_js_1.TAG_ID.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(openElement)===html_js_1.NS.HTML){return{parent:this.treeAdapter.getTemplateContent(openElement),beforeElement:null}}break}case html_js_1.TAG_ID.TABLE:{const parent=this.treeAdapter.getParentNode(openElement);if(parent){return{parent,beforeElement:openElement}}return{parent:this.openElements.items[i-1],beforeElement:null}}default:}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(element){const location=this._findFosterParentingLocation();if(location.beforeElement){this.treeAdapter.insertBefore(location.parent,element,location.beforeElement)}else{this.treeAdapter.appendChild(location.parent,element)}}_isSpecialElement(element,id){const ns=this.treeAdapter.getNamespaceURI(element);return html_js_1.SPECIAL_ELEMENTS[ns].has(id)}onCharacter(token){this.skipNextNewLine=false;if(this.tokenizer.inForeignNode){characterInForeignContent(this,token);return}switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,token);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,token);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,token);break}case InsertionMode.IN_HEAD:{tokenInHead(this,token);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,token);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,token);break}case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:{characterInBody(this,token);break}case InsertionMode.TEXT:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:{this._insertCharacters(token);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,token);break}case InsertionMode.IN_TABLE_TEXT:{characterInTableText(this,token);break}case InsertionMode.IN_COLUMN_GROUP:{tokenInColumnGroup(this,token);break}case InsertionMode.AFTER_BODY:{tokenAfterBody(this,token);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,token);break}default:}}onNullCharacter(token){this.skipNextNewLine=false;if(this.tokenizer.inForeignNode){nullCharacterInForeignContent(this,token);return}switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,token);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,token);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,token);break}case InsertionMode.IN_HEAD:{tokenInHead(this,token);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,token);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,token);break}case InsertionMode.TEXT:{this._insertCharacters(token);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,token);break}case InsertionMode.IN_COLUMN_GROUP:{tokenInColumnGroup(this,token);break}case InsertionMode.AFTER_BODY:{tokenAfterBody(this,token);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,token);break}default:}}onComment(token){this.skipNextNewLine=false;if(this.currentNotInHTML){appendComment(this,token);return}switch(this.insertionMode){case InsertionMode.INITIAL:case InsertionMode.BEFORE_HTML:case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_TEMPLATE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:{appendComment(this,token);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,token);break}case InsertionMode.AFTER_BODY:{appendCommentToRootHtmlElement(this,token);break}case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{appendCommentToDocument(this,token);break}default:}}onDoctype(token){this.skipNextNewLine=false;switch(this.insertionMode){case InsertionMode.INITIAL:{doctypeInInitialMode(this,token);break}case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:{this._err(token,error_codes_js_1.ERR.misplacedDoctype);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,token);break}default:}}onStartTag(token){this.skipNextNewLine=false;this.currentToken=token;this._processStartTag(token);if(token.selfClosing&&!token.ackSelfClosing){this._err(token,error_codes_js_1.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}}_processStartTag(token){if(this.shouldProcessStartTagTokenInForeignContent(token)){startTagInForeignContent(this,token)}else{this._startTagOutsideForeignContent(token)}}_startTagOutsideForeignContent(token){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,token);break}case InsertionMode.BEFORE_HTML:{startTagBeforeHtml(this,token);break}case InsertionMode.BEFORE_HEAD:{startTagBeforeHead(this,token);break}case InsertionMode.IN_HEAD:{startTagInHead(this,token);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{startTagInHeadNoScript(this,token);break}case InsertionMode.AFTER_HEAD:{startTagAfterHead(this,token);break}case InsertionMode.IN_BODY:{startTagInBody(this,token);break}case InsertionMode.IN_TABLE:{startTagInTable(this,token);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,token);break}case InsertionMode.IN_CAPTION:{startTagInCaption(this,token);break}case InsertionMode.IN_COLUMN_GROUP:{startTagInColumnGroup(this,token);break}case InsertionMode.IN_TABLE_BODY:{startTagInTableBody(this,token);break}case InsertionMode.IN_ROW:{startTagInRow(this,token);break}case InsertionMode.IN_CELL:{startTagInCell(this,token);break}case InsertionMode.IN_SELECT:{startTagInSelect(this,token);break}case InsertionMode.IN_SELECT_IN_TABLE:{startTagInSelectInTable(this,token);break}case InsertionMode.IN_TEMPLATE:{startTagInTemplate(this,token);break}case InsertionMode.AFTER_BODY:{startTagAfterBody(this,token);break}case InsertionMode.IN_FRAMESET:{startTagInFrameset(this,token);break}case InsertionMode.AFTER_FRAMESET:{startTagAfterFrameset(this,token);break}case InsertionMode.AFTER_AFTER_BODY:{startTagAfterAfterBody(this,token);break}case InsertionMode.AFTER_AFTER_FRAMESET:{startTagAfterAfterFrameset(this,token);break}default:}}onEndTag(token){this.skipNextNewLine=false;this.currentToken=token;if(this.currentNotInHTML){endTagInForeignContent(this,token)}else{this._endTagOutsideForeignContent(token)}}_endTagOutsideForeignContent(token){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,token);break}case InsertionMode.BEFORE_HTML:{endTagBeforeHtml(this,token);break}case InsertionMode.BEFORE_HEAD:{endTagBeforeHead(this,token);break}case InsertionMode.IN_HEAD:{endTagInHead(this,token);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{endTagInHeadNoScript(this,token);break}case InsertionMode.AFTER_HEAD:{endTagAfterHead(this,token);break}case InsertionMode.IN_BODY:{endTagInBody(this,token);break}case InsertionMode.TEXT:{endTagInText(this,token);break}case InsertionMode.IN_TABLE:{endTagInTable(this,token);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,token);break}case InsertionMode.IN_CAPTION:{endTagInCaption(this,token);break}case InsertionMode.IN_COLUMN_GROUP:{endTagInColumnGroup(this,token);break}case InsertionMode.IN_TABLE_BODY:{endTagInTableBody(this,token);break}case InsertionMode.IN_ROW:{endTagInRow(this,token);break}case InsertionMode.IN_CELL:{endTagInCell(this,token);break}case InsertionMode.IN_SELECT:{endTagInSelect(this,token);break}case InsertionMode.IN_SELECT_IN_TABLE:{endTagInSelectInTable(this,token);break}case InsertionMode.IN_TEMPLATE:{endTagInTemplate(this,token);break}case InsertionMode.AFTER_BODY:{endTagAfterBody(this,token);break}case InsertionMode.IN_FRAMESET:{endTagInFrameset(this,token);break}case InsertionMode.AFTER_FRAMESET:{endTagAfterFrameset(this,token);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,token);break}default:}}onEof(token){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,token);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,token);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,token);break}case InsertionMode.IN_HEAD:{tokenInHead(this,token);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,token);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,token);break}case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:{eofInBody(this,token);break}case InsertionMode.TEXT:{eofInText(this,token);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,token);break}case InsertionMode.IN_TEMPLATE:{eofInTemplate(this,token);break}case InsertionMode.AFTER_BODY:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{stopParsing(this,token);break}default:}}onWhitespaceCharacter(token){if(this.skipNextNewLine){this.skipNextNewLine=false;if(token.chars.charCodeAt(0)===unicode.CODE_POINTS.LINE_FEED){if(token.chars.length===1){return}token.chars=token.chars.substr(1)}}if(this.tokenizer.inForeignNode){this._insertCharacters(token);return}switch(this.insertionMode){case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.TEXT:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:{this._insertCharacters(token);break}case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:case InsertionMode.AFTER_BODY:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{whitespaceCharacterInBody(this,token);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,token);break}case InsertionMode.IN_TABLE_TEXT:{whitespaceCharacterInTableText(this,token);break}default:}}}exports.Parser=Parser;function aaObtainFormattingElementEntry(p,token){let formattingElementEntry=p.activeFormattingElements.getElementEntryInScopeWithTagName(token.tagName);if(formattingElementEntry){if(!p.openElements.contains(formattingElementEntry.element)){p.activeFormattingElements.removeEntry(formattingElementEntry);formattingElementEntry=null}else if(!p.openElements.hasInScope(token.tagID)){formattingElementEntry=null}}else{genericEndTagInBody(p,token)}return formattingElementEntry}__name(aaObtainFormattingElementEntry,\"aaObtainFormattingElementEntry\");function aaObtainFurthestBlock(p,formattingElementEntry){let furthestBlock=null;let idx=p.openElements.stackTop;for(;idx>=0;idx--){const element=p.openElements.items[idx];if(element===formattingElementEntry.element){break}if(p._isSpecialElement(element,p.openElements.tagIDs[idx])){furthestBlock=element}}if(!furthestBlock){p.openElements.shortenToLength(idx<0?0:idx);p.activeFormattingElements.removeEntry(formattingElementEntry)}return furthestBlock}__name(aaObtainFurthestBlock,\"aaObtainFurthestBlock\");function aaInnerLoop(p,furthestBlock,formattingElement){let lastElement=furthestBlock;let nextElement=p.openElements.getCommonAncestor(furthestBlock);for(let i=0,element=nextElement;element!==formattingElement;i++,element=nextElement){nextElement=p.openElements.getCommonAncestor(element);const elementEntry=p.activeFormattingElements.getElementEntry(element);const counterOverflow=elementEntry&&i>=AA_INNER_LOOP_ITER;const shouldRemoveFromOpenElements=!elementEntry||counterOverflow;if(shouldRemoveFromOpenElements){if(counterOverflow){p.activeFormattingElements.removeEntry(elementEntry)}p.openElements.remove(element)}else{element=aaRecreateElementFromEntry(p,elementEntry);if(lastElement===furthestBlock){p.activeFormattingElements.bookmark=elementEntry}p.treeAdapter.detachNode(lastElement);p.treeAdapter.appendChild(element,lastElement);lastElement=element}}return lastElement}__name(aaInnerLoop,\"aaInnerLoop\");function aaRecreateElementFromEntry(p,elementEntry){const ns=p.treeAdapter.getNamespaceURI(elementEntry.element);const newElement=p.treeAdapter.createElement(elementEntry.token.tagName,ns,elementEntry.token.attrs);p.openElements.replace(elementEntry.element,newElement);elementEntry.element=newElement;return newElement}__name(aaRecreateElementFromEntry,\"aaRecreateElementFromEntry\");function aaInsertLastNodeInCommonAncestor(p,commonAncestor,lastElement){const tn=p.treeAdapter.getTagName(commonAncestor);const tid=(0,html_js_1.getTagID)(tn);if(p._isElementCausesFosterParenting(tid)){p._fosterParentElement(lastElement)}else{const ns=p.treeAdapter.getNamespaceURI(commonAncestor);if(tid===html_js_1.TAG_ID.TEMPLATE&&ns===html_js_1.NS.HTML){commonAncestor=p.treeAdapter.getTemplateContent(commonAncestor)}p.treeAdapter.appendChild(commonAncestor,lastElement)}}__name(aaInsertLastNodeInCommonAncestor,\"aaInsertLastNodeInCommonAncestor\");function aaReplaceFormattingElement(p,furthestBlock,formattingElementEntry){const ns=p.treeAdapter.getNamespaceURI(formattingElementEntry.element);const{token}=formattingElementEntry;const newElement=p.treeAdapter.createElement(token.tagName,ns,token.attrs);p._adoptNodes(furthestBlock,newElement);p.treeAdapter.appendChild(furthestBlock,newElement);p.activeFormattingElements.insertElementAfterBookmark(newElement,token);p.activeFormattingElements.removeEntry(formattingElementEntry);p.openElements.remove(formattingElementEntry.element);p.openElements.insertAfter(furthestBlock,newElement,token.tagID)}__name(aaReplaceFormattingElement,\"aaReplaceFormattingElement\");function callAdoptionAgency(p,token){for(let i=0;i<AA_OUTER_LOOP_ITER;i++){const formattingElementEntry=aaObtainFormattingElementEntry(p,token);if(!formattingElementEntry){break}const furthestBlock=aaObtainFurthestBlock(p,formattingElementEntry);if(!furthestBlock){break}p.activeFormattingElements.bookmark=formattingElementEntry;const lastElement=aaInnerLoop(p,furthestBlock,formattingElementEntry.element);const commonAncestor=p.openElements.getCommonAncestor(formattingElementEntry.element);p.treeAdapter.detachNode(lastElement);if(commonAncestor)aaInsertLastNodeInCommonAncestor(p,commonAncestor,lastElement);aaReplaceFormattingElement(p,furthestBlock,formattingElementEntry)}}__name(callAdoptionAgency,\"callAdoptionAgency\");function appendComment(p,token){p._appendCommentNode(token,p.openElements.currentTmplContentOrNode)}__name(appendComment,\"appendComment\");function appendCommentToRootHtmlElement(p,token){p._appendCommentNode(token,p.openElements.items[0])}__name(appendCommentToRootHtmlElement,\"appendCommentToRootHtmlElement\");function appendCommentToDocument(p,token){p._appendCommentNode(token,p.document)}__name(appendCommentToDocument,\"appendCommentToDocument\");function stopParsing(p,token){p.stopped=true;if(token.location){const target=p.fragmentContext?0:2;for(let i=p.openElements.stackTop;i>=target;i--){p._setEndLocation(p.openElements.items[i],token)}if(!p.fragmentContext&&p.openElements.stackTop>=0){const htmlElement=p.openElements.items[0];const htmlLocation=p.treeAdapter.getNodeSourceCodeLocation(htmlElement);if(htmlLocation&&!htmlLocation.endTag){p._setEndLocation(htmlElement,token);if(p.openElements.stackTop>=1){const bodyElement=p.openElements.items[1];const bodyLocation=p.treeAdapter.getNodeSourceCodeLocation(bodyElement);if(bodyLocation&&!bodyLocation.endTag){p._setEndLocation(bodyElement,token)}}}}}}__name(stopParsing,\"stopParsing\");function doctypeInInitialMode(p,token){p._setDocumentType(token);const mode=token.forceQuirks?html_js_1.DOCUMENT_MODE.QUIRKS:doctype.getDocumentMode(token);if(!doctype.isConforming(token)){p._err(token,error_codes_js_1.ERR.nonConformingDoctype)}p.treeAdapter.setDocumentMode(p.document,mode);p.insertionMode=InsertionMode.BEFORE_HTML}__name(doctypeInInitialMode,\"doctypeInInitialMode\");function tokenInInitialMode(p,token){p._err(token,error_codes_js_1.ERR.missingDoctype,true);p.treeAdapter.setDocumentMode(p.document,html_js_1.DOCUMENT_MODE.QUIRKS);p.insertionMode=InsertionMode.BEFORE_HTML;p._processToken(token)}__name(tokenInInitialMode,\"tokenInInitialMode\");function startTagBeforeHtml(p,token){if(token.tagID===html_js_1.TAG_ID.HTML){p._insertElement(token,html_js_1.NS.HTML);p.insertionMode=InsertionMode.BEFORE_HEAD}else{tokenBeforeHtml(p,token)}}__name(startTagBeforeHtml,\"startTagBeforeHtml\");function endTagBeforeHtml(p,token){const tn=token.tagID;if(tn===html_js_1.TAG_ID.HTML||tn===html_js_1.TAG_ID.HEAD||tn===html_js_1.TAG_ID.BODY||tn===html_js_1.TAG_ID.BR){tokenBeforeHtml(p,token)}}__name(endTagBeforeHtml,\"endTagBeforeHtml\");function tokenBeforeHtml(p,token){p._insertFakeRootElement();p.insertionMode=InsertionMode.BEFORE_HEAD;p._processToken(token)}__name(tokenBeforeHtml,\"tokenBeforeHtml\");function startTagBeforeHead(p,token){switch(token.tagID){case html_js_1.TAG_ID.HTML:{startTagInBody(p,token);break}case html_js_1.TAG_ID.HEAD:{p._insertElement(token,html_js_1.NS.HTML);p.headElement=p.openElements.current;p.insertionMode=InsertionMode.IN_HEAD;break}default:{tokenBeforeHead(p,token)}}}__name(startTagBeforeHead,\"startTagBeforeHead\");function endTagBeforeHead(p,token){const tn=token.tagID;if(tn===html_js_1.TAG_ID.HEAD||tn===html_js_1.TAG_ID.BODY||tn===html_js_1.TAG_ID.HTML||tn===html_js_1.TAG_ID.BR){tokenBeforeHead(p,token)}else{p._err(token,error_codes_js_1.ERR.endTagWithoutMatchingOpenElement)}}__name(endTagBeforeHead,\"endTagBeforeHead\");function tokenBeforeHead(p,token){p._insertFakeElement(html_js_1.TAG_NAMES.HEAD,html_js_1.TAG_ID.HEAD);p.headElement=p.openElements.current;p.insertionMode=InsertionMode.IN_HEAD;p._processToken(token)}__name(tokenBeforeHead,\"tokenBeforeHead\");function startTagInHead(p,token){switch(token.tagID){case html_js_1.TAG_ID.HTML:{startTagInBody(p,token);break}case html_js_1.TAG_ID.BASE:case html_js_1.TAG_ID.BASEFONT:case html_js_1.TAG_ID.BGSOUND:case html_js_1.TAG_ID.LINK:case html_js_1.TAG_ID.META:{p._appendElement(token,html_js_1.NS.HTML);token.ackSelfClosing=true;break}case html_js_1.TAG_ID.TITLE:{p._switchToTextParsing(token,index_js_1.TokenizerMode.RCDATA);break}case html_js_1.TAG_ID.NOSCRIPT:{if(p.options.scriptingEnabled){p._switchToTextParsing(token,index_js_1.TokenizerMode.RAWTEXT)}else{p._insertElement(token,html_js_1.NS.HTML);p.insertionMode=InsertionMode.IN_HEAD_NO_SCRIPT}break}case html_js_1.TAG_ID.NOFRAMES:case html_js_1.TAG_ID.STYLE:{p._switchToTextParsing(token,index_js_1.TokenizerMode.RAWTEXT);break}case html_js_1.TAG_ID.SCRIPT:{p._switchToTextParsing(token,index_js_1.TokenizerMode.SCRIPT_DATA);break}case html_js_1.TAG_ID.TEMPLATE:{p._insertTemplate(token);p.activeFormattingElements.insertMarker();p.framesetOk=false;p.insertionMode=InsertionMode.IN_TEMPLATE;p.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE);break}case html_js_1.TAG_ID.HEAD:{p._err(token,error_codes_js_1.ERR.misplacedStartTagForHeadElement);break}default:{tokenInHead(p,token)}}}__name(startTagInHead,\"startTagInHead\");function endTagInHead(p,token){switch(token.tagID){case html_js_1.TAG_ID.HEAD:{p.openElements.pop();p.insertionMode=InsertionMode.AFTER_HEAD;break}case html_js_1.TAG_ID.BODY:case html_js_1.TAG_ID.BR:case html_js_1.TAG_ID.HTML:{tokenInHead(p,token);break}case html_js_1.TAG_ID.TEMPLATE:{templateEndTagInHead(p,token);break}default:{p._err(token,error_codes_js_1.ERR.endTagWithoutMatchingOpenElement)}}}__name(endTagInHead,\"endTagInHead\");function templateEndTagInHead(p,token){if(p.openElements.tmplCount>0){p.openElements.generateImpliedEndTagsThoroughly();if(p.openElements.currentTagId!==html_js_1.TAG_ID.TEMPLATE){p._err(token,error_codes_js_1.ERR.closingOfElementWithOpenChildElements)}p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.TEMPLATE);p.activeFormattingElements.clearToLastMarker();p.tmplInsertionModeStack.shift();p._resetInsertionMode()}else{p._err(token,error_codes_js_1.ERR.endTagWithoutMatchingOpenElement)}}__name(templateEndTagInHead,\"templateEndTagInHead\");function tokenInHead(p,token){p.openElements.pop();p.insertionMode=InsertionMode.AFTER_HEAD;p._processToken(token)}__name(tokenInHead,\"tokenInHead\");function startTagInHeadNoScript(p,token){switch(token.tagID){case html_js_1.TAG_ID.HTML:{startTagInBody(p,token);break}case html_js_1.TAG_ID.BASEFONT:case html_js_1.TAG_ID.BGSOUND:case html_js_1.TAG_ID.HEAD:case html_js_1.TAG_ID.LINK:case html_js_1.TAG_ID.META:case html_js_1.TAG_ID.NOFRAMES:case html_js_1.TAG_ID.STYLE:{startTagInHead(p,token);break}case html_js_1.TAG_ID.NOSCRIPT:{p._err(token,error_codes_js_1.ERR.nestedNoscriptInHead);break}default:{tokenInHeadNoScript(p,token)}}}__name(startTagInHeadNoScript,\"startTagInHeadNoScript\");function endTagInHeadNoScript(p,token){switch(token.tagID){case html_js_1.TAG_ID.NOSCRIPT:{p.openElements.pop();p.insertionMode=InsertionMode.IN_HEAD;break}case html_js_1.TAG_ID.BR:{tokenInHeadNoScript(p,token);break}default:{p._err(token,error_codes_js_1.ERR.endTagWithoutMatchingOpenElement)}}}__name(endTagInHeadNoScript,\"endTagInHeadNoScript\");function tokenInHeadNoScript(p,token){const errCode=token.type===token_js_1.TokenType.EOF?error_codes_js_1.ERR.openElementsLeftAfterEof:error_codes_js_1.ERR.disallowedContentInNoscriptInHead;p._err(token,errCode);p.openElements.pop();p.insertionMode=InsertionMode.IN_HEAD;p._processToken(token)}__name(tokenInHeadNoScript,\"tokenInHeadNoScript\");function startTagAfterHead(p,token){switch(token.tagID){case html_js_1.TAG_ID.HTML:{startTagInBody(p,token);break}case html_js_1.TAG_ID.BODY:{p._insertElement(token,html_js_1.NS.HTML);p.framesetOk=false;p.insertionMode=InsertionMode.IN_BODY;break}case html_js_1.TAG_ID.FRAMESET:{p._insertElement(token,html_js_1.NS.HTML);p.insertionMode=InsertionMode.IN_FRAMESET;break}case html_js_1.TAG_ID.BASE:case html_js_1.TAG_ID.BASEFONT:case html_js_1.TAG_ID.BGSOUND:case html_js_1.TAG_ID.LINK:case html_js_1.TAG_ID.META:case html_js_1.TAG_ID.NOFRAMES:case html_js_1.TAG_ID.SCRIPT:case html_js_1.TAG_ID.STYLE:case html_js_1.TAG_ID.TEMPLATE:case html_js_1.TAG_ID.TITLE:{p._err(token,error_codes_js_1.ERR.abandonedHeadElementChild);p.openElements.push(p.headElement,html_js_1.TAG_ID.HEAD);startTagInHead(p,token);p.openElements.remove(p.headElement);break}case html_js_1.TAG_ID.HEAD:{p._err(token,error_codes_js_1.ERR.misplacedStartTagForHeadElement);break}default:{tokenAfterHead(p,token)}}}__name(startTagAfterHead,\"startTagAfterHead\");function endTagAfterHead(p,token){switch(token.tagID){case html_js_1.TAG_ID.BODY:case html_js_1.TAG_ID.HTML:case html_js_1.TAG_ID.BR:{tokenAfterHead(p,token);break}case html_js_1.TAG_ID.TEMPLATE:{templateEndTagInHead(p,token);break}default:{p._err(token,error_codes_js_1.ERR.endTagWithoutMatchingOpenElement)}}}__name(endTagAfterHead,\"endTagAfterHead\");function tokenAfterHead(p,token){p._insertFakeElement(html_js_1.TAG_NAMES.BODY,html_js_1.TAG_ID.BODY);p.insertionMode=InsertionMode.IN_BODY;modeInBody(p,token)}__name(tokenAfterHead,\"tokenAfterHead\");function modeInBody(p,token){switch(token.type){case token_js_1.TokenType.CHARACTER:{characterInBody(p,token);break}case token_js_1.TokenType.WHITESPACE_CHARACTER:{whitespaceCharacterInBody(p,token);break}case token_js_1.TokenType.COMMENT:{appendComment(p,token);break}case token_js_1.TokenType.START_TAG:{startTagInBody(p,token);break}case token_js_1.TokenType.END_TAG:{endTagInBody(p,token);break}case token_js_1.TokenType.EOF:{eofInBody(p,token);break}default:}}__name(modeInBody,\"modeInBody\");function whitespaceCharacterInBody(p,token){p._reconstructActiveFormattingElements();p._insertCharacters(token)}__name(whitespaceCharacterInBody,\"whitespaceCharacterInBody\");function characterInBody(p,token){p._reconstructActiveFormattingElements();p._insertCharacters(token);p.framesetOk=false}__name(characterInBody,\"characterInBody\");function htmlStartTagInBody(p,token){if(p.openElements.tmplCount===0){p.treeAdapter.adoptAttributes(p.openElements.items[0],token.attrs)}}__name(htmlStartTagInBody,\"htmlStartTagInBody\");function bodyStartTagInBody(p,token){const bodyElement=p.openElements.tryPeekProperlyNestedBodyElement();if(bodyElement&&p.openElements.tmplCount===0){p.framesetOk=false;p.treeAdapter.adoptAttributes(bodyElement,token.attrs)}}__name(bodyStartTagInBody,\"bodyStartTagInBody\");function framesetStartTagInBody(p,token){const bodyElement=p.openElements.tryPeekProperlyNestedBodyElement();if(p.framesetOk&&bodyElement){p.treeAdapter.detachNode(bodyElement);p.openElements.popAllUpToHtmlElement();p._insertElement(token,html_js_1.NS.HTML);p.insertionMode=InsertionMode.IN_FRAMESET}}__name(framesetStartTagInBody,\"framesetStartTagInBody\");function addressStartTagInBody(p,token){if(p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)){p._closePElement()}p._insertElement(token,html_js_1.NS.HTML)}__name(addressStartTagInBody,\"addressStartTagInBody\");function numberedHeaderStartTagInBody(p,token){if(p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)){p._closePElement()}if((0,html_js_1.isNumberedHeader)(p.openElements.currentTagId)){p.openElements.pop()}p._insertElement(token,html_js_1.NS.HTML)}__name(numberedHeaderStartTagInBody,\"numberedHeaderStartTagInBody\");function preStartTagInBody(p,token){if(p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)){p._closePElement()}p._insertElement(token,html_js_1.NS.HTML);p.skipNextNewLine=true;p.framesetOk=false}__name(preStartTagInBody,\"preStartTagInBody\");function formStartTagInBody(p,token){const inTemplate=p.openElements.tmplCount>0;if(!p.formElement||inTemplate){if(p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)){p._closePElement()}p._insertElement(token,html_js_1.NS.HTML);if(!inTemplate){p.formElement=p.openElements.current}}}__name(formStartTagInBody,\"formStartTagInBody\");function listItemStartTagInBody(p,token){p.framesetOk=false;const tn=token.tagID;for(let i=p.openElements.stackTop;i>=0;i--){const elementId=p.openElements.tagIDs[i];if(tn===html_js_1.TAG_ID.LI&&elementId===html_js_1.TAG_ID.LI||(tn===html_js_1.TAG_ID.DD||tn===html_js_1.TAG_ID.DT)&&(elementId===html_js_1.TAG_ID.DD||elementId===html_js_1.TAG_ID.DT)){p.openElements.generateImpliedEndTagsWithExclusion(elementId);p.openElements.popUntilTagNamePopped(elementId);break}if(elementId!==html_js_1.TAG_ID.ADDRESS&&elementId!==html_js_1.TAG_ID.DIV&&elementId!==html_js_1.TAG_ID.P&&p._isSpecialElement(p.openElements.items[i],elementId)){break}}if(p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)){p._closePElement()}p._insertElement(token,html_js_1.NS.HTML)}__name(listItemStartTagInBody,\"listItemStartTagInBody\");function plaintextStartTagInBody(p,token){if(p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)){p._closePElement()}p._insertElement(token,html_js_1.NS.HTML);p.tokenizer.state=index_js_1.TokenizerMode.PLAINTEXT}__name(plaintextStartTagInBody,\"plaintextStartTagInBody\");function buttonStartTagInBody(p,token){if(p.openElements.hasInScope(html_js_1.TAG_ID.BUTTON)){p.openElements.generateImpliedEndTags();p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.BUTTON)}p._reconstructActiveFormattingElements();p._insertElement(token,html_js_1.NS.HTML);p.framesetOk=false}__name(buttonStartTagInBody,\"buttonStartTagInBody\");function aStartTagInBody(p,token){const activeElementEntry=p.activeFormattingElements.getElementEntryInScopeWithTagName(html_js_1.TAG_NAMES.A);if(activeElementEntry){callAdoptionAgency(p,token);p.openElements.remove(activeElementEntry.element);p.activeFormattingElements.removeEntry(activeElementEntry)}p._reconstructActiveFormattingElements();p._insertElement(token,html_js_1.NS.HTML);p.activeFormattingElements.pushElement(p.openElements.current,token)}__name(aStartTagInBody,\"aStartTagInBody\");function bStartTagInBody(p,token){p._reconstructActiveFormattingElements();p._insertElement(token,html_js_1.NS.HTML);p.activeFormattingElements.pushElement(p.openElements.current,token)}__name(bStartTagInBody,\"bStartTagInBody\");function nobrStartTagInBody(p,token){p._reconstructActiveFormattingElements();if(p.openElements.hasInScope(html_js_1.TAG_ID.NOBR)){callAdoptionAgency(p,token);p._reconstructActiveFormattingElements()}p._insertElement(token,html_js_1.NS.HTML);p.activeFormattingElements.pushElement(p.openElements.current,token)}__name(nobrStartTagInBody,\"nobrStartTagInBody\");function appletStartTagInBody(p,token){p._reconstructActiveFormattingElements();p._insertElement(token,html_js_1.NS.HTML);p.activeFormattingElements.insertMarker();p.framesetOk=false}__name(appletStartTagInBody,\"appletStartTagInBody\");function tableStartTagInBody(p,token){if(p.treeAdapter.getDocumentMode(p.document)!==html_js_1.DOCUMENT_MODE.QUIRKS&&p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)){p._closePElement()}p._insertElement(token,html_js_1.NS.HTML);p.framesetOk=false;p.insertionMode=InsertionMode.IN_TABLE}__name(tableStartTagInBody,\"tableStartTagInBody\");function areaStartTagInBody(p,token){p._reconstructActiveFormattingElements();p._appendElement(token,html_js_1.NS.HTML);p.framesetOk=false;token.ackSelfClosing=true}__name(areaStartTagInBody,\"areaStartTagInBody\");function isHiddenInput(token){const inputType=(0,token_js_1.getTokenAttr)(token,html_js_1.ATTRS.TYPE);return inputType!=null&&inputType.toLowerCase()===HIDDEN_INPUT_TYPE}__name(isHiddenInput,\"isHiddenInput\");function inputStartTagInBody(p,token){p._reconstructActiveFormattingElements();p._appendElement(token,html_js_1.NS.HTML);if(!isHiddenInput(token)){p.framesetOk=false}token.ackSelfClosing=true}__name(inputStartTagInBody,\"inputStartTagInBody\");function paramStartTagInBody(p,token){p._appendElement(token,html_js_1.NS.HTML);token.ackSelfClosing=true}__name(paramStartTagInBody,\"paramStartTagInBody\");function hrStartTagInBody(p,token){if(p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)){p._closePElement()}p._appendElement(token,html_js_1.NS.HTML);p.framesetOk=false;token.ackSelfClosing=true}__name(hrStartTagInBody,\"hrStartTagInBody\");function imageStartTagInBody(p,token){token.tagName=html_js_1.TAG_NAMES.IMG;token.tagID=html_js_1.TAG_ID.IMG;areaStartTagInBody(p,token)}__name(imageStartTagInBody,\"imageStartTagInBody\");function textareaStartTagInBody(p,token){p._insertElement(token,html_js_1.NS.HTML);p.skipNextNewLine=true;p.tokenizer.state=index_js_1.TokenizerMode.RCDATA;p.originalInsertionMode=p.insertionMode;p.framesetOk=false;p.insertionMode=InsertionMode.TEXT}__name(textareaStartTagInBody,\"textareaStartTagInBody\");function xmpStartTagInBody(p,token){if(p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)){p._closePElement()}p._reconstructActiveFormattingElements();p.framesetOk=false;p._switchToTextParsing(token,index_js_1.TokenizerMode.RAWTEXT)}__name(xmpStartTagInBody,\"xmpStartTagInBody\");function iframeStartTagInBody(p,token){p.framesetOk=false;p._switchToTextParsing(token,index_js_1.TokenizerMode.RAWTEXT)}__name(iframeStartTagInBody,\"iframeStartTagInBody\");function noembedStartTagInBody(p,token){p._switchToTextParsing(token,index_js_1.TokenizerMode.RAWTEXT)}__name(noembedStartTagInBody,\"noembedStartTagInBody\");function selectStartTagInBody(p,token){p._reconstructActiveFormattingElements();p._insertElement(token,html_js_1.NS.HTML);p.framesetOk=false;p.insertionMode=p.insertionMode===InsertionMode.IN_TABLE||p.insertionMode===InsertionMode.IN_CAPTION||p.insertionMode===InsertionMode.IN_TABLE_BODY||p.insertionMode===InsertionMode.IN_ROW||p.insertionMode===InsertionMode.IN_CELL?InsertionMode.IN_SELECT_IN_TABLE:InsertionMode.IN_SELECT}__name(selectStartTagInBody,\"selectStartTagInBody\");function optgroupStartTagInBody(p,token){if(p.openElements.currentTagId===html_js_1.TAG_ID.OPTION){p.openElements.pop()}p._reconstructActiveFormattingElements();p._insertElement(token,html_js_1.NS.HTML)}__name(optgroupStartTagInBody,\"optgroupStartTagInBody\");function rbStartTagInBody(p,token){if(p.openElements.hasInScope(html_js_1.TAG_ID.RUBY)){p.openElements.generateImpliedEndTags()}p._insertElement(token,html_js_1.NS.HTML)}__name(rbStartTagInBody,\"rbStartTagInBody\");function rtStartTagInBody(p,token){if(p.openElements.hasInScope(html_js_1.TAG_ID.RUBY)){p.openElements.generateImpliedEndTagsWithExclusion(html_js_1.TAG_ID.RTC)}p._insertElement(token,html_js_1.NS.HTML)}__name(rtStartTagInBody,\"rtStartTagInBody\");function mathStartTagInBody(p,token){p._reconstructActiveFormattingElements();foreignContent.adjustTokenMathMLAttrs(token);foreignContent.adjustTokenXMLAttrs(token);if(token.selfClosing){p._appendElement(token,html_js_1.NS.MATHML)}else{p._insertElement(token,html_js_1.NS.MATHML)}token.ackSelfClosing=true}__name(mathStartTagInBody,\"mathStartTagInBody\");function svgStartTagInBody(p,token){p._reconstructActiveFormattingElements();foreignContent.adjustTokenSVGAttrs(token);foreignContent.adjustTokenXMLAttrs(token);if(token.selfClosing){p._appendElement(token,html_js_1.NS.SVG)}else{p._insertElement(token,html_js_1.NS.SVG)}token.ackSelfClosing=true}__name(svgStartTagInBody,\"svgStartTagInBody\");function genericStartTagInBody(p,token){p._reconstructActiveFormattingElements();p._insertElement(token,html_js_1.NS.HTML)}__name(genericStartTagInBody,\"genericStartTagInBody\");function startTagInBody(p,token){switch(token.tagID){case html_js_1.TAG_ID.I:case html_js_1.TAG_ID.S:case html_js_1.TAG_ID.B:case html_js_1.TAG_ID.U:case html_js_1.TAG_ID.EM:case html_js_1.TAG_ID.TT:case html_js_1.TAG_ID.BIG:case html_js_1.TAG_ID.CODE:case html_js_1.TAG_ID.FONT:case html_js_1.TAG_ID.SMALL:case html_js_1.TAG_ID.STRIKE:case html_js_1.TAG_ID.STRONG:{bStartTagInBody(p,token);break}case html_js_1.TAG_ID.A:{aStartTagInBody(p,token);break}case html_js_1.TAG_ID.H1:case html_js_1.TAG_ID.H2:case html_js_1.TAG_ID.H3:case html_js_1.TAG_ID.H4:case html_js_1.TAG_ID.H5:case html_js_1.TAG_ID.H6:{numberedHeaderStartTagInBody(p,token);break}case html_js_1.TAG_ID.P:case html_js_1.TAG_ID.DL:case html_js_1.TAG_ID.OL:case html_js_1.TAG_ID.UL:case html_js_1.TAG_ID.DIV:case html_js_1.TAG_ID.DIR:case html_js_1.TAG_ID.NAV:case html_js_1.TAG_ID.MAIN:case html_js_1.TAG_ID.MENU:case html_js_1.TAG_ID.ASIDE:case html_js_1.TAG_ID.CENTER:case html_js_1.TAG_ID.FIGURE:case html_js_1.TAG_ID.FOOTER:case html_js_1.TAG_ID.HEADER:case html_js_1.TAG_ID.HGROUP:case html_js_1.TAG_ID.DIALOG:case html_js_1.TAG_ID.DETAILS:case html_js_1.TAG_ID.ADDRESS:case html_js_1.TAG_ID.ARTICLE:case html_js_1.TAG_ID.SECTION:case html_js_1.TAG_ID.SUMMARY:case html_js_1.TAG_ID.FIELDSET:case html_js_1.TAG_ID.BLOCKQUOTE:case html_js_1.TAG_ID.FIGCAPTION:{addressStartTagInBody(p,token);break}case html_js_1.TAG_ID.LI:case html_js_1.TAG_ID.DD:case html_js_1.TAG_ID.DT:{listItemStartTagInBody(p,token);break}case html_js_1.TAG_ID.BR:case html_js_1.TAG_ID.IMG:case html_js_1.TAG_ID.WBR:case html_js_1.TAG_ID.AREA:case html_js_1.TAG_ID.EMBED:case html_js_1.TAG_ID.KEYGEN:{areaStartTagInBody(p,token);break}case html_js_1.TAG_ID.HR:{hrStartTagInBody(p,token);break}case html_js_1.TAG_ID.RB:case html_js_1.TAG_ID.RTC:{rbStartTagInBody(p,token);break}case html_js_1.TAG_ID.RT:case html_js_1.TAG_ID.RP:{rtStartTagInBody(p,token);break}case html_js_1.TAG_ID.PRE:case html_js_1.TAG_ID.LISTING:{preStartTagInBody(p,token);break}case html_js_1.TAG_ID.XMP:{xmpStartTagInBody(p,token);break}case html_js_1.TAG_ID.SVG:{svgStartTagInBody(p,token);break}case html_js_1.TAG_ID.HTML:{htmlStartTagInBody(p,token);break}case html_js_1.TAG_ID.BASE:case html_js_1.TAG_ID.LINK:case html_js_1.TAG_ID.META:case html_js_1.TAG_ID.STYLE:case html_js_1.TAG_ID.TITLE:case html_js_1.TAG_ID.SCRIPT:case html_js_1.TAG_ID.BGSOUND:case html_js_1.TAG_ID.BASEFONT:case html_js_1.TAG_ID.TEMPLATE:{startTagInHead(p,token);break}case html_js_1.TAG_ID.BODY:{bodyStartTagInBody(p,token);break}case html_js_1.TAG_ID.FORM:{formStartTagInBody(p,token);break}case html_js_1.TAG_ID.NOBR:{nobrStartTagInBody(p,token);break}case html_js_1.TAG_ID.MATH:{mathStartTagInBody(p,token);break}case html_js_1.TAG_ID.TABLE:{tableStartTagInBody(p,token);break}case html_js_1.TAG_ID.INPUT:{inputStartTagInBody(p,token);break}case html_js_1.TAG_ID.PARAM:case html_js_1.TAG_ID.TRACK:case html_js_1.TAG_ID.SOURCE:{paramStartTagInBody(p,token);break}case html_js_1.TAG_ID.IMAGE:{imageStartTagInBody(p,token);break}case html_js_1.TAG_ID.BUTTON:{buttonStartTagInBody(p,token);break}case html_js_1.TAG_ID.APPLET:case html_js_1.TAG_ID.OBJECT:case html_js_1.TAG_ID.MARQUEE:{appletStartTagInBody(p,token);break}case html_js_1.TAG_ID.IFRAME:{iframeStartTagInBody(p,token);break}case html_js_1.TAG_ID.SELECT:{selectStartTagInBody(p,token);break}case html_js_1.TAG_ID.OPTION:case html_js_1.TAG_ID.OPTGROUP:{optgroupStartTagInBody(p,token);break}case html_js_1.TAG_ID.NOEMBED:{noembedStartTagInBody(p,token);break}case html_js_1.TAG_ID.FRAMESET:{framesetStartTagInBody(p,token);break}case html_js_1.TAG_ID.TEXTAREA:{textareaStartTagInBody(p,token);break}case html_js_1.TAG_ID.NOSCRIPT:{if(p.options.scriptingEnabled){noembedStartTagInBody(p,token)}else{genericStartTagInBody(p,token)}break}case html_js_1.TAG_ID.PLAINTEXT:{plaintextStartTagInBody(p,token);break}case html_js_1.TAG_ID.COL:case html_js_1.TAG_ID.TH:case html_js_1.TAG_ID.TD:case html_js_1.TAG_ID.TR:case html_js_1.TAG_ID.HEAD:case html_js_1.TAG_ID.FRAME:case html_js_1.TAG_ID.TBODY:case html_js_1.TAG_ID.TFOOT:case html_js_1.TAG_ID.THEAD:case html_js_1.TAG_ID.CAPTION:case html_js_1.TAG_ID.COLGROUP:{break}default:{genericStartTagInBody(p,token)}}}__name(startTagInBody,\"startTagInBody\");function bodyEndTagInBody(p,token){if(p.openElements.hasInScope(html_js_1.TAG_ID.BODY)){p.insertionMode=InsertionMode.AFTER_BODY;if(p.options.sourceCodeLocationInfo){const bodyElement=p.openElements.tryPeekProperlyNestedBodyElement();if(bodyElement){p._setEndLocation(bodyElement,token)}}}}__name(bodyEndTagInBody,\"bodyEndTagInBody\");function htmlEndTagInBody(p,token){if(p.openElements.hasInScope(html_js_1.TAG_ID.BODY)){p.insertionMode=InsertionMode.AFTER_BODY;endTagAfterBody(p,token)}}__name(htmlEndTagInBody,\"htmlEndTagInBody\");function addressEndTagInBody(p,token){const tn=token.tagID;if(p.openElements.hasInScope(tn)){p.openElements.generateImpliedEndTags();p.openElements.popUntilTagNamePopped(tn)}}__name(addressEndTagInBody,\"addressEndTagInBody\");function formEndTagInBody(p){const inTemplate=p.openElements.tmplCount>0;const{formElement}=p;if(!inTemplate){p.formElement=null}if((formElement||inTemplate)&&p.openElements.hasInScope(html_js_1.TAG_ID.FORM)){p.openElements.generateImpliedEndTags();if(inTemplate){p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.FORM)}else if(formElement){p.openElements.remove(formElement)}}}__name(formEndTagInBody,\"formEndTagInBody\");function pEndTagInBody(p){if(!p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)){p._insertFakeElement(html_js_1.TAG_NAMES.P,html_js_1.TAG_ID.P)}p._closePElement()}__name(pEndTagInBody,\"pEndTagInBody\");function liEndTagInBody(p){if(p.openElements.hasInListItemScope(html_js_1.TAG_ID.LI)){p.openElements.generateImpliedEndTagsWithExclusion(html_js_1.TAG_ID.LI);p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.LI)}}__name(liEndTagInBody,\"liEndTagInBody\");function ddEndTagInBody(p,token){const tn=token.tagID;if(p.openElements.hasInScope(tn)){p.openElements.generateImpliedEndTagsWithExclusion(tn);p.openElements.popUntilTagNamePopped(tn)}}__name(ddEndTagInBody,\"ddEndTagInBody\");function numberedHeaderEndTagInBody(p){if(p.openElements.hasNumberedHeaderInScope()){p.openElements.generateImpliedEndTags();p.openElements.popUntilNumberedHeaderPopped()}}__name(numberedHeaderEndTagInBody,\"numberedHeaderEndTagInBody\");function appletEndTagInBody(p,token){const tn=token.tagID;if(p.openElements.hasInScope(tn)){p.openElements.generateImpliedEndTags();p.openElements.popUntilTagNamePopped(tn);p.activeFormattingElements.clearToLastMarker()}}__name(appletEndTagInBody,\"appletEndTagInBody\");function brEndTagInBody(p){p._reconstructActiveFormattingElements();p._insertFakeElement(html_js_1.TAG_NAMES.BR,html_js_1.TAG_ID.BR);p.openElements.pop();p.framesetOk=false}__name(brEndTagInBody,\"brEndTagInBody\");function genericEndTagInBody(p,token){const tn=token.tagName;const tid=token.tagID;for(let i=p.openElements.stackTop;i>0;i--){const element=p.openElements.items[i];const elementId=p.openElements.tagIDs[i];if(tid===elementId&&(tid!==html_js_1.TAG_ID.UNKNOWN||p.treeAdapter.getTagName(element)===tn)){p.openElements.generateImpliedEndTagsWithExclusion(tid);if(p.openElements.stackTop>=i)p.openElements.shortenToLength(i);break}if(p._isSpecialElement(element,elementId)){break}}}__name(genericEndTagInBody,\"genericEndTagInBody\");function endTagInBody(p,token){switch(token.tagID){case html_js_1.TAG_ID.A:case html_js_1.TAG_ID.B:case html_js_1.TAG_ID.I:case html_js_1.TAG_ID.S:case html_js_1.TAG_ID.U:case html_js_1.TAG_ID.EM:case html_js_1.TAG_ID.TT:case html_js_1.TAG_ID.BIG:case html_js_1.TAG_ID.CODE:case html_js_1.TAG_ID.FONT:case html_js_1.TAG_ID.NOBR:case html_js_1.TAG_ID.SMALL:case html_js_1.TAG_ID.STRIKE:case html_js_1.TAG_ID.STRONG:{callAdoptionAgency(p,token);break}case html_js_1.TAG_ID.P:{pEndTagInBody(p);break}case html_js_1.TAG_ID.DL:case html_js_1.TAG_ID.UL:case html_js_1.TAG_ID.OL:case html_js_1.TAG_ID.DIR:case html_js_1.TAG_ID.DIV:case html_js_1.TAG_ID.NAV:case html_js_1.TAG_ID.PRE:case html_js_1.TAG_ID.MAIN:case html_js_1.TAG_ID.MENU:case html_js_1.TAG_ID.ASIDE:case html_js_1.TAG_ID.BUTTON:case html_js_1.TAG_ID.CENTER:case html_js_1.TAG_ID.FIGURE:case html_js_1.TAG_ID.FOOTER:case html_js_1.TAG_ID.HEADER:case html_js_1.TAG_ID.HGROUP:case html_js_1.TAG_ID.DIALOG:case html_js_1.TAG_ID.ADDRESS:case html_js_1.TAG_ID.ARTICLE:case html_js_1.TAG_ID.DETAILS:case html_js_1.TAG_ID.SECTION:case html_js_1.TAG_ID.SUMMARY:case html_js_1.TAG_ID.LISTING:case html_js_1.TAG_ID.FIELDSET:case html_js_1.TAG_ID.BLOCKQUOTE:case html_js_1.TAG_ID.FIGCAPTION:{addressEndTagInBody(p,token);break}case html_js_1.TAG_ID.LI:{liEndTagInBody(p);break}case html_js_1.TAG_ID.DD:case html_js_1.TAG_ID.DT:{ddEndTagInBody(p,token);break}case html_js_1.TAG_ID.H1:case html_js_1.TAG_ID.H2:case html_js_1.TAG_ID.H3:case html_js_1.TAG_ID.H4:case html_js_1.TAG_ID.H5:case html_js_1.TAG_ID.H6:{numberedHeaderEndTagInBody(p);break}case html_js_1.TAG_ID.BR:{brEndTagInBody(p);break}case html_js_1.TAG_ID.BODY:{bodyEndTagInBody(p,token);break}case html_js_1.TAG_ID.HTML:{htmlEndTagInBody(p,token);break}case html_js_1.TAG_ID.FORM:{formEndTagInBody(p);break}case html_js_1.TAG_ID.APPLET:case html_js_1.TAG_ID.OBJECT:case html_js_1.TAG_ID.MARQUEE:{appletEndTagInBody(p,token);break}case html_js_1.TAG_ID.TEMPLATE:{templateEndTagInHead(p,token);break}default:{genericEndTagInBody(p,token)}}}__name(endTagInBody,\"endTagInBody\");function eofInBody(p,token){if(p.tmplInsertionModeStack.length>0){eofInTemplate(p,token)}else{stopParsing(p,token)}}__name(eofInBody,\"eofInBody\");function endTagInText(p,token){var _a;if(token.tagID===html_js_1.TAG_ID.SCRIPT){(_a=p.scriptHandler)===null||_a===void 0?void 0:_a.call(p,p.openElements.current)}p.openElements.pop();p.insertionMode=p.originalInsertionMode}__name(endTagInText,\"endTagInText\");function eofInText(p,token){p._err(token,error_codes_js_1.ERR.eofInElementThatCanContainOnlyText);p.openElements.pop();p.insertionMode=p.originalInsertionMode;p.onEof(token)}__name(eofInText,\"eofInText\");function characterInTable(p,token){if(TABLE_STRUCTURE_TAGS.has(p.openElements.currentTagId)){p.pendingCharacterTokens.length=0;p.hasNonWhitespacePendingCharacterToken=false;p.originalInsertionMode=p.insertionMode;p.insertionMode=InsertionMode.IN_TABLE_TEXT;switch(token.type){case token_js_1.TokenType.CHARACTER:{characterInTableText(p,token);break}case token_js_1.TokenType.WHITESPACE_CHARACTER:{whitespaceCharacterInTableText(p,token);break}}}else{tokenInTable(p,token)}}__name(characterInTable,\"characterInTable\");function captionStartTagInTable(p,token){p.openElements.clearBackToTableContext();p.activeFormattingElements.insertMarker();p._insertElement(token,html_js_1.NS.HTML);p.insertionMode=InsertionMode.IN_CAPTION}__name(captionStartTagInTable,\"captionStartTagInTable\");function colgroupStartTagInTable(p,token){p.openElements.clearBackToTableContext();p._insertElement(token,html_js_1.NS.HTML);p.insertionMode=InsertionMode.IN_COLUMN_GROUP}__name(colgroupStartTagInTable,\"colgroupStartTagInTable\");function colStartTagInTable(p,token){p.openElements.clearBackToTableContext();p._insertFakeElement(html_js_1.TAG_NAMES.COLGROUP,html_js_1.TAG_ID.COLGROUP);p.insertionMode=InsertionMode.IN_COLUMN_GROUP;startTagInColumnGroup(p,token)}__name(colStartTagInTable,\"colStartTagInTable\");function tbodyStartTagInTable(p,token){p.openElements.clearBackToTableContext();p._insertElement(token,html_js_1.NS.HTML);p.insertionMode=InsertionMode.IN_TABLE_BODY}__name(tbodyStartTagInTable,\"tbodyStartTagInTable\");function tdStartTagInTable(p,token){p.openElements.clearBackToTableContext();p._insertFakeElement(html_js_1.TAG_NAMES.TBODY,html_js_1.TAG_ID.TBODY);p.insertionMode=InsertionMode.IN_TABLE_BODY;startTagInTableBody(p,token)}__name(tdStartTagInTable,\"tdStartTagInTable\");function tableStartTagInTable(p,token){if(p.openElements.hasInTableScope(html_js_1.TAG_ID.TABLE)){p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.TABLE);p._resetInsertionMode();p._processStartTag(token)}}__name(tableStartTagInTable,\"tableStartTagInTable\");function inputStartTagInTable(p,token){if(isHiddenInput(token)){p._appendElement(token,html_js_1.NS.HTML)}else{tokenInTable(p,token)}token.ackSelfClosing=true}__name(inputStartTagInTable,\"inputStartTagInTable\");function formStartTagInTable(p,token){if(!p.formElement&&p.openElements.tmplCount===0){p._insertElement(token,html_js_1.NS.HTML);p.formElement=p.openElements.current;p.openElements.pop()}}__name(formStartTagInTable,\"formStartTagInTable\");function startTagInTable(p,token){switch(token.tagID){case html_js_1.TAG_ID.TD:case html_js_1.TAG_ID.TH:case html_js_1.TAG_ID.TR:{tdStartTagInTable(p,token);break}case html_js_1.TAG_ID.STYLE:case html_js_1.TAG_ID.SCRIPT:case html_js_1.TAG_ID.TEMPLATE:{startTagInHead(p,token);break}case html_js_1.TAG_ID.COL:{colStartTagInTable(p,token);break}case html_js_1.TAG_ID.FORM:{formStartTagInTable(p,token);break}case html_js_1.TAG_ID.TABLE:{tableStartTagInTable(p,token);break}case html_js_1.TAG_ID.TBODY:case html_js_1.TAG_ID.TFOOT:case html_js_1.TAG_ID.THEAD:{tbodyStartTagInTable(p,token);break}case html_js_1.TAG_ID.INPUT:{inputStartTagInTable(p,token);break}case html_js_1.TAG_ID.CAPTION:{captionStartTagInTable(p,token);break}case html_js_1.TAG_ID.COLGROUP:{colgroupStartTagInTable(p,token);break}default:{tokenInTable(p,token)}}}__name(startTagInTable,\"startTagInTable\");function endTagInTable(p,token){switch(token.tagID){case html_js_1.TAG_ID.TABLE:{if(p.openElements.hasInTableScope(html_js_1.TAG_ID.TABLE)){p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.TABLE);p._resetInsertionMode()}break}case html_js_1.TAG_ID.TEMPLATE:{templateEndTagInHead(p,token);break}case html_js_1.TAG_ID.BODY:case html_js_1.TAG_ID.CAPTION:case html_js_1.TAG_ID.COL:case html_js_1.TAG_ID.COLGROUP:case html_js_1.TAG_ID.HTML:case html_js_1.TAG_ID.TBODY:case html_js_1.TAG_ID.TD:case html_js_1.TAG_ID.TFOOT:case html_js_1.TAG_ID.TH:case html_js_1.TAG_ID.THEAD:case html_js_1.TAG_ID.TR:{break}default:{tokenInTable(p,token)}}}__name(endTagInTable,\"endTagInTable\");function tokenInTable(p,token){const savedFosterParentingState=p.fosterParentingEnabled;p.fosterParentingEnabled=true;modeInBody(p,token);p.fosterParentingEnabled=savedFosterParentingState}__name(tokenInTable,\"tokenInTable\");function whitespaceCharacterInTableText(p,token){p.pendingCharacterTokens.push(token)}__name(whitespaceCharacterInTableText,\"whitespaceCharacterInTableText\");function characterInTableText(p,token){p.pendingCharacterTokens.push(token);p.hasNonWhitespacePendingCharacterToken=true}__name(characterInTableText,\"characterInTableText\");function tokenInTableText(p,token){let i=0;if(p.hasNonWhitespacePendingCharacterToken){for(;i<p.pendingCharacterTokens.length;i++){tokenInTable(p,p.pendingCharacterTokens[i])}}else{for(;i<p.pendingCharacterTokens.length;i++){p._insertCharacters(p.pendingCharacterTokens[i])}}p.insertionMode=p.originalInsertionMode;p._processToken(token)}__name(tokenInTableText,\"tokenInTableText\");const TABLE_VOID_ELEMENTS=new Set([html_js_1.TAG_ID.CAPTION,html_js_1.TAG_ID.COL,html_js_1.TAG_ID.COLGROUP,html_js_1.TAG_ID.TBODY,html_js_1.TAG_ID.TD,html_js_1.TAG_ID.TFOOT,html_js_1.TAG_ID.TH,html_js_1.TAG_ID.THEAD,html_js_1.TAG_ID.TR]);function startTagInCaption(p,token){const tn=token.tagID;if(TABLE_VOID_ELEMENTS.has(tn)){if(p.openElements.hasInTableScope(html_js_1.TAG_ID.CAPTION)){p.openElements.generateImpliedEndTags();p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.CAPTION);p.activeFormattingElements.clearToLastMarker();p.insertionMode=InsertionMode.IN_TABLE;startTagInTable(p,token)}}else{startTagInBody(p,token)}}__name(startTagInCaption,\"startTagInCaption\");function endTagInCaption(p,token){const tn=token.tagID;switch(tn){case html_js_1.TAG_ID.CAPTION:case html_js_1.TAG_ID.TABLE:{if(p.openElements.hasInTableScope(html_js_1.TAG_ID.CAPTION)){p.openElements.generateImpliedEndTags();p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.CAPTION);p.activeFormattingElements.clearToLastMarker();p.insertionMode=InsertionMode.IN_TABLE;if(tn===html_js_1.TAG_ID.TABLE){endTagInTable(p,token)}}break}case html_js_1.TAG_ID.BODY:case html_js_1.TAG_ID.COL:case html_js_1.TAG_ID.COLGROUP:case html_js_1.TAG_ID.HTML:case html_js_1.TAG_ID.TBODY:case html_js_1.TAG_ID.TD:case html_js_1.TAG_ID.TFOOT:case html_js_1.TAG_ID.TH:case html_js_1.TAG_ID.THEAD:case html_js_1.TAG_ID.TR:{break}default:{endTagInBody(p,token)}}}__name(endTagInCaption,\"endTagInCaption\");function startTagInColumnGroup(p,token){switch(token.tagID){case html_js_1.TAG_ID.HTML:{startTagInBody(p,token);break}case html_js_1.TAG_ID.COL:{p._appendElement(token,html_js_1.NS.HTML);token.ackSelfClosing=true;break}case html_js_1.TAG_ID.TEMPLATE:{startTagInHead(p,token);break}default:{tokenInColumnGroup(p,token)}}}__name(startTagInColumnGroup,\"startTagInColumnGroup\");function endTagInColumnGroup(p,token){switch(token.tagID){case html_js_1.TAG_ID.COLGROUP:{if(p.openElements.currentTagId===html_js_1.TAG_ID.COLGROUP){p.openElements.pop();p.insertionMode=InsertionMode.IN_TABLE}break}case html_js_1.TAG_ID.TEMPLATE:{templateEndTagInHead(p,token);break}case html_js_1.TAG_ID.COL:{break}default:{tokenInColumnGroup(p,token)}}}__name(endTagInColumnGroup,\"endTagInColumnGroup\");function tokenInColumnGroup(p,token){if(p.openElements.currentTagId===html_js_1.TAG_ID.COLGROUP){p.openElements.pop();p.insertionMode=InsertionMode.IN_TABLE;p._processToken(token)}}__name(tokenInColumnGroup,\"tokenInColumnGroup\");function startTagInTableBody(p,token){switch(token.tagID){case html_js_1.TAG_ID.TR:{p.openElements.clearBackToTableBodyContext();p._insertElement(token,html_js_1.NS.HTML);p.insertionMode=InsertionMode.IN_ROW;break}case html_js_1.TAG_ID.TH:case html_js_1.TAG_ID.TD:{p.openElements.clearBackToTableBodyContext();p._insertFakeElement(html_js_1.TAG_NAMES.TR,html_js_1.TAG_ID.TR);p.insertionMode=InsertionMode.IN_ROW;startTagInRow(p,token);break}case html_js_1.TAG_ID.CAPTION:case html_js_1.TAG_ID.COL:case html_js_1.TAG_ID.COLGROUP:case html_js_1.TAG_ID.TBODY:case html_js_1.TAG_ID.TFOOT:case html_js_1.TAG_ID.THEAD:{if(p.openElements.hasTableBodyContextInTableScope()){p.openElements.clearBackToTableBodyContext();p.openElements.pop();p.insertionMode=InsertionMode.IN_TABLE;startTagInTable(p,token)}break}default:{startTagInTable(p,token)}}}__name(startTagInTableBody,\"startTagInTableBody\");function endTagInTableBody(p,token){const tn=token.tagID;switch(token.tagID){case html_js_1.TAG_ID.TBODY:case html_js_1.TAG_ID.TFOOT:case html_js_1.TAG_ID.THEAD:{if(p.openElements.hasInTableScope(tn)){p.openElements.clearBackToTableBodyContext();p.openElements.pop();p.insertionMode=InsertionMode.IN_TABLE}break}case html_js_1.TAG_ID.TABLE:{if(p.openElements.hasTableBodyContextInTableScope()){p.openElements.clearBackToTableBodyContext();p.openElements.pop();p.insertionMode=InsertionMode.IN_TABLE;endTagInTable(p,token)}break}case html_js_1.TAG_ID.BODY:case html_js_1.TAG_ID.CAPTION:case html_js_1.TAG_ID.COL:case html_js_1.TAG_ID.COLGROUP:case html_js_1.TAG_ID.HTML:case html_js_1.TAG_ID.TD:case html_js_1.TAG_ID.TH:case html_js_1.TAG_ID.TR:{break}default:{endTagInTable(p,token)}}}__name(endTagInTableBody,\"endTagInTableBody\");function startTagInRow(p,token){switch(token.tagID){case html_js_1.TAG_ID.TH:case html_js_1.TAG_ID.TD:{p.openElements.clearBackToTableRowContext();p._insertElement(token,html_js_1.NS.HTML);p.insertionMode=InsertionMode.IN_CELL;p.activeFormattingElements.insertMarker();break}case html_js_1.TAG_ID.CAPTION:case html_js_1.TAG_ID.COL:case html_js_1.TAG_ID.COLGROUP:case html_js_1.TAG_ID.TBODY:case html_js_1.TAG_ID.TFOOT:case html_js_1.TAG_ID.THEAD:case html_js_1.TAG_ID.TR:{if(p.openElements.hasInTableScope(html_js_1.TAG_ID.TR)){p.openElements.clearBackToTableRowContext();p.openElements.pop();p.insertionMode=InsertionMode.IN_TABLE_BODY;startTagInTableBody(p,token)}break}default:{startTagInTable(p,token)}}}__name(startTagInRow,\"startTagInRow\");function endTagInRow(p,token){switch(token.tagID){case html_js_1.TAG_ID.TR:{if(p.openElements.hasInTableScope(html_js_1.TAG_ID.TR)){p.openElements.clearBackToTableRowContext();p.openElements.pop();p.insertionMode=InsertionMode.IN_TABLE_BODY}break}case html_js_1.TAG_ID.TABLE:{if(p.openElements.hasInTableScope(html_js_1.TAG_ID.TR)){p.openElements.clearBackToTableRowContext();p.openElements.pop();p.insertionMode=InsertionMode.IN_TABLE_BODY;endTagInTableBody(p,token)}break}case html_js_1.TAG_ID.TBODY:case html_js_1.TAG_ID.TFOOT:case html_js_1.TAG_ID.THEAD:{if(p.openElements.hasInTableScope(token.tagID)||p.openElements.hasInTableScope(html_js_1.TAG_ID.TR)){p.openElements.clearBackToTableRowContext();p.openElements.pop();p.insertionMode=InsertionMode.IN_TABLE_BODY;endTagInTableBody(p,token)}break}case html_js_1.TAG_ID.BODY:case html_js_1.TAG_ID.CAPTION:case html_js_1.TAG_ID.COL:case html_js_1.TAG_ID.COLGROUP:case html_js_1.TAG_ID.HTML:case html_js_1.TAG_ID.TD:case html_js_1.TAG_ID.TH:{break}default:{endTagInTable(p,token)}}}__name(endTagInRow,\"endTagInRow\");function startTagInCell(p,token){const tn=token.tagID;if(TABLE_VOID_ELEMENTS.has(tn)){if(p.openElements.hasInTableScope(html_js_1.TAG_ID.TD)||p.openElements.hasInTableScope(html_js_1.TAG_ID.TH)){p._closeTableCell();startTagInRow(p,token)}}else{startTagInBody(p,token)}}__name(startTagInCell,\"startTagInCell\");function endTagInCell(p,token){const tn=token.tagID;switch(tn){case html_js_1.TAG_ID.TD:case html_js_1.TAG_ID.TH:{if(p.openElements.hasInTableScope(tn)){p.openElements.generateImpliedEndTags();p.openElements.popUntilTagNamePopped(tn);p.activeFormattingElements.clearToLastMarker();p.insertionMode=InsertionMode.IN_ROW}break}case html_js_1.TAG_ID.TABLE:case html_js_1.TAG_ID.TBODY:case html_js_1.TAG_ID.TFOOT:case html_js_1.TAG_ID.THEAD:case html_js_1.TAG_ID.TR:{if(p.openElements.hasInTableScope(tn)){p._closeTableCell();endTagInRow(p,token)}break}case html_js_1.TAG_ID.BODY:case html_js_1.TAG_ID.CAPTION:case html_js_1.TAG_ID.COL:case html_js_1.TAG_ID.COLGROUP:case html_js_1.TAG_ID.HTML:{break}default:{endTagInBody(p,token)}}}__name(endTagInCell,\"endTagInCell\");function startTagInSelect(p,token){switch(token.tagID){case html_js_1.TAG_ID.HTML:{startTagInBody(p,token);break}case html_js_1.TAG_ID.OPTION:{if(p.openElements.currentTagId===html_js_1.TAG_ID.OPTION){p.openElements.pop()}p._insertElement(token,html_js_1.NS.HTML);break}case html_js_1.TAG_ID.OPTGROUP:{if(p.openElements.currentTagId===html_js_1.TAG_ID.OPTION){p.openElements.pop()}if(p.openElements.currentTagId===html_js_1.TAG_ID.OPTGROUP){p.openElements.pop()}p._insertElement(token,html_js_1.NS.HTML);break}case html_js_1.TAG_ID.INPUT:case html_js_1.TAG_ID.KEYGEN:case html_js_1.TAG_ID.TEXTAREA:case html_js_1.TAG_ID.SELECT:{if(p.openElements.hasInSelectScope(html_js_1.TAG_ID.SELECT)){p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.SELECT);p._resetInsertionMode();if(token.tagID!==html_js_1.TAG_ID.SELECT){p._processStartTag(token)}}break}case html_js_1.TAG_ID.SCRIPT:case html_js_1.TAG_ID.TEMPLATE:{startTagInHead(p,token);break}default:}}__name(startTagInSelect,\"startTagInSelect\");function endTagInSelect(p,token){switch(token.tagID){case html_js_1.TAG_ID.OPTGROUP:{if(p.openElements.stackTop>0&&p.openElements.currentTagId===html_js_1.TAG_ID.OPTION&&p.openElements.tagIDs[p.openElements.stackTop-1]===html_js_1.TAG_ID.OPTGROUP){p.openElements.pop()}if(p.openElements.currentTagId===html_js_1.TAG_ID.OPTGROUP){p.openElements.pop()}break}case html_js_1.TAG_ID.OPTION:{if(p.openElements.currentTagId===html_js_1.TAG_ID.OPTION){p.openElements.pop()}break}case html_js_1.TAG_ID.SELECT:{if(p.openElements.hasInSelectScope(html_js_1.TAG_ID.SELECT)){p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.SELECT);p._resetInsertionMode()}break}case html_js_1.TAG_ID.TEMPLATE:{templateEndTagInHead(p,token);break}default:}}__name(endTagInSelect,\"endTagInSelect\");function startTagInSelectInTable(p,token){const tn=token.tagID;if(tn===html_js_1.TAG_ID.CAPTION||tn===html_js_1.TAG_ID.TABLE||tn===html_js_1.TAG_ID.TBODY||tn===html_js_1.TAG_ID.TFOOT||tn===html_js_1.TAG_ID.THEAD||tn===html_js_1.TAG_ID.TR||tn===html_js_1.TAG_ID.TD||tn===html_js_1.TAG_ID.TH){p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.SELECT);p._resetInsertionMode();p._processStartTag(token)}else{startTagInSelect(p,token)}}__name(startTagInSelectInTable,\"startTagInSelectInTable\");function endTagInSelectInTable(p,token){const tn=token.tagID;if(tn===html_js_1.TAG_ID.CAPTION||tn===html_js_1.TAG_ID.TABLE||tn===html_js_1.TAG_ID.TBODY||tn===html_js_1.TAG_ID.TFOOT||tn===html_js_1.TAG_ID.THEAD||tn===html_js_1.TAG_ID.TR||tn===html_js_1.TAG_ID.TD||tn===html_js_1.TAG_ID.TH){if(p.openElements.hasInTableScope(tn)){p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.SELECT);p._resetInsertionMode();p.onEndTag(token)}}else{endTagInSelect(p,token)}}__name(endTagInSelectInTable,\"endTagInSelectInTable\");function startTagInTemplate(p,token){switch(token.tagID){case html_js_1.TAG_ID.BASE:case html_js_1.TAG_ID.BASEFONT:case html_js_1.TAG_ID.BGSOUND:case html_js_1.TAG_ID.LINK:case html_js_1.TAG_ID.META:case html_js_1.TAG_ID.NOFRAMES:case html_js_1.TAG_ID.SCRIPT:case html_js_1.TAG_ID.STYLE:case html_js_1.TAG_ID.TEMPLATE:case html_js_1.TAG_ID.TITLE:{startTagInHead(p,token);break}case html_js_1.TAG_ID.CAPTION:case html_js_1.TAG_ID.COLGROUP:case html_js_1.TAG_ID.TBODY:case html_js_1.TAG_ID.TFOOT:case html_js_1.TAG_ID.THEAD:{p.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE;p.insertionMode=InsertionMode.IN_TABLE;startTagInTable(p,token);break}case html_js_1.TAG_ID.COL:{p.tmplInsertionModeStack[0]=InsertionMode.IN_COLUMN_GROUP;p.insertionMode=InsertionMode.IN_COLUMN_GROUP;startTagInColumnGroup(p,token);break}case html_js_1.TAG_ID.TR:{p.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE_BODY;p.insertionMode=InsertionMode.IN_TABLE_BODY;startTagInTableBody(p,token);break}case html_js_1.TAG_ID.TD:case html_js_1.TAG_ID.TH:{p.tmplInsertionModeStack[0]=InsertionMode.IN_ROW;p.insertionMode=InsertionMode.IN_ROW;startTagInRow(p,token);break}default:{p.tmplInsertionModeStack[0]=InsertionMode.IN_BODY;p.insertionMode=InsertionMode.IN_BODY;startTagInBody(p,token)}}}__name(startTagInTemplate,\"startTagInTemplate\");function endTagInTemplate(p,token){if(token.tagID===html_js_1.TAG_ID.TEMPLATE){templateEndTagInHead(p,token)}}__name(endTagInTemplate,\"endTagInTemplate\");function eofInTemplate(p,token){if(p.openElements.tmplCount>0){p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.TEMPLATE);p.activeFormattingElements.clearToLastMarker();p.tmplInsertionModeStack.shift();p._resetInsertionMode();p.onEof(token)}else{stopParsing(p,token)}}__name(eofInTemplate,\"eofInTemplate\");function startTagAfterBody(p,token){if(token.tagID===html_js_1.TAG_ID.HTML){startTagInBody(p,token)}else{tokenAfterBody(p,token)}}__name(startTagAfterBody,\"startTagAfterBody\");function endTagAfterBody(p,token){var _a;if(token.tagID===html_js_1.TAG_ID.HTML){if(!p.fragmentContext){p.insertionMode=InsertionMode.AFTER_AFTER_BODY}if(p.options.sourceCodeLocationInfo&&p.openElements.tagIDs[0]===html_js_1.TAG_ID.HTML){p._setEndLocation(p.openElements.items[0],token);const bodyElement=p.openElements.items[1];if(bodyElement&&!((_a=p.treeAdapter.getNodeSourceCodeLocation(bodyElement))===null||_a===void 0?void 0:_a.endTag)){p._setEndLocation(bodyElement,token)}}}else{tokenAfterBody(p,token)}}__name(endTagAfterBody,\"endTagAfterBody\");function tokenAfterBody(p,token){p.insertionMode=InsertionMode.IN_BODY;modeInBody(p,token)}__name(tokenAfterBody,\"tokenAfterBody\");function startTagInFrameset(p,token){switch(token.tagID){case html_js_1.TAG_ID.HTML:{startTagInBody(p,token);break}case html_js_1.TAG_ID.FRAMESET:{p._insertElement(token,html_js_1.NS.HTML);break}case html_js_1.TAG_ID.FRAME:{p._appendElement(token,html_js_1.NS.HTML);token.ackSelfClosing=true;break}case html_js_1.TAG_ID.NOFRAMES:{startTagInHead(p,token);break}default:}}__name(startTagInFrameset,\"startTagInFrameset\");function endTagInFrameset(p,token){if(token.tagID===html_js_1.TAG_ID.FRAMESET&&!p.openElements.isRootHtmlElementCurrent()){p.openElements.pop();if(!p.fragmentContext&&p.openElements.currentTagId!==html_js_1.TAG_ID.FRAMESET){p.insertionMode=InsertionMode.AFTER_FRAMESET}}}__name(endTagInFrameset,\"endTagInFrameset\");function startTagAfterFrameset(p,token){switch(token.tagID){case html_js_1.TAG_ID.HTML:{startTagInBody(p,token);break}case html_js_1.TAG_ID.NOFRAMES:{startTagInHead(p,token);break}default:}}__name(startTagAfterFrameset,\"startTagAfterFrameset\");function endTagAfterFrameset(p,token){if(token.tagID===html_js_1.TAG_ID.HTML){p.insertionMode=InsertionMode.AFTER_AFTER_FRAMESET}}__name(endTagAfterFrameset,\"endTagAfterFrameset\");function startTagAfterAfterBody(p,token){if(token.tagID===html_js_1.TAG_ID.HTML){startTagInBody(p,token)}else{tokenAfterAfterBody(p,token)}}__name(startTagAfterAfterBody,\"startTagAfterAfterBody\");function tokenAfterAfterBody(p,token){p.insertionMode=InsertionMode.IN_BODY;modeInBody(p,token)}__name(tokenAfterAfterBody,\"tokenAfterAfterBody\");function startTagAfterAfterFrameset(p,token){switch(token.tagID){case html_js_1.TAG_ID.HTML:{startTagInBody(p,token);break}case html_js_1.TAG_ID.NOFRAMES:{startTagInHead(p,token);break}default:}}__name(startTagAfterAfterFrameset,\"startTagAfterAfterFrameset\");function nullCharacterInForeignContent(p,token){token.chars=unicode.REPLACEMENT_CHARACTER;p._insertCharacters(token)}__name(nullCharacterInForeignContent,\"nullCharacterInForeignContent\");function characterInForeignContent(p,token){p._insertCharacters(token);p.framesetOk=false}__name(characterInForeignContent,\"characterInForeignContent\");function popUntilHtmlOrIntegrationPoint(p){while(p.treeAdapter.getNamespaceURI(p.openElements.current)!==html_js_1.NS.HTML&&!p._isIntegrationPoint(p.openElements.currentTagId,p.openElements.current)){p.openElements.pop()}}__name(popUntilHtmlOrIntegrationPoint,\"popUntilHtmlOrIntegrationPoint\");function startTagInForeignContent(p,token){if(foreignContent.causesExit(token)){popUntilHtmlOrIntegrationPoint(p);p._startTagOutsideForeignContent(token)}else{const current=p._getAdjustedCurrentElement();const currentNs=p.treeAdapter.getNamespaceURI(current);if(currentNs===html_js_1.NS.MATHML){foreignContent.adjustTokenMathMLAttrs(token)}else if(currentNs===html_js_1.NS.SVG){foreignContent.adjustTokenSVGTagName(token);foreignContent.adjustTokenSVGAttrs(token)}foreignContent.adjustTokenXMLAttrs(token);if(token.selfClosing){p._appendElement(token,currentNs)}else{p._insertElement(token,currentNs)}token.ackSelfClosing=true}}__name(startTagInForeignContent,\"startTagInForeignContent\");function endTagInForeignContent(p,token){if(token.tagID===html_js_1.TAG_ID.P||token.tagID===html_js_1.TAG_ID.BR){popUntilHtmlOrIntegrationPoint(p);p._endTagOutsideForeignContent(token);return}for(let i=p.openElements.stackTop;i>0;i--){const element=p.openElements.items[i];if(p.treeAdapter.getNamespaceURI(element)===html_js_1.NS.HTML){p._endTagOutsideForeignContent(token);break}const tagName=p.treeAdapter.getTagName(element);if(tagName.toLowerCase()===token.tagName){token.tagName=tagName;p.openElements.shortenToLength(i);break}}}__name(endTagInForeignContent,\"endTagInForeignContent\");\n})()\n","warnings":[],"map":{"version":3,"mappings":";+HACA,OAAO,eAAe,QAAS,aAAc,CAAE,MAAO,IAAK,CAAC,EAC5D,QAAQ,OAAS,OACjB,MAAM,WAAa,QAAQ,uBAAuB,EAClD,MAAM,wBAA0B,QAAQ,yBAAyB,EACjE,MAAM,6BAA+B,QAAQ,8BAA8B,EAC3E,MAAM,aAAe,QAAQ,6BAA6B,EAC1D,MAAM,QAAU,QAAQ,sBAAsB,EAC9C,MAAM,eAAiB,QAAQ,8BAA8B,EAC7D,MAAM,iBAAmB,QAAQ,0BAA0B,EAC3D,MAAM,QAAU,QAAQ,sBAAsB,EAC9C,MAAM,UAAY,QAAQ,mBAAmB,EAC7C,MAAM,WAAa,QAAQ,oBAAoB,EAE/C,MAAM,kBAAoB,SAE1B,MAAM,mBAAqB,EAC3B,MAAM,mBAAqB,EAE3B,IAAI,eACH,SAAUA,eAAe,CACtBA,eAAcA,eAAc,SAAS,EAAI,CAAC,EAAI,UAC9CA,eAAcA,eAAc,aAAa,EAAI,CAAC,EAAI,cAClDA,eAAcA,eAAc,aAAa,EAAI,CAAC,EAAI,cAClDA,eAAcA,eAAc,SAAS,EAAI,CAAC,EAAI,UAC9CA,eAAcA,eAAc,mBAAmB,EAAI,CAAC,EAAI,oBACxDA,eAAcA,eAAc,YAAY,EAAI,CAAC,EAAI,aACjDA,eAAcA,eAAc,SAAS,EAAI,CAAC,EAAI,UAC9CA,eAAcA,eAAc,MAAM,EAAI,CAAC,EAAI,OAC3CA,eAAcA,eAAc,UAAU,EAAI,CAAC,EAAI,WAC/CA,eAAcA,eAAc,eAAe,EAAI,CAAC,EAAI,gBACpDA,eAAcA,eAAc,YAAY,EAAI,EAAE,EAAI,aAClDA,eAAcA,eAAc,iBAAiB,EAAI,EAAE,EAAI,kBACvDA,eAAcA,eAAc,eAAe,EAAI,EAAE,EAAI,gBACrDA,eAAcA,eAAc,QAAQ,EAAI,EAAE,EAAI,SAC9CA,eAAcA,eAAc,SAAS,EAAI,EAAE,EAAI,UAC/CA,eAAcA,eAAc,WAAW,EAAI,EAAE,EAAI,YACjDA,eAAcA,eAAc,oBAAoB,EAAI,EAAE,EAAI,qBAC1DA,eAAcA,eAAc,aAAa,EAAI,EAAE,EAAI,cACnDA,eAAcA,eAAc,YAAY,EAAI,EAAE,EAAI,aAClDA,eAAcA,eAAc,aAAa,EAAI,EAAE,EAAI,cACnDA,eAAcA,eAAc,gBAAgB,EAAI,EAAE,EAAI,iBACtDA,eAAcA,eAAc,kBAAkB,EAAI,EAAE,EAAI,mBACxDA,eAAcA,eAAc,sBAAsB,EAAI,EAAE,EAAI,sBAChE,GAAG,gBAAkB,cAAgB,CAAC,EAAE,EACxC,MAAM,SAAW,CACb,UAAW,GACX,SAAU,GACV,YAAa,GACb,QAAS,GACT,OAAQ,GACR,UAAW,EACf,EACA,MAAM,qBAAuB,IAAI,IAAI,CAAC,UAAU,OAAO,MAAO,UAAU,OAAO,MAAO,UAAU,OAAO,MAAO,UAAU,OAAO,MAAO,UAAU,OAAO,EAAE,CAAC,EAC1J,MAAM,qBAAuB,CACzB,iBAAkB,KAClB,uBAAwB,MACxB,YAAa,aAAa,mBAC1B,aAAc,IAClB,EAEA,MAAM,MAAO,CA7Db,MA6Da,uBACT,YAAY,QAAS,SAAU,gBAAkB,KAAM,cAAgB,KAAM,CACzE,KAAK,gBAAkB,gBACvB,KAAK,cAAgB,cACrB,KAAK,aAAe,KACpB,KAAK,QAAU,MACf,KAAK,cAAgB,cAAc,QACnC,KAAK,sBAAwB,cAAc,QAC3C,KAAK,YAAc,KACnB,KAAK,YAAc,KAEnB,KAAK,iBAAmB,MAKxB,KAAK,uBAAyB,CAAC,EAC/B,KAAK,uBAAyB,CAAC,EAC/B,KAAK,sCAAwC,MAC7C,KAAK,WAAa,KAClB,KAAK,gBAAkB,MACvB,KAAK,uBAAyB,MAC9B,KAAK,QAAU,OAAO,OAAO,OAAO,OAAO,CAAC,EAAG,oBAAoB,EAAG,OAAO,EAC7E,KAAK,YAAc,KAAK,QAAQ,YAChC,KAAK,aAAe,KAAK,QAAQ,aAEjC,GAAI,KAAK,aAAc,CACnB,KAAK,QAAQ,uBAAyB,IAC1C,CACA,KAAK,SAAW,WAAa,MAAQ,WAAa,OAAS,SAAW,KAAK,YAAY,eAAe,EACtG,KAAK,UAAY,IAAI,WAAW,UAAU,KAAK,QAAS,IAAI,EAC5D,KAAK,yBAA2B,IAAI,6BAA6B,sBAAsB,KAAK,WAAW,EACvG,KAAK,kBAAoB,iBAAmB,EAAG,UAAU,UAAU,KAAK,YAAY,WAAW,eAAe,CAAC,EAAI,UAAU,OAAO,QACpI,KAAK,iBAAiB,kBAAoB,MAAQ,kBAAoB,OAAS,gBAAkB,KAAK,SAAU,KAAK,iBAAiB,EACtI,KAAK,aAAe,IAAI,wBAAwB,iBAAiB,KAAK,SAAU,KAAK,YAAa,IAAI,CAC1G,CAEA,OAAO,MAAM,KAAM,QAAS,CACxB,MAAM,OAAS,IAAI,KAAK,OAAO,EAC/B,OAAO,UAAU,MAAM,KAAM,IAAI,EACjC,OAAO,OAAO,QAClB,CACA,OAAO,kBAAkB,gBAAiB,QAAS,CAC/C,MAAM,KAAO,OAAO,OAAO,OAAO,OAAO,CAAC,EAAG,oBAAoB,EAAG,OAAO,EAG3E,kBAAoB,MAAQ,kBAAoB,OAAS,gBAAmB,gBAAkB,KAAK,YAAY,cAAc,UAAU,UAAU,SAAU,UAAU,GAAG,KAAM,CAAC,CAAC,EAIhL,MAAM,aAAe,KAAK,YAAY,cAAc,eAAgB,UAAU,GAAG,KAAM,CAAC,CAAC,EACzF,MAAM,OAAS,IAAI,KAAK,KAAM,aAAc,eAAe,EAC3D,GAAI,OAAO,oBAAsB,UAAU,OAAO,SAAU,CACxD,OAAO,uBAAuB,QAAQ,cAAc,WAAW,CACnE,CACA,OAAO,iCAAiC,EACxC,OAAO,uBAAuB,EAC9B,OAAO,oBAAoB,EAC3B,OAAO,2BAA2B,EAClC,OAAO,MACX,CACA,aAAc,CACV,MAAM,YAAc,KAAK,YAAY,cAAc,KAAK,QAAQ,EAChE,MAAM,SAAW,KAAK,YAAY,uBAAuB,EACzD,KAAK,YAAY,YAAa,QAAQ,EACtC,OAAO,QACX,CAEA,KAAK,MAAO,KAAM,YAAa,CAC3B,IAAI,GACJ,GAAI,CAAC,KAAK,aACN,OACJ,MAAM,KAAO,GAAK,MAAM,YAAc,MAAQ,KAAO,OAAS,GAAK,SACnE,MAAM,IAAM,CACR,KACA,UAAW,IAAI,UACf,SAAU,IAAI,SACd,YAAa,IAAI,YACjB,QAAS,YAAc,IAAI,UAAY,IAAI,QAC3C,OAAQ,YAAc,IAAI,SAAW,IAAI,OACzC,UAAW,YAAc,IAAI,YAAc,IAAI,SACnD,EACA,KAAK,aAAa,GAAG,CACzB,CAEA,WAAW,KAAM,IAAK,MAAO,CACzB,IAAI,GAAI,IACP,IAAM,GAAK,KAAK,aAAa,cAAgB,MAAQ,KAAO,OAAS,OAAS,GAAG,KAAK,GAAI,IAAI,EAC/F,GAAI,OAAS,KAAK,aAAa,SAAW,EACtC,KAAK,iBAAiB,KAAM,GAAG,CACvC,CACA,UAAU,KAAM,MAAO,CACnB,IAAI,GAAI,GACR,GAAI,KAAK,QAAQ,uBAAwB,CACrC,KAAK,gBAAgB,KAAM,KAAK,YAAY,CAChD,EACC,IAAM,GAAK,KAAK,aAAa,aAAe,MAAQ,KAAO,OAAS,OAAS,GAAG,KAAK,GAAI,KAAM,KAAK,aAAa,OAAO,EACzH,GAAI,MAAO,CACP,IAAI,QACJ,IAAI,aACJ,GAAI,KAAK,aAAa,WAAa,GAAK,KAAK,gBAAiB,CAC1D,QAAU,KAAK,gBACf,aAAe,KAAK,iBACxB,KACK,EACA,CAAE,QAAS,YAAa,EAAI,KAAK,aACtC,CACA,KAAK,iBAAiB,QAAS,YAAY,CAC/C,CACJ,CACA,iBAAiB,QAAS,IAAK,CAC3B,MAAM,OAAS,UAAY,KAAK,UAAY,KAAK,YAAY,gBAAgB,OAAO,IAAM,UAAU,GAAG,KACvG,KAAK,iBAAmB,CAAC,OACzB,KAAK,UAAU,cAAgB,CAAC,QAAU,CAAC,KAAK,oBAAoB,IAAK,OAAO,CACpF,CACA,qBAAqB,aAAc,mBAAoB,CACnD,KAAK,eAAe,aAAc,UAAU,GAAG,IAAI,EACnD,KAAK,UAAU,MAAQ,mBACvB,KAAK,sBAAwB,KAAK,cAClC,KAAK,cAAgB,cAAc,IACvC,CACA,0BAA2B,CACvB,KAAK,cAAgB,cAAc,KACnC,KAAK,sBAAwB,cAAc,QAC3C,KAAK,UAAU,MAAQ,WAAW,cAAc,SACpD,CAEA,4BAA6B,CACzB,OAAO,KAAK,aAAa,WAAa,GAAK,KAAK,gBAC1C,KAAK,gBACL,KAAK,aAAa,OAC5B,CACA,4BAA6B,CACzB,IAAI,KAAO,KAAK,gBAChB,MAAO,KAAM,CACT,GAAI,KAAK,YAAY,WAAW,IAAI,IAAM,UAAU,UAAU,KAAM,CAChE,KAAK,YAAc,KACnB,KACJ,CACA,KAAO,KAAK,YAAY,cAAc,IAAI,CAC9C,CACJ,CACA,kCAAmC,CAC/B,GAAI,CAAC,KAAK,iBAAmB,KAAK,YAAY,gBAAgB,KAAK,eAAe,IAAM,UAAU,GAAG,KAAM,CACvG,MACJ,CACA,OAAQ,KAAK,kBAAmB,CAC5B,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,SAAU,CAC5B,KAAK,UAAU,MAAQ,WAAW,cAAc,OAChD,KACJ,CACA,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,SAAU,CAC5B,KAAK,UAAU,MAAQ,WAAW,cAAc,QAChD,KACJ,CACA,KAAK,UAAU,OAAO,OAAQ,CAC1B,KAAK,UAAU,MAAQ,WAAW,cAAc,YAChD,KACJ,CACA,KAAK,UAAU,OAAO,UAAW,CAC7B,KAAK,UAAU,MAAQ,WAAW,cAAc,UAChD,KACJ,CACA,QAEJ,CACJ,CAEA,iBAAiB,MAAO,CACpB,MAAM,KAAO,MAAM,MAAQ,GAC3B,MAAM,SAAW,MAAM,UAAY,GACnC,MAAM,SAAW,MAAM,UAAY,GACnC,KAAK,YAAY,gBAAgB,KAAK,SAAU,KAAM,SAAU,QAAQ,EACxE,GAAI,MAAM,SAAU,CAChB,MAAM,iBAAmB,KAAK,YAAY,cAAc,KAAK,QAAQ,EACrE,MAAM,YAAc,iBAAiB,KAAM,MAAS,KAAK,YAAY,mBAAmB,IAAI,CAAC,EAC7F,GAAI,YAAa,CACb,KAAK,YAAY,0BAA0B,YAAa,MAAM,QAAQ,CAC1E,CACJ,CACJ,CACA,qBAAqB,QAAS,SAAU,CACpC,GAAI,KAAK,QAAQ,uBAAwB,CACrC,MAAM,IAAM,UAAY,OAAO,OAAO,OAAO,OAAO,CAAC,EAAG,QAAQ,EAAG,CAAE,SAAU,QAAS,CAAC,EACzF,KAAK,YAAY,0BAA0B,QAAS,GAAG,CAC3D,CACA,GAAI,KAAK,+BAA+B,EAAG,CACvC,KAAK,qBAAqB,OAAO,CACrC,KACK,CACD,MAAM,OAAS,KAAK,aAAa,yBACjC,KAAK,YAAY,YAAY,OAAQ,OAAO,CAChD,CACJ,CACA,eAAe,MAAO,aAAc,CAChC,MAAM,QAAU,KAAK,YAAY,cAAc,MAAM,QAAS,aAAc,MAAM,KAAK,EACvF,KAAK,qBAAqB,QAAS,MAAM,QAAQ,CACrD,CACA,eAAe,MAAO,aAAc,CAChC,MAAM,QAAU,KAAK,YAAY,cAAc,MAAM,QAAS,aAAc,MAAM,KAAK,EACvF,KAAK,qBAAqB,QAAS,MAAM,QAAQ,EACjD,KAAK,aAAa,KAAK,QAAS,MAAM,KAAK,CAC/C,CACA,mBAAmB,QAAS,MAAO,CAC/B,MAAM,QAAU,KAAK,YAAY,cAAc,QAAS,UAAU,GAAG,KAAM,CAAC,CAAC,EAC7E,KAAK,qBAAqB,QAAS,IAAI,EACvC,KAAK,aAAa,KAAK,QAAS,KAAK,CACzC,CACA,gBAAgB,MAAO,CACnB,MAAM,KAAO,KAAK,YAAY,cAAc,MAAM,QAAS,UAAU,GAAG,KAAM,MAAM,KAAK,EACzF,MAAM,QAAU,KAAK,YAAY,uBAAuB,EACxD,KAAK,YAAY,mBAAmB,KAAM,OAAO,EACjD,KAAK,qBAAqB,KAAM,MAAM,QAAQ,EAC9C,KAAK,aAAa,KAAK,KAAM,MAAM,KAAK,EACxC,GAAI,KAAK,QAAQ,uBACb,KAAK,YAAY,0BAA0B,QAAS,IAAI,CAChE,CACA,wBAAyB,CACrB,MAAM,QAAU,KAAK,YAAY,cAAc,UAAU,UAAU,KAAM,UAAU,GAAG,KAAM,CAAC,CAAC,EAC9F,GAAI,KAAK,QAAQ,uBACb,KAAK,YAAY,0BAA0B,QAAS,IAAI,EAC5D,KAAK,YAAY,YAAY,KAAK,aAAa,QAAS,OAAO,EAC/D,KAAK,aAAa,KAAK,QAAS,UAAU,OAAO,IAAI,CACzD,CACA,mBAAmB,MAAO,OAAQ,CAC9B,MAAM,YAAc,KAAK,YAAY,kBAAkB,MAAM,IAAI,EACjE,KAAK,YAAY,YAAY,OAAQ,WAAW,EAChD,GAAI,KAAK,QAAQ,uBAAwB,CACrC,KAAK,YAAY,0BAA0B,YAAa,MAAM,QAAQ,CAC1E,CACJ,CACA,kBAAkB,MAAO,CACrB,IAAI,OACJ,IAAI,cACJ,GAAI,KAAK,+BAA+B,EAAG,EACtC,CAAE,OAAQ,aAAc,EAAI,KAAK,6BAA6B,GAC/D,GAAI,cAAe,CACf,KAAK,YAAY,iBAAiB,OAAQ,MAAM,MAAO,aAAa,CACxE,KACK,CACD,KAAK,YAAY,WAAW,OAAQ,MAAM,KAAK,CACnD,CACJ,KACK,CACD,OAAS,KAAK,aAAa,yBAC3B,KAAK,YAAY,WAAW,OAAQ,MAAM,KAAK,CACnD,CACA,GAAI,CAAC,MAAM,SACP,OACJ,MAAM,SAAW,KAAK,YAAY,cAAc,MAAM,EACtD,MAAM,YAAc,cAAgB,SAAS,YAAY,aAAa,EAAI,SAAS,OACnF,MAAM,SAAW,SAAS,YAAc,CAAC,EAEzC,MAAM,MAAQ,KAAK,YAAY,0BAA0B,QAAQ,EACjE,GAAI,MAAO,CACP,KAAM,CAAE,QAAS,OAAQ,SAAU,EAAI,MAAM,SAC7C,KAAK,YAAY,6BAA6B,SAAU,CAAE,QAAS,OAAQ,SAAU,CAAC,CAC1F,SACS,KAAK,QAAQ,uBAAwB,CAC1C,KAAK,YAAY,0BAA0B,SAAU,MAAM,QAAQ,CACvE,CACJ,CACA,YAAY,MAAO,UAAW,CAC1B,QAAS,MAAQ,KAAK,YAAY,cAAc,KAAK,EAAG,MAAO,MAAQ,KAAK,YAAY,cAAc,KAAK,EAAG,CAC1G,KAAK,YAAY,WAAW,KAAK,EACjC,KAAK,YAAY,YAAY,UAAW,KAAK,CACjD,CACJ,CACA,gBAAgB,QAAS,aAAc,CACnC,GAAI,KAAK,YAAY,0BAA0B,OAAO,GAAK,aAAa,SAAU,CAC9E,MAAM,MAAQ,aAAa,SAC3B,MAAM,GAAK,KAAK,YAAY,WAAW,OAAO,EAC9C,MAAM,OAGN,aAAa,OAAS,WAAW,UAAU,SAAW,KAAO,aAAa,QACpE,CACE,OAAQ,OAAO,OAAO,CAAC,EAAG,KAAK,EAC/B,QAAS,MAAM,QACf,OAAQ,MAAM,OACd,UAAW,MAAM,SACrB,EACE,CACE,QAAS,MAAM,UACf,OAAQ,MAAM,SACd,UAAW,MAAM,WACrB,EACJ,KAAK,YAAY,6BAA6B,QAAS,MAAM,CACjE,CACJ,CAEA,2CAA2C,MAAO,CAE9C,GAAI,CAAC,KAAK,iBACN,MAAO,OACX,IAAI,QACJ,IAAI,aACJ,GAAI,KAAK,aAAa,WAAa,GAAK,KAAK,gBAAiB,CAC1D,QAAU,KAAK,gBACf,aAAe,KAAK,iBACxB,KACK,EACA,CAAE,QAAS,YAAa,EAAI,KAAK,aACtC,CACA,GAAI,MAAM,QAAU,UAAU,OAAO,KACjC,KAAK,YAAY,WAAW,OAAO,IAAM,UAAU,UAAU,gBAC7D,KAAK,YAAY,gBAAgB,OAAO,IAAM,UAAU,GAAG,OAAQ,CACnE,MAAO,MACX,CACA,OAEA,KAAK,UAAU,gBAGT,MAAM,QAAU,UAAU,OAAO,QAAU,MAAM,QAAU,UAAU,OAAO,aAC1E,CAAC,KAAK,oBAAoB,aAAc,QAAS,UAAU,GAAG,IAAI,CAC9E,CACA,cAAc,MAAO,CACjB,OAAQ,MAAM,KAAM,CAChB,KAAK,WAAW,UAAU,UAAW,CACjC,KAAK,YAAY,KAAK,EACtB,KACJ,CACA,KAAK,WAAW,UAAU,eAAgB,CACtC,KAAK,gBAAgB,KAAK,EAC1B,KACJ,CACA,KAAK,WAAW,UAAU,QAAS,CAC/B,KAAK,UAAU,KAAK,EACpB,KACJ,CACA,KAAK,WAAW,UAAU,QAAS,CAC/B,KAAK,UAAU,KAAK,EACpB,KACJ,CACA,KAAK,WAAW,UAAU,UAAW,CACjC,KAAK,iBAAiB,KAAK,EAC3B,KACJ,CACA,KAAK,WAAW,UAAU,QAAS,CAC/B,KAAK,SAAS,KAAK,EACnB,KACJ,CACA,KAAK,WAAW,UAAU,IAAK,CAC3B,KAAK,MAAM,KAAK,EAChB,KACJ,CACA,KAAK,WAAW,UAAU,qBAAsB,CAC5C,KAAK,sBAAsB,KAAK,EAChC,KACJ,CACJ,CACJ,CAEA,oBAAoB,IAAK,QAAS,UAAW,CACzC,MAAM,GAAK,KAAK,YAAY,gBAAgB,OAAO,EACnD,MAAM,MAAQ,KAAK,YAAY,YAAY,OAAO,EAClD,OAAO,eAAe,mBAAmB,IAAK,GAAI,MAAO,SAAS,CACtE,CAEA,sCAAuC,CACnC,MAAM,WAAa,KAAK,yBAAyB,QAAQ,OACzD,GAAI,WAAY,CACZ,MAAM,SAAW,KAAK,yBAAyB,QAAQ,UAAW,OAAU,MAAM,OAAS,6BAA6B,UAAU,QAAU,KAAK,aAAa,SAAS,MAAM,OAAO,CAAC,EACrL,MAAM,UAAY,SAAW,EAAI,WAAa,EAAI,SAAW,EAC7D,QAAS,EAAI,UAAW,GAAK,EAAG,IAAK,CACjC,MAAM,MAAQ,KAAK,yBAAyB,QAAQ,CAAC,EACrD,KAAK,eAAe,MAAM,MAAO,KAAK,YAAY,gBAAgB,MAAM,OAAO,CAAC,EAChF,MAAM,QAAU,KAAK,aAAa,OACtC,CACJ,CACJ,CAEA,iBAAkB,CACd,KAAK,aAAa,uBAAuB,EACzC,KAAK,aAAa,wBAAwB,EAC1C,KAAK,yBAAyB,kBAAkB,EAChD,KAAK,cAAgB,cAAc,MACvC,CACA,gBAAiB,CACb,KAAK,aAAa,oCAAoC,UAAU,OAAO,CAAC,EACxE,KAAK,aAAa,sBAAsB,UAAU,OAAO,CAAC,CAC9D,CAEA,qBAAsB,CAClB,QAAS,EAAI,KAAK,aAAa,SAAU,GAAK,EAAG,IAAK,CAElD,OAAQ,IAAM,GAAK,KAAK,gBAAkB,KAAK,kBAAoB,KAAK,aAAa,OAAO,CAAC,EAAG,CAC5F,KAAK,UAAU,OAAO,GAAI,CACtB,KAAK,cAAgB,cAAc,OACnC,MACJ,CACA,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MAAO,CACzB,KAAK,cAAgB,cAAc,cACnC,MACJ,CACA,KAAK,UAAU,OAAO,QAAS,CAC3B,KAAK,cAAgB,cAAc,WACnC,MACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,KAAK,cAAgB,cAAc,gBACnC,MACJ,CACA,KAAK,UAAU,OAAO,MAAO,CACzB,KAAK,cAAgB,cAAc,SACnC,MACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,KAAK,cAAgB,cAAc,QACnC,MACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,KAAK,cAAgB,cAAc,YACnC,MACJ,CACA,KAAK,UAAU,OAAO,OAAQ,CAC1B,KAAK,6BAA6B,CAAC,EACnC,MACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,KAAK,cAAgB,KAAK,uBAAuB,CAAC,EAClD,MACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,KAAK,cAAgB,KAAK,YAAc,cAAc,WAAa,cAAc,YACjF,MACJ,CACA,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CACtB,GAAI,EAAI,EAAG,CACP,KAAK,cAAgB,cAAc,QACnC,MACJ,CACA,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,GAAI,EAAI,EAAG,CACP,KAAK,cAAgB,cAAc,QACnC,MACJ,CACA,KACJ,CACJ,CACJ,CACA,KAAK,cAAgB,cAAc,OACvC,CACA,6BAA6B,UAAW,CACpC,GAAI,UAAY,EAAG,CACf,QAAS,EAAI,UAAY,EAAG,EAAI,EAAG,IAAK,CACpC,MAAM,GAAK,KAAK,aAAa,OAAO,CAAC,EACrC,GAAI,KAAO,UAAU,OAAO,SAAU,CAClC,KACJ,SACS,KAAO,UAAU,OAAO,MAAO,CACpC,KAAK,cAAgB,cAAc,mBACnC,MACJ,CACJ,CACJ,CACA,KAAK,cAAgB,cAAc,SACvC,CAEA,gCAAgC,GAAI,CAChC,OAAO,qBAAqB,IAAI,EAAE,CACtC,CACA,gCAAiC,CAC7B,OAAO,KAAK,wBAA0B,KAAK,gCAAgC,KAAK,aAAa,YAAY,CAC7G,CACA,8BAA+B,CAC3B,QAAS,EAAI,KAAK,aAAa,SAAU,GAAK,EAAG,IAAK,CAClD,MAAM,YAAc,KAAK,aAAa,MAAM,CAAC,EAC7C,OAAQ,KAAK,aAAa,OAAO,CAAC,EAAG,CACjC,KAAK,UAAU,OAAO,SAAU,CAC5B,GAAI,KAAK,YAAY,gBAAgB,WAAW,IAAM,UAAU,GAAG,KAAM,CACrE,MAAO,CAAE,OAAQ,KAAK,YAAY,mBAAmB,WAAW,EAAG,cAAe,IAAK,CAC3F,CACA,KACJ,CACA,KAAK,UAAU,OAAO,MAAO,CACzB,MAAM,OAAS,KAAK,YAAY,cAAc,WAAW,EACzD,GAAI,OAAQ,CACR,MAAO,CAAE,OAAQ,cAAe,WAAY,CAChD,CACA,MAAO,CAAE,OAAQ,KAAK,aAAa,MAAM,EAAI,CAAC,EAAG,cAAe,IAAK,CACzE,CACA,QAEJ,CACJ,CACA,MAAO,CAAE,OAAQ,KAAK,aAAa,MAAM,CAAC,EAAG,cAAe,IAAK,CACrE,CACA,qBAAqB,QAAS,CAC1B,MAAM,SAAW,KAAK,6BAA6B,EACnD,GAAI,SAAS,cAAe,CACxB,KAAK,YAAY,aAAa,SAAS,OAAQ,QAAS,SAAS,aAAa,CAClF,KACK,CACD,KAAK,YAAY,YAAY,SAAS,OAAQ,OAAO,CACzD,CACJ,CAEA,kBAAkB,QAAS,GAAI,CAC3B,MAAM,GAAK,KAAK,YAAY,gBAAgB,OAAO,EACnD,OAAO,UAAU,iBAAiB,EAAE,EAAE,IAAI,EAAE,CAChD,CACA,YAAY,MAAO,CACf,KAAK,gBAAkB,MACvB,GAAI,KAAK,UAAU,cAAe,CAC9B,0BAA0B,KAAM,KAAK,EACrC,MACJ,CACA,OAAQ,KAAK,cAAe,CACxB,KAAK,cAAc,QAAS,CACxB,mBAAmB,KAAM,KAAK,EAC9B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,gBAAgB,KAAM,KAAK,EAC3B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,gBAAgB,KAAM,KAAK,EAC3B,KACJ,CACA,KAAK,cAAc,QAAS,CACxB,YAAY,KAAM,KAAK,EACvB,KACJ,CACA,KAAK,cAAc,kBAAmB,CAClC,oBAAoB,KAAM,KAAK,EAC/B,KACJ,CACA,KAAK,cAAc,WAAY,CAC3B,eAAe,KAAM,KAAK,EAC1B,KACJ,CACA,KAAK,cAAc,QACnB,KAAK,cAAc,WACnB,KAAK,cAAc,QACnB,KAAK,cAAc,YAAa,CAC5B,gBAAgB,KAAM,KAAK,EAC3B,KACJ,CACA,KAAK,cAAc,KACnB,KAAK,cAAc,UACnB,KAAK,cAAc,mBAAoB,CACnC,KAAK,kBAAkB,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,SACnB,KAAK,cAAc,cACnB,KAAK,cAAc,OAAQ,CACvB,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,cAAe,CAC9B,qBAAqB,KAAM,KAAK,EAChC,KACJ,CACA,KAAK,cAAc,gBAAiB,CAChC,mBAAmB,KAAM,KAAK,EAC9B,KACJ,CACA,KAAK,cAAc,WAAY,CAC3B,eAAe,KAAM,KAAK,EAC1B,KACJ,CACA,KAAK,cAAc,iBAAkB,CACjC,oBAAoB,KAAM,KAAK,EAC/B,KACJ,CACA,QAEJ,CACJ,CACA,gBAAgB,MAAO,CACnB,KAAK,gBAAkB,MACvB,GAAI,KAAK,UAAU,cAAe,CAC9B,8BAA8B,KAAM,KAAK,EACzC,MACJ,CACA,OAAQ,KAAK,cAAe,CACxB,KAAK,cAAc,QAAS,CACxB,mBAAmB,KAAM,KAAK,EAC9B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,gBAAgB,KAAM,KAAK,EAC3B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,gBAAgB,KAAM,KAAK,EAC3B,KACJ,CACA,KAAK,cAAc,QAAS,CACxB,YAAY,KAAM,KAAK,EACvB,KACJ,CACA,KAAK,cAAc,kBAAmB,CAClC,oBAAoB,KAAM,KAAK,EAC/B,KACJ,CACA,KAAK,cAAc,WAAY,CAC3B,eAAe,KAAM,KAAK,EAC1B,KACJ,CACA,KAAK,cAAc,KAAM,CACrB,KAAK,kBAAkB,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,SACnB,KAAK,cAAc,cACnB,KAAK,cAAc,OAAQ,CACvB,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,gBAAiB,CAChC,mBAAmB,KAAM,KAAK,EAC9B,KACJ,CACA,KAAK,cAAc,WAAY,CAC3B,eAAe,KAAM,KAAK,EAC1B,KACJ,CACA,KAAK,cAAc,iBAAkB,CACjC,oBAAoB,KAAM,KAAK,EAC/B,KACJ,CACA,QAEJ,CACJ,CACA,UAAU,MAAO,CACb,KAAK,gBAAkB,MACvB,GAAI,KAAK,iBAAkB,CACvB,cAAc,KAAM,KAAK,EACzB,MACJ,CACA,OAAQ,KAAK,cAAe,CACxB,KAAK,cAAc,QACnB,KAAK,cAAc,YACnB,KAAK,cAAc,YACnB,KAAK,cAAc,QACnB,KAAK,cAAc,kBACnB,KAAK,cAAc,WACnB,KAAK,cAAc,QACnB,KAAK,cAAc,SACnB,KAAK,cAAc,WACnB,KAAK,cAAc,gBACnB,KAAK,cAAc,cACnB,KAAK,cAAc,OACnB,KAAK,cAAc,QACnB,KAAK,cAAc,UACnB,KAAK,cAAc,mBACnB,KAAK,cAAc,YACnB,KAAK,cAAc,YACnB,KAAK,cAAc,eAAgB,CAC/B,cAAc,KAAM,KAAK,EACzB,KACJ,CACA,KAAK,cAAc,cAAe,CAC9B,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,WAAY,CAC3B,+BAA+B,KAAM,KAAK,EAC1C,KACJ,CACA,KAAK,cAAc,iBACnB,KAAK,cAAc,qBAAsB,CACrC,wBAAwB,KAAM,KAAK,EACnC,KACJ,CACA,QAEJ,CACJ,CACA,UAAU,MAAO,CACb,KAAK,gBAAkB,MACvB,OAAQ,KAAK,cAAe,CACxB,KAAK,cAAc,QAAS,CACxB,qBAAqB,KAAM,KAAK,EAChC,KACJ,CACA,KAAK,cAAc,YACnB,KAAK,cAAc,QACnB,KAAK,cAAc,kBACnB,KAAK,cAAc,WAAY,CAC3B,KAAK,KAAK,MAAO,iBAAiB,IAAI,gBAAgB,EACtD,KACJ,CACA,KAAK,cAAc,cAAe,CAC9B,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,QAEJ,CACJ,CACA,WAAW,MAAO,CACd,KAAK,gBAAkB,MACvB,KAAK,aAAe,MACpB,KAAK,iBAAiB,KAAK,EAC3B,GAAI,MAAM,aAAe,CAAC,MAAM,eAAgB,CAC5C,KAAK,KAAK,MAAO,iBAAiB,IAAI,6CAA6C,CACvF,CACJ,CAWA,iBAAiB,MAAO,CACpB,GAAI,KAAK,2CAA2C,KAAK,EAAG,CACxD,yBAAyB,KAAM,KAAK,CACxC,KACK,CACD,KAAK,+BAA+B,KAAK,CAC7C,CACJ,CACA,+BAA+B,MAAO,CAClC,OAAQ,KAAK,cAAe,CACxB,KAAK,cAAc,QAAS,CACxB,mBAAmB,KAAM,KAAK,EAC9B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,mBAAmB,KAAM,KAAK,EAC9B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,mBAAmB,KAAM,KAAK,EAC9B,KACJ,CACA,KAAK,cAAc,QAAS,CACxB,eAAe,KAAM,KAAK,EAC1B,KACJ,CACA,KAAK,cAAc,kBAAmB,CAClC,uBAAuB,KAAM,KAAK,EAClC,KACJ,CACA,KAAK,cAAc,WAAY,CAC3B,kBAAkB,KAAM,KAAK,EAC7B,KACJ,CACA,KAAK,cAAc,QAAS,CACxB,eAAe,KAAM,KAAK,EAC1B,KACJ,CACA,KAAK,cAAc,SAAU,CACzB,gBAAgB,KAAM,KAAK,EAC3B,KACJ,CACA,KAAK,cAAc,cAAe,CAC9B,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,WAAY,CAC3B,kBAAkB,KAAM,KAAK,EAC7B,KACJ,CACA,KAAK,cAAc,gBAAiB,CAChC,sBAAsB,KAAM,KAAK,EACjC,KACJ,CACA,KAAK,cAAc,cAAe,CAC9B,oBAAoB,KAAM,KAAK,EAC/B,KACJ,CACA,KAAK,cAAc,OAAQ,CACvB,cAAc,KAAM,KAAK,EACzB,KACJ,CACA,KAAK,cAAc,QAAS,CACxB,eAAe,KAAM,KAAK,EAC1B,KACJ,CACA,KAAK,cAAc,UAAW,CAC1B,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,mBAAoB,CACnC,wBAAwB,KAAM,KAAK,EACnC,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,mBAAmB,KAAM,KAAK,EAC9B,KACJ,CACA,KAAK,cAAc,WAAY,CAC3B,kBAAkB,KAAM,KAAK,EAC7B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,mBAAmB,KAAM,KAAK,EAC9B,KACJ,CACA,KAAK,cAAc,eAAgB,CAC/B,sBAAsB,KAAM,KAAK,EACjC,KACJ,CACA,KAAK,cAAc,iBAAkB,CACjC,uBAAuB,KAAM,KAAK,EAClC,KACJ,CACA,KAAK,cAAc,qBAAsB,CACrC,2BAA2B,KAAM,KAAK,EACtC,KACJ,CACA,QAEJ,CACJ,CACA,SAAS,MAAO,CACZ,KAAK,gBAAkB,MACvB,KAAK,aAAe,MACpB,GAAI,KAAK,iBAAkB,CACvB,uBAAuB,KAAM,KAAK,CACtC,KACK,CACD,KAAK,6BAA6B,KAAK,CAC3C,CACJ,CACA,6BAA6B,MAAO,CAChC,OAAQ,KAAK,cAAe,CACxB,KAAK,cAAc,QAAS,CACxB,mBAAmB,KAAM,KAAK,EAC9B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,QAAS,CACxB,aAAa,KAAM,KAAK,EACxB,KACJ,CACA,KAAK,cAAc,kBAAmB,CAClC,qBAAqB,KAAM,KAAK,EAChC,KACJ,CACA,KAAK,cAAc,WAAY,CAC3B,gBAAgB,KAAM,KAAK,EAC3B,KACJ,CACA,KAAK,cAAc,QAAS,CACxB,aAAa,KAAM,KAAK,EACxB,KACJ,CACA,KAAK,cAAc,KAAM,CACrB,aAAa,KAAM,KAAK,EACxB,KACJ,CACA,KAAK,cAAc,SAAU,CACzB,cAAc,KAAM,KAAK,EACzB,KACJ,CACA,KAAK,cAAc,cAAe,CAC9B,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,WAAY,CAC3B,gBAAgB,KAAM,KAAK,EAC3B,KACJ,CACA,KAAK,cAAc,gBAAiB,CAChC,oBAAoB,KAAM,KAAK,EAC/B,KACJ,CACA,KAAK,cAAc,cAAe,CAC9B,kBAAkB,KAAM,KAAK,EAC7B,KACJ,CACA,KAAK,cAAc,OAAQ,CACvB,YAAY,KAAM,KAAK,EACvB,KACJ,CACA,KAAK,cAAc,QAAS,CACxB,aAAa,KAAM,KAAK,EACxB,KACJ,CACA,KAAK,cAAc,UAAW,CAC1B,eAAe,KAAM,KAAK,EAC1B,KACJ,CACA,KAAK,cAAc,mBAAoB,CACnC,sBAAsB,KAAM,KAAK,EACjC,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,WAAY,CAC3B,gBAAgB,KAAM,KAAK,EAC3B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,eAAgB,CAC/B,oBAAoB,KAAM,KAAK,EAC/B,KACJ,CACA,KAAK,cAAc,iBAAkB,CACjC,oBAAoB,KAAM,KAAK,EAC/B,KACJ,CACA,QAEJ,CACJ,CACA,MAAM,MAAO,CACT,OAAQ,KAAK,cAAe,CACxB,KAAK,cAAc,QAAS,CACxB,mBAAmB,KAAM,KAAK,EAC9B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,gBAAgB,KAAM,KAAK,EAC3B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,gBAAgB,KAAM,KAAK,EAC3B,KACJ,CACA,KAAK,cAAc,QAAS,CACxB,YAAY,KAAM,KAAK,EACvB,KACJ,CACA,KAAK,cAAc,kBAAmB,CAClC,oBAAoB,KAAM,KAAK,EAC/B,KACJ,CACA,KAAK,cAAc,WAAY,CAC3B,eAAe,KAAM,KAAK,EAC1B,KACJ,CACA,KAAK,cAAc,QACnB,KAAK,cAAc,SACnB,KAAK,cAAc,WACnB,KAAK,cAAc,gBACnB,KAAK,cAAc,cACnB,KAAK,cAAc,OACnB,KAAK,cAAc,QACnB,KAAK,cAAc,UACnB,KAAK,cAAc,mBAAoB,CACnC,UAAU,KAAM,KAAK,EACrB,KACJ,CACA,KAAK,cAAc,KAAM,CACrB,UAAU,KAAM,KAAK,EACrB,KACJ,CACA,KAAK,cAAc,cAAe,CAC9B,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,YAAa,CAC5B,cAAc,KAAM,KAAK,EACzB,KACJ,CACA,KAAK,cAAc,WACnB,KAAK,cAAc,YACnB,KAAK,cAAc,eACnB,KAAK,cAAc,iBACnB,KAAK,cAAc,qBAAsB,CACrC,YAAY,KAAM,KAAK,EACvB,KACJ,CACA,QAEJ,CACJ,CACA,sBAAsB,MAAO,CACzB,GAAI,KAAK,gBAAiB,CACtB,KAAK,gBAAkB,MACvB,GAAI,MAAM,MAAM,WAAW,CAAC,IAAM,QAAQ,YAAY,UAAW,CAC7D,GAAI,MAAM,MAAM,SAAW,EAAG,CAC1B,MACJ,CACA,MAAM,MAAQ,MAAM,MAAM,OAAO,CAAC,CACtC,CACJ,CACA,GAAI,KAAK,UAAU,cAAe,CAC9B,KAAK,kBAAkB,KAAK,EAC5B,MACJ,CACA,OAAQ,KAAK,cAAe,CACxB,KAAK,cAAc,QACnB,KAAK,cAAc,kBACnB,KAAK,cAAc,WACnB,KAAK,cAAc,KACnB,KAAK,cAAc,gBACnB,KAAK,cAAc,UACnB,KAAK,cAAc,mBACnB,KAAK,cAAc,YACnB,KAAK,cAAc,eAAgB,CAC/B,KAAK,kBAAkB,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,QACnB,KAAK,cAAc,WACnB,KAAK,cAAc,QACnB,KAAK,cAAc,YACnB,KAAK,cAAc,WACnB,KAAK,cAAc,iBACnB,KAAK,cAAc,qBAAsB,CACrC,0BAA0B,KAAM,KAAK,EACrC,KACJ,CACA,KAAK,cAAc,SACnB,KAAK,cAAc,cACnB,KAAK,cAAc,OAAQ,CACvB,iBAAiB,KAAM,KAAK,EAC5B,KACJ,CACA,KAAK,cAAc,cAAe,CAC9B,+BAA+B,KAAM,KAAK,EAC1C,KACJ,CACA,QAEJ,CACJ,CACJ,CACA,QAAQ,OAAS,OAKjB,SAAS,+BAA+B,EAAG,MAAO,CAC9C,IAAI,uBAAyB,EAAE,yBAAyB,kCAAkC,MAAM,OAAO,EACvG,GAAI,uBAAwB,CACxB,GAAI,CAAC,EAAE,aAAa,SAAS,uBAAuB,OAAO,EAAG,CAC1D,EAAE,yBAAyB,YAAY,sBAAsB,EAC7D,uBAAyB,IAC7B,SACS,CAAC,EAAE,aAAa,WAAW,MAAM,KAAK,EAAG,CAC9C,uBAAyB,IAC7B,CACJ,KACK,CACD,oBAAoB,EAAG,KAAK,CAChC,CACA,OAAO,sBACX,CAfS,wEAiBT,SAAS,sBAAsB,EAAG,uBAAwB,CACtD,IAAI,cAAgB,KACpB,IAAI,IAAM,EAAE,aAAa,SACzB,KAAO,KAAO,EAAG,MAAO,CACpB,MAAM,QAAU,EAAE,aAAa,MAAM,GAAG,EACxC,GAAI,UAAY,uBAAuB,QAAS,CAC5C,KACJ,CACA,GAAI,EAAE,kBAAkB,QAAS,EAAE,aAAa,OAAO,GAAG,CAAC,EAAG,CAC1D,cAAgB,OACpB,CACJ,CACA,GAAI,CAAC,cAAe,CAChB,EAAE,aAAa,gBAAgB,IAAM,EAAI,EAAI,GAAG,EAChD,EAAE,yBAAyB,YAAY,sBAAsB,CACjE,CACA,OAAO,aACX,CAjBS,sDAmBT,SAAS,YAAY,EAAG,cAAe,kBAAmB,CACtD,IAAI,YAAc,cAClB,IAAI,YAAc,EAAE,aAAa,kBAAkB,aAAa,EAChE,QAAS,EAAI,EAAG,QAAU,YAAa,UAAY,kBAAmB,IAAK,QAAU,YAAa,CAE9F,YAAc,EAAE,aAAa,kBAAkB,OAAO,EACtD,MAAM,aAAe,EAAE,yBAAyB,gBAAgB,OAAO,EACvE,MAAM,gBAAkB,cAAgB,GAAK,mBAC7C,MAAM,6BAA+B,CAAC,cAAgB,gBACtD,GAAI,6BAA8B,CAC9B,GAAI,gBAAiB,CACjB,EAAE,yBAAyB,YAAY,YAAY,CACvD,CACA,EAAE,aAAa,OAAO,OAAO,CACjC,KACK,CACD,QAAU,2BAA2B,EAAG,YAAY,EACpD,GAAI,cAAgB,cAAe,CAC/B,EAAE,yBAAyB,SAAW,YAC1C,CACA,EAAE,YAAY,WAAW,WAAW,EACpC,EAAE,YAAY,YAAY,QAAS,WAAW,EAC9C,YAAc,OAClB,CACJ,CACA,OAAO,WACX,CA1BS,kCA4BT,SAAS,2BAA2B,EAAG,aAAc,CACjD,MAAM,GAAK,EAAE,YAAY,gBAAgB,aAAa,OAAO,EAC7D,MAAM,WAAa,EAAE,YAAY,cAAc,aAAa,MAAM,QAAS,GAAI,aAAa,MAAM,KAAK,EACvG,EAAE,aAAa,QAAQ,aAAa,QAAS,UAAU,EACvD,aAAa,QAAU,WACvB,OAAO,UACX,CANS,gEAQT,SAAS,iCAAiC,EAAG,eAAgB,YAAa,CACtE,MAAM,GAAK,EAAE,YAAY,WAAW,cAAc,EAClD,MAAM,KAAO,EAAG,UAAU,UAAU,EAAE,EACtC,GAAI,EAAE,gCAAgC,GAAG,EAAG,CACxC,EAAE,qBAAqB,WAAW,CACtC,KACK,CACD,MAAM,GAAK,EAAE,YAAY,gBAAgB,cAAc,EACvD,GAAI,MAAQ,UAAU,OAAO,UAAY,KAAO,UAAU,GAAG,KAAM,CAC/D,eAAiB,EAAE,YAAY,mBAAmB,cAAc,CACpE,CACA,EAAE,YAAY,YAAY,eAAgB,WAAW,CACzD,CACJ,CAbS,4EAeT,SAAS,2BAA2B,EAAG,cAAe,uBAAwB,CAC1E,MAAM,GAAK,EAAE,YAAY,gBAAgB,uBAAuB,OAAO,EACvE,KAAM,CAAE,KAAM,EAAI,uBAClB,MAAM,WAAa,EAAE,YAAY,cAAc,MAAM,QAAS,GAAI,MAAM,KAAK,EAC7E,EAAE,YAAY,cAAe,UAAU,EACvC,EAAE,YAAY,YAAY,cAAe,UAAU,EACnD,EAAE,yBAAyB,2BAA2B,WAAY,KAAK,EACvE,EAAE,yBAAyB,YAAY,sBAAsB,EAC7D,EAAE,aAAa,OAAO,uBAAuB,OAAO,EACpD,EAAE,aAAa,YAAY,cAAe,WAAY,MAAM,KAAK,CACrE,CAVS,gEAYT,SAAS,mBAAmB,EAAG,MAAO,CAClC,QAAS,EAAI,EAAG,EAAI,mBAAoB,IAAK,CACzC,MAAM,uBAAyB,+BAA+B,EAAG,KAAK,EACtE,GAAI,CAAC,uBAAwB,CACzB,KACJ,CACA,MAAM,cAAgB,sBAAsB,EAAG,sBAAsB,EACrE,GAAI,CAAC,cAAe,CAChB,KACJ,CACA,EAAE,yBAAyB,SAAW,uBACtC,MAAM,YAAc,YAAY,EAAG,cAAe,uBAAuB,OAAO,EAChF,MAAM,eAAiB,EAAE,aAAa,kBAAkB,uBAAuB,OAAO,EACtF,EAAE,YAAY,WAAW,WAAW,EACpC,GAAI,eACA,iCAAiC,EAAG,eAAgB,WAAW,EACnE,2BAA2B,EAAG,cAAe,sBAAsB,CACvE,CACJ,CAlBS,gDAqBT,SAAS,cAAc,EAAG,MAAO,CAC7B,EAAE,mBAAmB,MAAO,EAAE,aAAa,wBAAwB,CACvE,CAFS,sCAGT,SAAS,+BAA+B,EAAG,MAAO,CAC9C,EAAE,mBAAmB,MAAO,EAAE,aAAa,MAAM,CAAC,CAAC,CACvD,CAFS,wEAGT,SAAS,wBAAwB,EAAG,MAAO,CACvC,EAAE,mBAAmB,MAAO,EAAE,QAAQ,CAC1C,CAFS,0DAGT,SAAS,YAAY,EAAG,MAAO,CAC3B,EAAE,QAAU,KAEZ,GAAI,MAAM,SAAU,CAGhB,MAAM,OAAS,EAAE,gBAAkB,EAAI,EACvC,QAAS,EAAI,EAAE,aAAa,SAAU,GAAK,OAAQ,IAAK,CACpD,EAAE,gBAAgB,EAAE,aAAa,MAAM,CAAC,EAAG,KAAK,CACpD,CAEA,GAAI,CAAC,EAAE,iBAAmB,EAAE,aAAa,UAAY,EAAG,CACpD,MAAM,YAAc,EAAE,aAAa,MAAM,CAAC,EAC1C,MAAM,aAAe,EAAE,YAAY,0BAA0B,WAAW,EACxE,GAAI,cAAgB,CAAC,aAAa,OAAQ,CACtC,EAAE,gBAAgB,YAAa,KAAK,EACpC,GAAI,EAAE,aAAa,UAAY,EAAG,CAC9B,MAAM,YAAc,EAAE,aAAa,MAAM,CAAC,EAC1C,MAAM,aAAe,EAAE,YAAY,0BAA0B,WAAW,EACxE,GAAI,cAAgB,CAAC,aAAa,OAAQ,CACtC,EAAE,gBAAgB,YAAa,KAAK,CACxC,CACJ,CACJ,CACJ,CACJ,CACJ,CA1BS,kCA6BT,SAAS,qBAAqB,EAAG,MAAO,CACpC,EAAE,iBAAiB,KAAK,EACxB,MAAM,KAAO,MAAM,YAAc,UAAU,cAAc,OAAS,QAAQ,gBAAgB,KAAK,EAC/F,GAAI,CAAC,QAAQ,aAAa,KAAK,EAAG,CAC9B,EAAE,KAAK,MAAO,iBAAiB,IAAI,oBAAoB,CAC3D,CACA,EAAE,YAAY,gBAAgB,EAAE,SAAU,IAAI,EAC9C,EAAE,cAAgB,cAAc,WACpC,CARS,oDAST,SAAS,mBAAmB,EAAG,MAAO,CAClC,EAAE,KAAK,MAAO,iBAAiB,IAAI,eAAgB,IAAI,EACvD,EAAE,YAAY,gBAAgB,EAAE,SAAU,UAAU,cAAc,MAAM,EACxE,EAAE,cAAgB,cAAc,YAChC,EAAE,cAAc,KAAK,CACzB,CALS,gDAQT,SAAS,mBAAmB,EAAG,MAAO,CAClC,GAAI,MAAM,QAAU,UAAU,OAAO,KAAM,CACvC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,cAAgB,cAAc,WACpC,KACK,CACD,gBAAgB,EAAG,KAAK,CAC5B,CACJ,CARS,gDAST,SAAS,iBAAiB,EAAG,MAAO,CAChC,MAAM,GAAK,MAAM,MACjB,GAAI,KAAO,UAAU,OAAO,MAAQ,KAAO,UAAU,OAAO,MAAQ,KAAO,UAAU,OAAO,MAAQ,KAAO,UAAU,OAAO,GAAI,CAC5H,gBAAgB,EAAG,KAAK,CAC5B,CACJ,CALS,4CAMT,SAAS,gBAAgB,EAAG,MAAO,CAC/B,EAAE,uBAAuB,EACzB,EAAE,cAAgB,cAAc,YAChC,EAAE,cAAc,KAAK,CACzB,CAJS,0CAOT,SAAS,mBAAmB,EAAG,MAAO,CAClC,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,KAAM,CACxB,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,YAAc,EAAE,aAAa,QAC/B,EAAE,cAAgB,cAAc,QAChC,KACJ,CACA,QAAS,CACL,gBAAgB,EAAG,KAAK,CAC5B,CACJ,CACJ,CAhBS,gDAiBT,SAAS,iBAAiB,EAAG,MAAO,CAChC,MAAM,GAAK,MAAM,MACjB,GAAI,KAAO,UAAU,OAAO,MAAQ,KAAO,UAAU,OAAO,MAAQ,KAAO,UAAU,OAAO,MAAQ,KAAO,UAAU,OAAO,GAAI,CAC5H,gBAAgB,EAAG,KAAK,CAC5B,KACK,CACD,EAAE,KAAK,MAAO,iBAAiB,IAAI,gCAAgC,CACvE,CACJ,CARS,4CAST,SAAS,gBAAgB,EAAG,MAAO,CAC/B,EAAE,mBAAmB,UAAU,UAAU,KAAM,UAAU,OAAO,IAAI,EACpE,EAAE,YAAc,EAAE,aAAa,QAC/B,EAAE,cAAgB,cAAc,QAChC,EAAE,cAAc,KAAK,CACzB,CALS,0CAQT,SAAS,eAAe,EAAG,MAAO,CAC9B,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,KAAM,CACxB,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KAAM,CACxB,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,MAAM,eAAiB,KACvB,KACJ,CACA,KAAK,UAAU,OAAO,MAAO,CACzB,EAAE,qBAAqB,MAAO,WAAW,cAAc,MAAM,EAC7D,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,GAAI,EAAE,QAAQ,iBAAkB,CAC5B,EAAE,qBAAqB,MAAO,WAAW,cAAc,OAAO,CAClE,KACK,CACD,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,cAAgB,cAAc,iBACpC,CACA,KACJ,CACA,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,MAAO,CACzB,EAAE,qBAAqB,MAAO,WAAW,cAAc,OAAO,EAC9D,KACJ,CACA,KAAK,UAAU,OAAO,OAAQ,CAC1B,EAAE,qBAAqB,MAAO,WAAW,cAAc,WAAW,EAClE,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,EAAE,gBAAgB,KAAK,EACvB,EAAE,yBAAyB,aAAa,EACxC,EAAE,WAAa,MACf,EAAE,cAAgB,cAAc,YAChC,EAAE,uBAAuB,QAAQ,cAAc,WAAW,EAC1D,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,EAAE,KAAK,MAAO,iBAAiB,IAAI,+BAA+B,EAClE,KACJ,CACA,QAAS,CACL,YAAY,EAAG,KAAK,CACxB,CACJ,CACJ,CAtDS,wCAuDT,SAAS,aAAa,EAAG,MAAO,CAC5B,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,KAAM,CACxB,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,WAChC,KACJ,CACA,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,KAAM,CACxB,YAAY,EAAG,KAAK,EACpB,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,QAAS,CACL,EAAE,KAAK,MAAO,iBAAiB,IAAI,gCAAgC,CACvE,CACJ,CACJ,CArBS,oCAsBT,SAAS,qBAAqB,EAAG,MAAO,CACpC,GAAI,EAAE,aAAa,UAAY,EAAG,CAC9B,EAAE,aAAa,iCAAiC,EAChD,GAAI,EAAE,aAAa,eAAiB,UAAU,OAAO,SAAU,CAC3D,EAAE,KAAK,MAAO,iBAAiB,IAAI,qCAAqC,CAC5E,CACA,EAAE,aAAa,sBAAsB,UAAU,OAAO,QAAQ,EAC9D,EAAE,yBAAyB,kBAAkB,EAC7C,EAAE,uBAAuB,MAAM,EAC/B,EAAE,oBAAoB,CAC1B,KACK,CACD,EAAE,KAAK,MAAO,iBAAiB,IAAI,gCAAgC,CACvE,CACJ,CAdS,oDAeT,SAAS,YAAY,EAAG,MAAO,CAC3B,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,WAChC,EAAE,cAAc,KAAK,CACzB,CAJS,kCAOT,SAAS,uBAAuB,EAAG,MAAO,CACtC,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,KAAM,CACxB,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,MAAO,CACzB,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,EAAE,KAAK,MAAO,iBAAiB,IAAI,oBAAoB,EACvD,KACJ,CACA,QAAS,CACL,oBAAoB,EAAG,KAAK,CAChC,CACJ,CACJ,CAxBS,wDAyBT,SAAS,qBAAqB,EAAG,MAAO,CACpC,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,SAAU,CAC5B,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,QAChC,KACJ,CACA,KAAK,UAAU,OAAO,GAAI,CACtB,oBAAoB,EAAG,KAAK,EAC5B,KACJ,CACA,QAAS,CACL,EAAE,KAAK,MAAO,iBAAiB,IAAI,gCAAgC,CACvE,CACJ,CACJ,CAfS,oDAgBT,SAAS,oBAAoB,EAAG,MAAO,CACnC,MAAM,QAAU,MAAM,OAAS,WAAW,UAAU,IAAM,iBAAiB,IAAI,yBAA2B,iBAAiB,IAAI,kCAC/H,EAAE,KAAK,MAAO,OAAO,EACrB,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,QAChC,EAAE,cAAc,KAAK,CACzB,CANS,kDAST,SAAS,kBAAkB,EAAG,MAAO,CACjC,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,KAAM,CACxB,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,WAAa,MACf,EAAE,cAAgB,cAAc,QAChC,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,cAAgB,cAAc,YAChC,KACJ,CACA,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,MAAO,CACzB,EAAE,KAAK,MAAO,iBAAiB,IAAI,yBAAyB,EAC5D,EAAE,aAAa,KAAK,EAAE,YAAa,UAAU,OAAO,IAAI,EACxD,eAAe,EAAG,KAAK,EACvB,EAAE,aAAa,OAAO,EAAE,WAAW,EACnC,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,EAAE,KAAK,MAAO,iBAAiB,IAAI,+BAA+B,EAClE,KACJ,CACA,QAAS,CACL,eAAe,EAAG,KAAK,CAC3B,CACJ,CACJ,CAzCS,8CA0CT,SAAS,gBAAgB,EAAG,MAAO,CAC/B,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,GAAI,CACtB,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,QAAS,CACL,EAAE,KAAK,MAAO,iBAAiB,IAAI,gCAAgC,CACvE,CACJ,CACJ,CAhBS,0CAiBT,SAAS,eAAe,EAAG,MAAO,CAC9B,EAAE,mBAAmB,UAAU,UAAU,KAAM,UAAU,OAAO,IAAI,EACpE,EAAE,cAAgB,cAAc,QAChC,WAAW,EAAG,KAAK,CACvB,CAJS,wCAOT,SAAS,WAAW,EAAG,MAAO,CAC1B,OAAQ,MAAM,KAAM,CAChB,KAAK,WAAW,UAAU,UAAW,CACjC,gBAAgB,EAAG,KAAK,EACxB,KACJ,CACA,KAAK,WAAW,UAAU,qBAAsB,CAC5C,0BAA0B,EAAG,KAAK,EAClC,KACJ,CACA,KAAK,WAAW,UAAU,QAAS,CAC/B,cAAc,EAAG,KAAK,EACtB,KACJ,CACA,KAAK,WAAW,UAAU,UAAW,CACjC,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,WAAW,UAAU,QAAS,CAC/B,aAAa,EAAG,KAAK,EACrB,KACJ,CACA,KAAK,WAAW,UAAU,IAAK,CAC3B,UAAU,EAAG,KAAK,EAClB,KACJ,CACA,QAEJ,CACJ,CA7BS,gCA8BT,SAAS,0BAA0B,EAAG,MAAO,CACzC,EAAE,qCAAqC,EACvC,EAAE,kBAAkB,KAAK,CAC7B,CAHS,8DAIT,SAAS,gBAAgB,EAAG,MAAO,CAC/B,EAAE,qCAAqC,EACvC,EAAE,kBAAkB,KAAK,EACzB,EAAE,WAAa,KACnB,CAJS,0CAKT,SAAS,mBAAmB,EAAG,MAAO,CAClC,GAAI,EAAE,aAAa,YAAc,EAAG,CAChC,EAAE,YAAY,gBAAgB,EAAE,aAAa,MAAM,CAAC,EAAG,MAAM,KAAK,CACtE,CACJ,CAJS,gDAKT,SAAS,mBAAmB,EAAG,MAAO,CAClC,MAAM,YAAc,EAAE,aAAa,iCAAiC,EACpE,GAAI,aAAe,EAAE,aAAa,YAAc,EAAG,CAC/C,EAAE,WAAa,MACf,EAAE,YAAY,gBAAgB,YAAa,MAAM,KAAK,CAC1D,CACJ,CANS,gDAOT,SAAS,uBAAuB,EAAG,MAAO,CACtC,MAAM,YAAc,EAAE,aAAa,iCAAiC,EACpE,GAAI,EAAE,YAAc,YAAa,CAC7B,EAAE,YAAY,WAAW,WAAW,EACpC,EAAE,aAAa,sBAAsB,EACrC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,cAAgB,cAAc,WACpC,CACJ,CARS,wDAST,SAAS,sBAAsB,EAAG,MAAO,CACrC,GAAI,EAAE,aAAa,iBAAiB,UAAU,OAAO,CAAC,EAAG,CACrD,EAAE,eAAe,CACrB,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,CAC7C,CALS,sDAMT,SAAS,6BAA6B,EAAG,MAAO,CAC5C,GAAI,EAAE,aAAa,iBAAiB,UAAU,OAAO,CAAC,EAAG,CACrD,EAAE,eAAe,CACrB,CACA,IAAK,EAAG,UAAU,kBAAkB,EAAE,aAAa,YAAY,EAAG,CAC9D,EAAE,aAAa,IAAI,CACvB,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,CAC7C,CARS,oEAST,SAAS,kBAAkB,EAAG,MAAO,CACjC,GAAI,EAAE,aAAa,iBAAiB,UAAU,OAAO,CAAC,EAAG,CACrD,EAAE,eAAe,CACrB,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EAGzC,EAAE,gBAAkB,KACpB,EAAE,WAAa,KACnB,CATS,8CAUT,SAAS,mBAAmB,EAAG,MAAO,CAClC,MAAM,WAAa,EAAE,aAAa,UAAY,EAC9C,GAAI,CAAC,EAAE,aAAe,WAAY,CAC9B,GAAI,EAAE,aAAa,iBAAiB,UAAU,OAAO,CAAC,EAAG,CACrD,EAAE,eAAe,CACrB,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,GAAI,CAAC,WAAY,CACb,EAAE,YAAc,EAAE,aAAa,OACnC,CACJ,CACJ,CAXS,gDAYT,SAAS,uBAAuB,EAAG,MAAO,CACtC,EAAE,WAAa,MACf,MAAM,GAAK,MAAM,MACjB,QAAS,EAAI,EAAE,aAAa,SAAU,GAAK,EAAG,IAAK,CAC/C,MAAM,UAAY,EAAE,aAAa,OAAO,CAAC,EACzC,GAAK,KAAO,UAAU,OAAO,IAAM,YAAc,UAAU,OAAO,KAC5D,KAAO,UAAU,OAAO,IAAM,KAAO,UAAU,OAAO,MAAQ,YAAc,UAAU,OAAO,IAAM,YAAc,UAAU,OAAO,IAAM,CAC1I,EAAE,aAAa,oCAAoC,SAAS,EAC5D,EAAE,aAAa,sBAAsB,SAAS,EAC9C,KACJ,CACA,GAAI,YAAc,UAAU,OAAO,SAC/B,YAAc,UAAU,OAAO,KAC/B,YAAc,UAAU,OAAO,GAC/B,EAAE,kBAAkB,EAAE,aAAa,MAAM,CAAC,EAAG,SAAS,EAAG,CACzD,KACJ,CACJ,CACA,GAAI,EAAE,aAAa,iBAAiB,UAAU,OAAO,CAAC,EAAG,CACrD,EAAE,eAAe,CACrB,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,CAC7C,CAtBS,wDAuBT,SAAS,wBAAwB,EAAG,MAAO,CACvC,GAAI,EAAE,aAAa,iBAAiB,UAAU,OAAO,CAAC,EAAG,CACrD,EAAE,eAAe,CACrB,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,UAAU,MAAQ,WAAW,cAAc,SACjD,CANS,0DAOT,SAAS,qBAAqB,EAAG,MAAO,CACpC,GAAI,EAAE,aAAa,WAAW,UAAU,OAAO,MAAM,EAAG,CACpD,EAAE,aAAa,uBAAuB,EACtC,EAAE,aAAa,sBAAsB,UAAU,OAAO,MAAM,CAChE,CACA,EAAE,qCAAqC,EACvC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,WAAa,KACnB,CARS,oDAST,SAAS,gBAAgB,EAAG,MAAO,CAC/B,MAAM,mBAAqB,EAAE,yBAAyB,kCAAkC,UAAU,UAAU,CAAC,EAC7G,GAAI,mBAAoB,CACpB,mBAAmB,EAAG,KAAK,EAC3B,EAAE,aAAa,OAAO,mBAAmB,OAAO,EAChD,EAAE,yBAAyB,YAAY,kBAAkB,CAC7D,CACA,EAAE,qCAAqC,EACvC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,yBAAyB,YAAY,EAAE,aAAa,QAAS,KAAK,CACxE,CAVS,0CAWT,SAAS,gBAAgB,EAAG,MAAO,CAC/B,EAAE,qCAAqC,EACvC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,yBAAyB,YAAY,EAAE,aAAa,QAAS,KAAK,CACxE,CAJS,0CAKT,SAAS,mBAAmB,EAAG,MAAO,CAClC,EAAE,qCAAqC,EACvC,GAAI,EAAE,aAAa,WAAW,UAAU,OAAO,IAAI,EAAG,CAClD,mBAAmB,EAAG,KAAK,EAC3B,EAAE,qCAAqC,CAC3C,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,yBAAyB,YAAY,EAAE,aAAa,QAAS,KAAK,CACxE,CARS,gDAST,SAAS,qBAAqB,EAAG,MAAO,CACpC,EAAE,qCAAqC,EACvC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,yBAAyB,aAAa,EACxC,EAAE,WAAa,KACnB,CALS,oDAMT,SAAS,oBAAoB,EAAG,MAAO,CACnC,GAAI,EAAE,YAAY,gBAAgB,EAAE,QAAQ,IAAM,UAAU,cAAc,QAAU,EAAE,aAAa,iBAAiB,UAAU,OAAO,CAAC,EAAG,CACrI,EAAE,eAAe,CACrB,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,WAAa,MACf,EAAE,cAAgB,cAAc,QACpC,CAPS,kDAQT,SAAS,mBAAmB,EAAG,MAAO,CAClC,EAAE,qCAAqC,EACvC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,WAAa,MACf,MAAM,eAAiB,IAC3B,CALS,gDAMT,SAAS,cAAc,MAAO,CAC1B,MAAM,WAAa,EAAG,WAAW,cAAc,MAAO,UAAU,MAAM,IAAI,EAC1E,OAAO,WAAa,MAAQ,UAAU,YAAY,IAAM,iBAC5D,CAHS,sCAIT,SAAS,oBAAoB,EAAG,MAAO,CACnC,EAAE,qCAAqC,EACvC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,GAAI,CAAC,cAAc,KAAK,EAAG,CACvB,EAAE,WAAa,KACnB,CACA,MAAM,eAAiB,IAC3B,CAPS,kDAQT,SAAS,oBAAoB,EAAG,MAAO,CACnC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,MAAM,eAAiB,IAC3B,CAHS,kDAIT,SAAS,iBAAiB,EAAG,MAAO,CAChC,GAAI,EAAE,aAAa,iBAAiB,UAAU,OAAO,CAAC,EAAG,CACrD,EAAE,eAAe,CACrB,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,WAAa,MACf,MAAM,eAAiB,IAC3B,CAPS,4CAQT,SAAS,oBAAoB,EAAG,MAAO,CACnC,MAAM,QAAU,UAAU,UAAU,IACpC,MAAM,MAAQ,UAAU,OAAO,IAC/B,mBAAmB,EAAG,KAAK,CAC/B,CAJS,kDAKT,SAAS,uBAAuB,EAAG,MAAO,CACtC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EAGzC,EAAE,gBAAkB,KACpB,EAAE,UAAU,MAAQ,WAAW,cAAc,OAC7C,EAAE,sBAAwB,EAAE,cAC5B,EAAE,WAAa,MACf,EAAE,cAAgB,cAAc,IACpC,CATS,wDAUT,SAAS,kBAAkB,EAAG,MAAO,CACjC,GAAI,EAAE,aAAa,iBAAiB,UAAU,OAAO,CAAC,EAAG,CACrD,EAAE,eAAe,CACrB,CACA,EAAE,qCAAqC,EACvC,EAAE,WAAa,MACf,EAAE,qBAAqB,MAAO,WAAW,cAAc,OAAO,CAClE,CAPS,8CAQT,SAAS,qBAAqB,EAAG,MAAO,CACpC,EAAE,WAAa,MACf,EAAE,qBAAqB,MAAO,WAAW,cAAc,OAAO,CAClE,CAHS,oDAMT,SAAS,sBAAsB,EAAG,MAAO,CACrC,EAAE,qBAAqB,MAAO,WAAW,cAAc,OAAO,CAClE,CAFS,sDAGT,SAAS,qBAAqB,EAAG,MAAO,CACpC,EAAE,qCAAqC,EACvC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,WAAa,MACf,EAAE,cACE,EAAE,gBAAkB,cAAc,UAC9B,EAAE,gBAAkB,cAAc,YAClC,EAAE,gBAAkB,cAAc,eAClC,EAAE,gBAAkB,cAAc,QAClC,EAAE,gBAAkB,cAAc,QAChC,cAAc,mBACd,cAAc,SAC5B,CAZS,oDAaT,SAAS,uBAAuB,EAAG,MAAO,CACtC,GAAI,EAAE,aAAa,eAAiB,UAAU,OAAO,OAAQ,CACzD,EAAE,aAAa,IAAI,CACvB,CACA,EAAE,qCAAqC,EACvC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,CAC7C,CANS,wDAOT,SAAS,iBAAiB,EAAG,MAAO,CAChC,GAAI,EAAE,aAAa,WAAW,UAAU,OAAO,IAAI,EAAG,CAClD,EAAE,aAAa,uBAAuB,CAC1C,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,CAC7C,CALS,4CAMT,SAAS,iBAAiB,EAAG,MAAO,CAChC,GAAI,EAAE,aAAa,WAAW,UAAU,OAAO,IAAI,EAAG,CAClD,EAAE,aAAa,oCAAoC,UAAU,OAAO,GAAG,CAC3E,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,CAC7C,CALS,4CAMT,SAAS,mBAAmB,EAAG,MAAO,CAClC,EAAE,qCAAqC,EACvC,eAAe,uBAAuB,KAAK,EAC3C,eAAe,oBAAoB,KAAK,EACxC,GAAI,MAAM,YAAa,CACnB,EAAE,eAAe,MAAO,UAAU,GAAG,MAAM,CAC/C,KACK,CACD,EAAE,eAAe,MAAO,UAAU,GAAG,MAAM,CAC/C,CACA,MAAM,eAAiB,IAC3B,CAXS,gDAYT,SAAS,kBAAkB,EAAG,MAAO,CACjC,EAAE,qCAAqC,EACvC,eAAe,oBAAoB,KAAK,EACxC,eAAe,oBAAoB,KAAK,EACxC,GAAI,MAAM,YAAa,CACnB,EAAE,eAAe,MAAO,UAAU,GAAG,GAAG,CAC5C,KACK,CACD,EAAE,eAAe,MAAO,UAAU,GAAG,GAAG,CAC5C,CACA,MAAM,eAAiB,IAC3B,CAXS,8CAYT,SAAS,sBAAsB,EAAG,MAAO,CACrC,EAAE,qCAAqC,EACvC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,CAC7C,CAHS,sDAIT,SAAS,eAAe,EAAG,MAAO,CAC9B,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,EACtB,KAAK,UAAU,OAAO,EACtB,KAAK,UAAU,OAAO,EACtB,KAAK,UAAU,OAAO,EACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OAAQ,CAC1B,gBAAgB,EAAG,KAAK,EACxB,KACJ,CACA,KAAK,UAAU,OAAO,EAAG,CACrB,gBAAgB,EAAG,KAAK,EACxB,KACJ,CACA,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CACtB,6BAA6B,EAAG,KAAK,EACrC,KACJ,CACA,KAAK,UAAU,OAAO,EACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,WACtB,KAAK,UAAU,OAAO,WAAY,CAC9B,sBAAsB,EAAG,KAAK,EAC9B,KACJ,CACA,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CACtB,uBAAuB,EAAG,KAAK,EAC/B,KACJ,CACA,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,OAAQ,CAC1B,mBAAmB,EAAG,KAAK,EAC3B,KACJ,CACA,KAAK,UAAU,OAAO,GAAI,CACtB,iBAAiB,EAAG,KAAK,EACzB,KACJ,CACA,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,IAAK,CACvB,iBAAiB,EAAG,KAAK,EACzB,KACJ,CACA,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CACtB,iBAAiB,EAAG,KAAK,EACzB,KACJ,CACA,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,QAAS,CAC3B,kBAAkB,EAAG,KAAK,EAC1B,KACJ,CACA,KAAK,UAAU,OAAO,IAAK,CACvB,kBAAkB,EAAG,KAAK,EAC1B,KACJ,CACA,KAAK,UAAU,OAAO,IAAK,CACvB,kBAAkB,EAAG,KAAK,EAC1B,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,mBAAmB,EAAG,KAAK,EAC3B,KACJ,CACA,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,SAAU,CAC5B,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,mBAAmB,EAAG,KAAK,EAC3B,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,mBAAmB,EAAG,KAAK,EAC3B,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,mBAAmB,EAAG,KAAK,EAC3B,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,mBAAmB,EAAG,KAAK,EAC3B,KACJ,CACA,KAAK,UAAU,OAAO,MAAO,CACzB,oBAAoB,EAAG,KAAK,EAC5B,KACJ,CACA,KAAK,UAAU,OAAO,MAAO,CACzB,oBAAoB,EAAG,KAAK,EAC5B,KACJ,CACA,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,OAAQ,CAC1B,oBAAoB,EAAG,KAAK,EAC5B,KACJ,CACA,KAAK,UAAU,OAAO,MAAO,CACzB,oBAAoB,EAAG,KAAK,EAC5B,KACJ,CACA,KAAK,UAAU,OAAO,OAAQ,CAC1B,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,QAAS,CAC3B,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,KAAK,UAAU,OAAO,OAAQ,CAC1B,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,KAAK,UAAU,OAAO,OAAQ,CAC1B,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,SAAU,CAC5B,uBAAuB,EAAG,KAAK,EAC/B,KACJ,CACA,KAAK,UAAU,OAAO,QAAS,CAC3B,sBAAsB,EAAG,KAAK,EAC9B,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,uBAAuB,EAAG,KAAK,EAC/B,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,uBAAuB,EAAG,KAAK,EAC/B,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,GAAI,EAAE,QAAQ,iBAAkB,CAC5B,sBAAsB,EAAG,KAAK,CAClC,KACK,CACD,sBAAsB,EAAG,KAAK,CAClC,CACA,KACJ,CACA,KAAK,UAAU,OAAO,UAAW,CAC7B,wBAAwB,EAAG,KAAK,EAChC,KACJ,CACA,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,SAAU,CAE5B,KACJ,CACA,QAAS,CACL,sBAAsB,EAAG,KAAK,CAClC,CACJ,CACJ,CAvNS,wCAwNT,SAAS,iBAAiB,EAAG,MAAO,CAChC,GAAI,EAAE,aAAa,WAAW,UAAU,OAAO,IAAI,EAAG,CAClD,EAAE,cAAgB,cAAc,WAGhC,GAAI,EAAE,QAAQ,uBAAwB,CAClC,MAAM,YAAc,EAAE,aAAa,iCAAiC,EACpE,GAAI,YAAa,CACb,EAAE,gBAAgB,YAAa,KAAK,CACxC,CACJ,CACJ,CACJ,CAZS,4CAaT,SAAS,iBAAiB,EAAG,MAAO,CAChC,GAAI,EAAE,aAAa,WAAW,UAAU,OAAO,IAAI,EAAG,CAClD,EAAE,cAAgB,cAAc,WAChC,gBAAgB,EAAG,KAAK,CAC5B,CACJ,CALS,4CAMT,SAAS,oBAAoB,EAAG,MAAO,CACnC,MAAM,GAAK,MAAM,MACjB,GAAI,EAAE,aAAa,WAAW,EAAE,EAAG,CAC/B,EAAE,aAAa,uBAAuB,EACtC,EAAE,aAAa,sBAAsB,EAAE,CAC3C,CACJ,CANS,kDAOT,SAAS,iBAAiB,EAAG,CACzB,MAAM,WAAa,EAAE,aAAa,UAAY,EAC9C,KAAM,CAAE,WAAY,EAAI,EACxB,GAAI,CAAC,WAAY,CACb,EAAE,YAAc,IACpB,CACA,IAAK,aAAe,aAAe,EAAE,aAAa,WAAW,UAAU,OAAO,IAAI,EAAG,CACjF,EAAE,aAAa,uBAAuB,EACtC,GAAI,WAAY,CACZ,EAAE,aAAa,sBAAsB,UAAU,OAAO,IAAI,CAC9D,SACS,YAAa,CAClB,EAAE,aAAa,OAAO,WAAW,CACrC,CACJ,CACJ,CAfS,4CAgBT,SAAS,cAAc,EAAG,CACtB,GAAI,CAAC,EAAE,aAAa,iBAAiB,UAAU,OAAO,CAAC,EAAG,CACtD,EAAE,mBAAmB,UAAU,UAAU,EAAG,UAAU,OAAO,CAAC,CAClE,CACA,EAAE,eAAe,CACrB,CALS,sCAMT,SAAS,eAAe,EAAG,CACvB,GAAI,EAAE,aAAa,mBAAmB,UAAU,OAAO,EAAE,EAAG,CACxD,EAAE,aAAa,oCAAoC,UAAU,OAAO,EAAE,EACtE,EAAE,aAAa,sBAAsB,UAAU,OAAO,EAAE,CAC5D,CACJ,CALS,wCAMT,SAAS,eAAe,EAAG,MAAO,CAC9B,MAAM,GAAK,MAAM,MACjB,GAAI,EAAE,aAAa,WAAW,EAAE,EAAG,CAC/B,EAAE,aAAa,oCAAoC,EAAE,EACrD,EAAE,aAAa,sBAAsB,EAAE,CAC3C,CACJ,CANS,wCAOT,SAAS,2BAA2B,EAAG,CACnC,GAAI,EAAE,aAAa,yBAAyB,EAAG,CAC3C,EAAE,aAAa,uBAAuB,EACtC,EAAE,aAAa,6BAA6B,CAChD,CACJ,CALS,gEAMT,SAAS,mBAAmB,EAAG,MAAO,CAClC,MAAM,GAAK,MAAM,MACjB,GAAI,EAAE,aAAa,WAAW,EAAE,EAAG,CAC/B,EAAE,aAAa,uBAAuB,EACtC,EAAE,aAAa,sBAAsB,EAAE,EACvC,EAAE,yBAAyB,kBAAkB,CACjD,CACJ,CAPS,gDAQT,SAAS,eAAe,EAAG,CACvB,EAAE,qCAAqC,EACvC,EAAE,mBAAmB,UAAU,UAAU,GAAI,UAAU,OAAO,EAAE,EAChE,EAAE,aAAa,IAAI,EACnB,EAAE,WAAa,KACnB,CALS,wCAMT,SAAS,oBAAoB,EAAG,MAAO,CACnC,MAAM,GAAK,MAAM,QACjB,MAAM,IAAM,MAAM,MAClB,QAAS,EAAI,EAAE,aAAa,SAAU,EAAI,EAAG,IAAK,CAC9C,MAAM,QAAU,EAAE,aAAa,MAAM,CAAC,EACtC,MAAM,UAAY,EAAE,aAAa,OAAO,CAAC,EAEzC,GAAI,MAAQ,YAAc,MAAQ,UAAU,OAAO,SAAW,EAAE,YAAY,WAAW,OAAO,IAAM,IAAK,CACrG,EAAE,aAAa,oCAAoC,GAAG,EACtD,GAAI,EAAE,aAAa,UAAY,EAC3B,EAAE,aAAa,gBAAgB,CAAC,EACpC,KACJ,CACA,GAAI,EAAE,kBAAkB,QAAS,SAAS,EAAG,CACzC,KACJ,CACJ,CACJ,CAjBS,kDAkBT,SAAS,aAAa,EAAG,MAAO,CAC5B,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,EACtB,KAAK,UAAU,OAAO,EACtB,KAAK,UAAU,OAAO,EACtB,KAAK,UAAU,OAAO,EACtB,KAAK,UAAU,OAAO,EACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OAAQ,CAC1B,mBAAmB,EAAG,KAAK,EAC3B,KACJ,CACA,KAAK,UAAU,OAAO,EAAG,CACrB,cAAc,CAAC,EACf,KACJ,CACA,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,WACtB,KAAK,UAAU,OAAO,WAAY,CAC9B,oBAAoB,EAAG,KAAK,EAC5B,KACJ,CACA,KAAK,UAAU,OAAO,GAAI,CACtB,eAAe,CAAC,EAChB,KACJ,CACA,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CACtB,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CACtB,2BAA2B,CAAC,EAC5B,KACJ,CACA,KAAK,UAAU,OAAO,GAAI,CACtB,eAAe,CAAC,EAChB,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,iBAAiB,EAAG,KAAK,EACzB,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,iBAAiB,EAAG,KAAK,EACzB,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,iBAAiB,CAAC,EAClB,KACJ,CACA,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,QAAS,CAC3B,mBAAmB,EAAG,KAAK,EAC3B,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,QAAS,CACL,oBAAoB,EAAG,KAAK,CAChC,CACJ,CACJ,CApGS,oCAqGT,SAAS,UAAU,EAAG,MAAO,CACzB,GAAI,EAAE,uBAAuB,OAAS,EAAG,CACrC,cAAc,EAAG,KAAK,CAC1B,KACK,CACD,YAAY,EAAG,KAAK,CACxB,CACJ,CAPS,8BAUT,SAAS,aAAa,EAAG,MAAO,CAC5B,IAAI,GACJ,GAAI,MAAM,QAAU,UAAU,OAAO,OAAQ,EACxC,GAAK,EAAE,iBAAmB,MAAQ,KAAO,OAAS,OAAS,GAAG,KAAK,EAAG,EAAE,aAAa,OAAO,CACjG,CACA,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,EAAE,qBACxB,CAPS,oCAQT,SAAS,UAAU,EAAG,MAAO,CACzB,EAAE,KAAK,MAAO,iBAAiB,IAAI,kCAAkC,EACrE,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,EAAE,sBACpB,EAAE,MAAM,KAAK,CACjB,CALS,8BAQT,SAAS,iBAAiB,EAAG,MAAO,CAChC,GAAI,qBAAqB,IAAI,EAAE,aAAa,YAAY,EAAG,CACvD,EAAE,uBAAuB,OAAS,EAClC,EAAE,sCAAwC,MAC1C,EAAE,sBAAwB,EAAE,cAC5B,EAAE,cAAgB,cAAc,cAChC,OAAQ,MAAM,KAAM,CAChB,KAAK,WAAW,UAAU,UAAW,CACjC,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,KAAK,WAAW,UAAU,qBAAsB,CAC5C,+BAA+B,EAAG,KAAK,EACvC,KACJ,CAEJ,CACJ,KACK,CACD,aAAa,EAAG,KAAK,CACzB,CACJ,CArBS,4CAsBT,SAAS,uBAAuB,EAAG,MAAO,CACtC,EAAE,aAAa,wBAAwB,EACvC,EAAE,yBAAyB,aAAa,EACxC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,cAAgB,cAAc,UACpC,CALS,wDAMT,SAAS,wBAAwB,EAAG,MAAO,CACvC,EAAE,aAAa,wBAAwB,EACvC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,cAAgB,cAAc,eACpC,CAJS,0DAKT,SAAS,mBAAmB,EAAG,MAAO,CAClC,EAAE,aAAa,wBAAwB,EACvC,EAAE,mBAAmB,UAAU,UAAU,SAAU,UAAU,OAAO,QAAQ,EAC5E,EAAE,cAAgB,cAAc,gBAChC,sBAAsB,EAAG,KAAK,CAClC,CALS,gDAMT,SAAS,qBAAqB,EAAG,MAAO,CACpC,EAAE,aAAa,wBAAwB,EACvC,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,cAAgB,cAAc,aACpC,CAJS,oDAKT,SAAS,kBAAkB,EAAG,MAAO,CACjC,EAAE,aAAa,wBAAwB,EACvC,EAAE,mBAAmB,UAAU,UAAU,MAAO,UAAU,OAAO,KAAK,EACtE,EAAE,cAAgB,cAAc,cAChC,oBAAoB,EAAG,KAAK,CAChC,CALS,8CAMT,SAAS,qBAAqB,EAAG,MAAO,CACpC,GAAI,EAAE,aAAa,gBAAgB,UAAU,OAAO,KAAK,EAAG,CACxD,EAAE,aAAa,sBAAsB,UAAU,OAAO,KAAK,EAC3D,EAAE,oBAAoB,EACtB,EAAE,iBAAiB,KAAK,CAC5B,CACJ,CANS,oDAOT,SAAS,qBAAqB,EAAG,MAAO,CACpC,GAAI,cAAc,KAAK,EAAG,CACtB,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,CAC7C,KACK,CACD,aAAa,EAAG,KAAK,CACzB,CACA,MAAM,eAAiB,IAC3B,CARS,oDAST,SAAS,oBAAoB,EAAG,MAAO,CACnC,GAAI,CAAC,EAAE,aAAe,EAAE,aAAa,YAAc,EAAG,CAClD,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,YAAc,EAAE,aAAa,QAC/B,EAAE,aAAa,IAAI,CACvB,CACJ,CANS,kDAOT,SAAS,gBAAgB,EAAG,MAAO,CAC/B,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CACtB,kBAAkB,EAAG,KAAK,EAC1B,KACJ,CACA,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,SAAU,CAC5B,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,IAAK,CACvB,mBAAmB,EAAG,KAAK,EAC3B,KACJ,CACA,KAAK,UAAU,OAAO,KAAM,CACxB,oBAAoB,EAAG,KAAK,EAC5B,KACJ,CACA,KAAK,UAAU,OAAO,MAAO,CACzB,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MAAO,CACzB,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,KAAK,UAAU,OAAO,MAAO,CACzB,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,KAAK,UAAU,OAAO,QAAS,CAC3B,uBAAuB,EAAG,KAAK,EAC/B,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,wBAAwB,EAAG,KAAK,EAChC,KACJ,CACA,QAAS,CACL,aAAa,EAAG,KAAK,CACzB,CACJ,CACJ,CAhDS,0CAiDT,SAAS,cAAc,EAAG,MAAO,CAC7B,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,MAAO,CACzB,GAAI,EAAE,aAAa,gBAAgB,UAAU,OAAO,KAAK,EAAG,CACxD,EAAE,aAAa,sBAAsB,UAAU,OAAO,KAAK,EAC3D,EAAE,oBAAoB,CAC1B,CACA,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,GAAI,CAEtB,KACJ,CACA,QAAS,CACL,aAAa,EAAG,KAAK,CACzB,CACJ,CACJ,CA/BS,sCAgCT,SAAS,aAAa,EAAG,MAAO,CAC5B,MAAM,0BAA4B,EAAE,uBACpC,EAAE,uBAAyB,KAE3B,WAAW,EAAG,KAAK,EACnB,EAAE,uBAAyB,yBAC/B,CANS,oCAST,SAAS,+BAA+B,EAAG,MAAO,CAC9C,EAAE,uBAAuB,KAAK,KAAK,CACvC,CAFS,wEAGT,SAAS,qBAAqB,EAAG,MAAO,CACpC,EAAE,uBAAuB,KAAK,KAAK,EACnC,EAAE,sCAAwC,IAC9C,CAHS,oDAIT,SAAS,iBAAiB,EAAG,MAAO,CAChC,IAAI,EAAI,EACR,GAAI,EAAE,sCAAuC,CACzC,KAAO,EAAI,EAAE,uBAAuB,OAAQ,IAAK,CAC7C,aAAa,EAAG,EAAE,uBAAuB,CAAC,CAAC,CAC/C,CACJ,KACK,CACD,KAAO,EAAI,EAAE,uBAAuB,OAAQ,IAAK,CAC7C,EAAE,kBAAkB,EAAE,uBAAuB,CAAC,CAAC,CACnD,CACJ,CACA,EAAE,cAAgB,EAAE,sBACpB,EAAE,cAAc,KAAK,CACzB,CAdS,4CAiBT,MAAM,oBAAsB,IAAI,IAAI,CAAC,UAAU,OAAO,QAAS,UAAU,OAAO,IAAK,UAAU,OAAO,SAAU,UAAU,OAAO,MAAO,UAAU,OAAO,GAAI,UAAU,OAAO,MAAO,UAAU,OAAO,GAAI,UAAU,OAAO,MAAO,UAAU,OAAO,EAAE,CAAC,EACtP,SAAS,kBAAkB,EAAG,MAAO,CACjC,MAAM,GAAK,MAAM,MACjB,GAAI,oBAAoB,IAAI,EAAE,EAAG,CAC7B,GAAI,EAAE,aAAa,gBAAgB,UAAU,OAAO,OAAO,EAAG,CAC1D,EAAE,aAAa,uBAAuB,EACtC,EAAE,aAAa,sBAAsB,UAAU,OAAO,OAAO,EAC7D,EAAE,yBAAyB,kBAAkB,EAC7C,EAAE,cAAgB,cAAc,SAChC,gBAAgB,EAAG,KAAK,CAC5B,CACJ,KACK,CACD,eAAe,EAAG,KAAK,CAC3B,CACJ,CAdS,8CAeT,SAAS,gBAAgB,EAAG,MAAO,CAC/B,MAAM,GAAK,MAAM,MACjB,OAAQ,GAAI,CACR,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,MAAO,CACzB,GAAI,EAAE,aAAa,gBAAgB,UAAU,OAAO,OAAO,EAAG,CAC1D,EAAE,aAAa,uBAAuB,EACtC,EAAE,aAAa,sBAAsB,UAAU,OAAO,OAAO,EAC7D,EAAE,yBAAyB,kBAAkB,EAC7C,EAAE,cAAgB,cAAc,SAChC,GAAI,KAAO,UAAU,OAAO,MAAO,CAC/B,cAAc,EAAG,KAAK,CAC1B,CACJ,CACA,KACJ,CACA,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,GAAI,CAEtB,KACJ,CACA,QAAS,CACL,aAAa,EAAG,KAAK,CACzB,CACJ,CACJ,CAjCS,0CAoCT,SAAS,sBAAsB,EAAG,MAAO,CACrC,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,KAAM,CACxB,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,IAAK,CACvB,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,MAAM,eAAiB,KACvB,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,QAAS,CACL,mBAAmB,EAAG,KAAK,CAC/B,CACJ,CACJ,CAnBS,sDAoBT,SAAS,oBAAoB,EAAG,MAAO,CACnC,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,SAAU,CAC5B,GAAI,EAAE,aAAa,eAAiB,UAAU,OAAO,SAAU,CAC3D,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,QACpC,CACA,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,KAAK,UAAU,OAAO,IAAK,CAEvB,KACJ,CACA,QAAS,CACL,mBAAmB,EAAG,KAAK,CAC/B,CACJ,CACJ,CArBS,kDAsBT,SAAS,mBAAmB,EAAG,MAAO,CAClC,GAAI,EAAE,aAAa,eAAiB,UAAU,OAAO,SAAU,CAC3D,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,SAChC,EAAE,cAAc,KAAK,CACzB,CACJ,CANS,gDAST,SAAS,oBAAoB,EAAG,MAAO,CACnC,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,GAAI,CACtB,EAAE,aAAa,4BAA4B,EAC3C,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,cAAgB,cAAc,OAChC,KACJ,CACA,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CACtB,EAAE,aAAa,4BAA4B,EAC3C,EAAE,mBAAmB,UAAU,UAAU,GAAI,UAAU,OAAO,EAAE,EAChE,EAAE,cAAgB,cAAc,OAChC,cAAc,EAAG,KAAK,EACtB,KACJ,CACA,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MAAO,CACzB,GAAI,EAAE,aAAa,gCAAgC,EAAG,CAClD,EAAE,aAAa,4BAA4B,EAC3C,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,SAChC,gBAAgB,EAAG,KAAK,CAC5B,CACA,KACJ,CACA,QAAS,CACL,gBAAgB,EAAG,KAAK,CAC5B,CACJ,CACJ,CAlCS,kDAmCT,SAAS,kBAAkB,EAAG,MAAO,CACjC,MAAM,GAAK,MAAM,MACjB,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MAAO,CACzB,GAAI,EAAE,aAAa,gBAAgB,EAAE,EAAG,CACpC,EAAE,aAAa,4BAA4B,EAC3C,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,QACpC,CACA,KACJ,CACA,KAAK,UAAU,OAAO,MAAO,CACzB,GAAI,EAAE,aAAa,gCAAgC,EAAG,CAClD,EAAE,aAAa,4BAA4B,EAC3C,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,SAChC,cAAc,EAAG,KAAK,CAC1B,CACA,KACJ,CACA,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CAEtB,KACJ,CACA,QAAS,CACL,cAAc,EAAG,KAAK,CAC1B,CACJ,CACJ,CArCS,8CAwCT,SAAS,cAAc,EAAG,MAAO,CAC7B,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CACtB,EAAE,aAAa,2BAA2B,EAC1C,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,EAAE,cAAgB,cAAc,QAChC,EAAE,yBAAyB,aAAa,EACxC,KACJ,CACA,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,GAAI,CACtB,GAAI,EAAE,aAAa,gBAAgB,UAAU,OAAO,EAAE,EAAG,CACrD,EAAE,aAAa,2BAA2B,EAC1C,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,cAChC,oBAAoB,EAAG,KAAK,CAChC,CACA,KACJ,CACA,QAAS,CACL,gBAAgB,EAAG,KAAK,CAC5B,CACJ,CACJ,CA7BS,sCA8BT,SAAS,YAAY,EAAG,MAAO,CAC3B,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,GAAI,CACtB,GAAI,EAAE,aAAa,gBAAgB,UAAU,OAAO,EAAE,EAAG,CACrD,EAAE,aAAa,2BAA2B,EAC1C,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,aACpC,CACA,KACJ,CACA,KAAK,UAAU,OAAO,MAAO,CACzB,GAAI,EAAE,aAAa,gBAAgB,UAAU,OAAO,EAAE,EAAG,CACrD,EAAE,aAAa,2BAA2B,EAC1C,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,cAChC,kBAAkB,EAAG,KAAK,CAC9B,CACA,KACJ,CACA,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MAAO,CACzB,GAAI,EAAE,aAAa,gBAAgB,MAAM,KAAK,GAAK,EAAE,aAAa,gBAAgB,UAAU,OAAO,EAAE,EAAG,CACpG,EAAE,aAAa,2BAA2B,EAC1C,EAAE,aAAa,IAAI,EACnB,EAAE,cAAgB,cAAc,cAChC,kBAAkB,EAAG,KAAK,CAC9B,CACA,KACJ,CACA,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CAEtB,KACJ,CACA,QAAS,CACL,cAAc,EAAG,KAAK,CAC1B,CACJ,CACJ,CA5CS,kCA+CT,SAAS,eAAe,EAAG,MAAO,CAC9B,MAAM,GAAK,MAAM,MACjB,GAAI,oBAAoB,IAAI,EAAE,EAAG,CAC7B,GAAI,EAAE,aAAa,gBAAgB,UAAU,OAAO,EAAE,GAAK,EAAE,aAAa,gBAAgB,UAAU,OAAO,EAAE,EAAG,CAC5G,EAAE,gBAAgB,EAClB,cAAc,EAAG,KAAK,CAC1B,CACJ,KACK,CACD,eAAe,EAAG,KAAK,CAC3B,CACJ,CAXS,wCAYT,SAAS,aAAa,EAAG,MAAO,CAC5B,MAAM,GAAK,MAAM,MACjB,OAAQ,GAAI,CACR,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CACtB,GAAI,EAAE,aAAa,gBAAgB,EAAE,EAAG,CACpC,EAAE,aAAa,uBAAuB,EACtC,EAAE,aAAa,sBAAsB,EAAE,EACvC,EAAE,yBAAyB,kBAAkB,EAC7C,EAAE,cAAgB,cAAc,MACpC,CACA,KACJ,CACA,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,GAAI,CACtB,GAAI,EAAE,aAAa,gBAAgB,EAAE,EAAG,CACpC,EAAE,gBAAgB,EAClB,YAAY,EAAG,KAAK,CACxB,CACA,KACJ,CACA,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,IACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,KAAM,CAExB,KACJ,CACA,QAAS,CACL,aAAa,EAAG,KAAK,CACzB,CACJ,CACJ,CApCS,oCAuCT,SAAS,iBAAiB,EAAG,MAAO,CAChC,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,KAAM,CACxB,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,OAAQ,CAC1B,GAAI,EAAE,aAAa,eAAiB,UAAU,OAAO,OAAQ,CACzD,EAAE,aAAa,IAAI,CACvB,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,GAAI,EAAE,aAAa,eAAiB,UAAU,OAAO,OAAQ,CACzD,EAAE,aAAa,IAAI,CACvB,CACA,GAAI,EAAE,aAAa,eAAiB,UAAU,OAAO,SAAU,CAC3D,EAAE,aAAa,IAAI,CACvB,CACA,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,KACJ,CACA,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,OAAQ,CAC1B,GAAI,EAAE,aAAa,iBAAiB,UAAU,OAAO,MAAM,EAAG,CAC1D,EAAE,aAAa,sBAAsB,UAAU,OAAO,MAAM,EAC5D,EAAE,oBAAoB,EACtB,GAAI,MAAM,QAAU,UAAU,OAAO,OAAQ,CACzC,EAAE,iBAAiB,KAAK,CAC5B,CACJ,CACA,KACJ,CACA,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,SAAU,CAC5B,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,QAEJ,CACJ,CA5CS,4CA6CT,SAAS,eAAe,EAAG,MAAO,CAC9B,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,SAAU,CAC5B,GAAI,EAAE,aAAa,SAAW,GAC1B,EAAE,aAAa,eAAiB,UAAU,OAAO,QACjD,EAAE,aAAa,OAAO,EAAE,aAAa,SAAW,CAAC,IAAM,UAAU,OAAO,SAAU,CAClF,EAAE,aAAa,IAAI,CACvB,CACA,GAAI,EAAE,aAAa,eAAiB,UAAU,OAAO,SAAU,CAC3D,EAAE,aAAa,IAAI,CACvB,CACA,KACJ,CACA,KAAK,UAAU,OAAO,OAAQ,CAC1B,GAAI,EAAE,aAAa,eAAiB,UAAU,OAAO,OAAQ,CACzD,EAAE,aAAa,IAAI,CACvB,CACA,KACJ,CACA,KAAK,UAAU,OAAO,OAAQ,CAC1B,GAAI,EAAE,aAAa,iBAAiB,UAAU,OAAO,MAAM,EAAG,CAC1D,EAAE,aAAa,sBAAsB,UAAU,OAAO,MAAM,EAC5D,EAAE,oBAAoB,CAC1B,CACA,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,qBAAqB,EAAG,KAAK,EAC7B,KACJ,CACA,QAEJ,CACJ,CAjCS,wCAoCT,SAAS,wBAAwB,EAAG,MAAO,CACvC,MAAM,GAAK,MAAM,MACjB,GAAI,KAAO,UAAU,OAAO,SACxB,KAAO,UAAU,OAAO,OACxB,KAAO,UAAU,OAAO,OACxB,KAAO,UAAU,OAAO,OACxB,KAAO,UAAU,OAAO,OACxB,KAAO,UAAU,OAAO,IACxB,KAAO,UAAU,OAAO,IACxB,KAAO,UAAU,OAAO,GAAI,CAC5B,EAAE,aAAa,sBAAsB,UAAU,OAAO,MAAM,EAC5D,EAAE,oBAAoB,EACtB,EAAE,iBAAiB,KAAK,CAC5B,KACK,CACD,iBAAiB,EAAG,KAAK,CAC7B,CACJ,CAjBS,0DAkBT,SAAS,sBAAsB,EAAG,MAAO,CACrC,MAAM,GAAK,MAAM,MACjB,GAAI,KAAO,UAAU,OAAO,SACxB,KAAO,UAAU,OAAO,OACxB,KAAO,UAAU,OAAO,OACxB,KAAO,UAAU,OAAO,OACxB,KAAO,UAAU,OAAO,OACxB,KAAO,UAAU,OAAO,IACxB,KAAO,UAAU,OAAO,IACxB,KAAO,UAAU,OAAO,GAAI,CAC5B,GAAI,EAAE,aAAa,gBAAgB,EAAE,EAAG,CACpC,EAAE,aAAa,sBAAsB,UAAU,OAAO,MAAM,EAC5D,EAAE,oBAAoB,EACtB,EAAE,SAAS,KAAK,CACpB,CACJ,KACK,CACD,eAAe,EAAG,KAAK,CAC3B,CACJ,CAnBS,sDAsBT,SAAS,mBAAmB,EAAG,MAAO,CAClC,OAAQ,MAAM,MAAO,CAEjB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,KACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,OACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,MAAO,CACzB,eAAe,EAAG,KAAK,EACvB,KACJ,CAEA,KAAK,UAAU,OAAO,QACtB,KAAK,UAAU,OAAO,SACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MACtB,KAAK,UAAU,OAAO,MAAO,CACzB,EAAE,uBAAuB,CAAC,EAAI,cAAc,SAC5C,EAAE,cAAgB,cAAc,SAChC,gBAAgB,EAAG,KAAK,EACxB,KACJ,CACA,KAAK,UAAU,OAAO,IAAK,CACvB,EAAE,uBAAuB,CAAC,EAAI,cAAc,gBAC5C,EAAE,cAAgB,cAAc,gBAChC,sBAAsB,EAAG,KAAK,EAC9B,KACJ,CACA,KAAK,UAAU,OAAO,GAAI,CACtB,EAAE,uBAAuB,CAAC,EAAI,cAAc,cAC5C,EAAE,cAAgB,cAAc,cAChC,oBAAoB,EAAG,KAAK,EAC5B,KACJ,CACA,KAAK,UAAU,OAAO,GACtB,KAAK,UAAU,OAAO,GAAI,CACtB,EAAE,uBAAuB,CAAC,EAAI,cAAc,OAC5C,EAAE,cAAgB,cAAc,OAChC,cAAc,EAAG,KAAK,EACtB,KACJ,CACA,QAAS,CACL,EAAE,uBAAuB,CAAC,EAAI,cAAc,QAC5C,EAAE,cAAgB,cAAc,QAChC,eAAe,EAAG,KAAK,CAC3B,CACJ,CACJ,CApDS,gDAqDT,SAAS,iBAAiB,EAAG,MAAO,CAChC,GAAI,MAAM,QAAU,UAAU,OAAO,SAAU,CAC3C,qBAAqB,EAAG,KAAK,CACjC,CACJ,CAJS,4CAKT,SAAS,cAAc,EAAG,MAAO,CAC7B,GAAI,EAAE,aAAa,UAAY,EAAG,CAC9B,EAAE,aAAa,sBAAsB,UAAU,OAAO,QAAQ,EAC9D,EAAE,yBAAyB,kBAAkB,EAC7C,EAAE,uBAAuB,MAAM,EAC/B,EAAE,oBAAoB,EACtB,EAAE,MAAM,KAAK,CACjB,KACK,CACD,YAAY,EAAG,KAAK,CACxB,CACJ,CAXS,sCAcT,SAAS,kBAAkB,EAAG,MAAO,CACjC,GAAI,MAAM,QAAU,UAAU,OAAO,KAAM,CACvC,eAAe,EAAG,KAAK,CAC3B,KACK,CACD,eAAe,EAAG,KAAK,CAC3B,CACJ,CAPS,8CAQT,SAAS,gBAAgB,EAAG,MAAO,CAC/B,IAAI,GACJ,GAAI,MAAM,QAAU,UAAU,OAAO,KAAM,CACvC,GAAI,CAAC,EAAE,gBAAiB,CACpB,EAAE,cAAgB,cAAc,gBACpC,CAGA,GAAI,EAAE,QAAQ,wBAA0B,EAAE,aAAa,OAAO,CAAC,IAAM,UAAU,OAAO,KAAM,CACxF,EAAE,gBAAgB,EAAE,aAAa,MAAM,CAAC,EAAG,KAAK,EAEhD,MAAM,YAAc,EAAE,aAAa,MAAM,CAAC,EAC1C,GAAI,aAAe,GAAG,GAAK,EAAE,YAAY,0BAA0B,WAAW,KAAO,MAAQ,KAAO,OAAS,OAAS,GAAG,QAAS,CAC9H,EAAE,gBAAgB,YAAa,KAAK,CACxC,CACJ,CACJ,KACK,CACD,eAAe,EAAG,KAAK,CAC3B,CACJ,CApBS,0CAqBT,SAAS,eAAe,EAAG,MAAO,CAC9B,EAAE,cAAgB,cAAc,QAChC,WAAW,EAAG,KAAK,CACvB,CAHS,wCAMT,SAAS,mBAAmB,EAAG,MAAO,CAClC,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,KAAM,CACxB,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,KACJ,CACA,KAAK,UAAU,OAAO,MAAO,CACzB,EAAE,eAAe,MAAO,UAAU,GAAG,IAAI,EACzC,MAAM,eAAiB,KACvB,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,QAEJ,CACJ,CAtBS,gDAuBT,SAAS,iBAAiB,EAAG,MAAO,CAChC,GAAI,MAAM,QAAU,UAAU,OAAO,UAAY,CAAC,EAAE,aAAa,yBAAyB,EAAG,CACzF,EAAE,aAAa,IAAI,EACnB,GAAI,CAAC,EAAE,iBAAmB,EAAE,aAAa,eAAiB,UAAU,OAAO,SAAU,CACjF,EAAE,cAAgB,cAAc,cACpC,CACJ,CACJ,CAPS,4CAUT,SAAS,sBAAsB,EAAG,MAAO,CACrC,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,KAAM,CACxB,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,QAEJ,CACJ,CAbS,sDAcT,SAAS,oBAAoB,EAAG,MAAO,CACnC,GAAI,MAAM,QAAU,UAAU,OAAO,KAAM,CACvC,EAAE,cAAgB,cAAc,oBACpC,CACJ,CAJS,kDAOT,SAAS,uBAAuB,EAAG,MAAO,CACtC,GAAI,MAAM,QAAU,UAAU,OAAO,KAAM,CACvC,eAAe,EAAG,KAAK,CAC3B,KACK,CACD,oBAAoB,EAAG,KAAK,CAChC,CACJ,CAPS,wDAQT,SAAS,oBAAoB,EAAG,MAAO,CACnC,EAAE,cAAgB,cAAc,QAChC,WAAW,EAAG,KAAK,CACvB,CAHS,kDAMT,SAAS,2BAA2B,EAAG,MAAO,CAC1C,OAAQ,MAAM,MAAO,CACjB,KAAK,UAAU,OAAO,KAAM,CACxB,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,KAAK,UAAU,OAAO,SAAU,CAC5B,eAAe,EAAG,KAAK,EACvB,KACJ,CACA,QAEJ,CACJ,CAbS,gEAgBT,SAAS,8BAA8B,EAAG,MAAO,CAC7C,MAAM,MAAQ,QAAQ,sBACtB,EAAE,kBAAkB,KAAK,CAC7B,CAHS,sEAIT,SAAS,0BAA0B,EAAG,MAAO,CACzC,EAAE,kBAAkB,KAAK,EACzB,EAAE,WAAa,KACnB,CAHS,8DAIT,SAAS,+BAA+B,EAAG,CACvC,MAAO,EAAE,YAAY,gBAAgB,EAAE,aAAa,OAAO,IAAM,UAAU,GAAG,MAC1E,CAAC,EAAE,oBAAoB,EAAE,aAAa,aAAc,EAAE,aAAa,OAAO,EAAG,CAC7E,EAAE,aAAa,IAAI,CACvB,CACJ,CALS,wEAMT,SAAS,yBAAyB,EAAG,MAAO,CACxC,GAAI,eAAe,WAAW,KAAK,EAAG,CAClC,+BAA+B,CAAC,EAChC,EAAE,+BAA+B,KAAK,CAC1C,KACK,CACD,MAAM,QAAU,EAAE,2BAA2B,EAC7C,MAAM,UAAY,EAAE,YAAY,gBAAgB,OAAO,EACvD,GAAI,YAAc,UAAU,GAAG,OAAQ,CACnC,eAAe,uBAAuB,KAAK,CAC/C,SACS,YAAc,UAAU,GAAG,IAAK,CACrC,eAAe,sBAAsB,KAAK,EAC1C,eAAe,oBAAoB,KAAK,CAC5C,CACA,eAAe,oBAAoB,KAAK,EACxC,GAAI,MAAM,YAAa,CACnB,EAAE,eAAe,MAAO,SAAS,CACrC,KACK,CACD,EAAE,eAAe,MAAO,SAAS,CACrC,CACA,MAAM,eAAiB,IAC3B,CACJ,CAxBS,4DAyBT,SAAS,uBAAuB,EAAG,MAAO,CACtC,GAAI,MAAM,QAAU,UAAU,OAAO,GAAK,MAAM,QAAU,UAAU,OAAO,GAAI,CAC3E,+BAA+B,CAAC,EAChC,EAAE,6BAA6B,KAAK,EACpC,MACJ,CACA,QAAS,EAAI,EAAE,aAAa,SAAU,EAAI,EAAG,IAAK,CAC9C,MAAM,QAAU,EAAE,aAAa,MAAM,CAAC,EACtC,GAAI,EAAE,YAAY,gBAAgB,OAAO,IAAM,UAAU,GAAG,KAAM,CAC9D,EAAE,6BAA6B,KAAK,EACpC,KACJ,CACA,MAAM,QAAU,EAAE,YAAY,WAAW,OAAO,EAChD,GAAI,QAAQ,YAAY,IAAM,MAAM,QAAS,CAEzC,MAAM,QAAU,QAChB,EAAE,aAAa,gBAAgB,CAAC,EAChC,KACJ,CACJ,CACJ,CApBS","names":["InsertionMode"],"sources":["/Users/markbakker/RiderProjects/mycrm/node_modules/.pnpm/parse5@7.1.2/node_modules/parse5/dist/cjs/parser/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Parser = void 0;\nconst index_js_1 = require(\"../tokenizer/index.js\");\nconst open_element_stack_js_1 = require(\"./open-element-stack.js\");\nconst formatting_element_list_js_1 = require(\"./formatting-element-list.js\");\nconst default_js_1 = require(\"../tree-adapters/default.js\");\nconst doctype = require(\"../common/doctype.js\");\nconst foreignContent = require(\"../common/foreign-content.js\");\nconst error_codes_js_1 = require(\"../common/error-codes.js\");\nconst unicode = require(\"../common/unicode.js\");\nconst html_js_1 = require(\"../common/html.js\");\nconst token_js_1 = require(\"../common/token.js\");\n//Misc constants\nconst HIDDEN_INPUT_TYPE = 'hidden';\n//Adoption agency loops iteration count\nconst AA_OUTER_LOOP_ITER = 8;\nconst AA_INNER_LOOP_ITER = 3;\n//Insertion modes\nvar InsertionMode;\n(function (InsertionMode) {\n    InsertionMode[InsertionMode[\"INITIAL\"] = 0] = \"INITIAL\";\n    InsertionMode[InsertionMode[\"BEFORE_HTML\"] = 1] = \"BEFORE_HTML\";\n    InsertionMode[InsertionMode[\"BEFORE_HEAD\"] = 2] = \"BEFORE_HEAD\";\n    InsertionMode[InsertionMode[\"IN_HEAD\"] = 3] = \"IN_HEAD\";\n    InsertionMode[InsertionMode[\"IN_HEAD_NO_SCRIPT\"] = 4] = \"IN_HEAD_NO_SCRIPT\";\n    InsertionMode[InsertionMode[\"AFTER_HEAD\"] = 5] = \"AFTER_HEAD\";\n    InsertionMode[InsertionMode[\"IN_BODY\"] = 6] = \"IN_BODY\";\n    InsertionMode[InsertionMode[\"TEXT\"] = 7] = \"TEXT\";\n    InsertionMode[InsertionMode[\"IN_TABLE\"] = 8] = \"IN_TABLE\";\n    InsertionMode[InsertionMode[\"IN_TABLE_TEXT\"] = 9] = \"IN_TABLE_TEXT\";\n    InsertionMode[InsertionMode[\"IN_CAPTION\"] = 10] = \"IN_CAPTION\";\n    InsertionMode[InsertionMode[\"IN_COLUMN_GROUP\"] = 11] = \"IN_COLUMN_GROUP\";\n    InsertionMode[InsertionMode[\"IN_TABLE_BODY\"] = 12] = \"IN_TABLE_BODY\";\n    InsertionMode[InsertionMode[\"IN_ROW\"] = 13] = \"IN_ROW\";\n    InsertionMode[InsertionMode[\"IN_CELL\"] = 14] = \"IN_CELL\";\n    InsertionMode[InsertionMode[\"IN_SELECT\"] = 15] = \"IN_SELECT\";\n    InsertionMode[InsertionMode[\"IN_SELECT_IN_TABLE\"] = 16] = \"IN_SELECT_IN_TABLE\";\n    InsertionMode[InsertionMode[\"IN_TEMPLATE\"] = 17] = \"IN_TEMPLATE\";\n    InsertionMode[InsertionMode[\"AFTER_BODY\"] = 18] = \"AFTER_BODY\";\n    InsertionMode[InsertionMode[\"IN_FRAMESET\"] = 19] = \"IN_FRAMESET\";\n    InsertionMode[InsertionMode[\"AFTER_FRAMESET\"] = 20] = \"AFTER_FRAMESET\";\n    InsertionMode[InsertionMode[\"AFTER_AFTER_BODY\"] = 21] = \"AFTER_AFTER_BODY\";\n    InsertionMode[InsertionMode[\"AFTER_AFTER_FRAMESET\"] = 22] = \"AFTER_AFTER_FRAMESET\";\n})(InsertionMode || (InsertionMode = {}));\nconst BASE_LOC = {\n    startLine: -1,\n    startCol: -1,\n    startOffset: -1,\n    endLine: -1,\n    endCol: -1,\n    endOffset: -1,\n};\nconst TABLE_STRUCTURE_TAGS = new Set([html_js_1.TAG_ID.TABLE, html_js_1.TAG_ID.TBODY, html_js_1.TAG_ID.TFOOT, html_js_1.TAG_ID.THEAD, html_js_1.TAG_ID.TR]);\nconst defaultParserOptions = {\n    scriptingEnabled: true,\n    sourceCodeLocationInfo: false,\n    treeAdapter: default_js_1.defaultTreeAdapter,\n    onParseError: null,\n};\n//Parser\nclass Parser {\n    constructor(options, document, fragmentContext = null, scriptHandler = null) {\n        this.fragmentContext = fragmentContext;\n        this.scriptHandler = scriptHandler;\n        this.currentToken = null;\n        this.stopped = false;\n        this.insertionMode = InsertionMode.INITIAL;\n        this.originalInsertionMode = InsertionMode.INITIAL;\n        this.headElement = null;\n        this.formElement = null;\n        /** Indicates that the current node is not an element in the HTML namespace */\n        this.currentNotInHTML = false;\n        /**\n         * The template insertion mode stack is maintained from the left.\n         * Ie. the topmost element will always have index 0.\n         */\n        this.tmplInsertionModeStack = [];\n        this.pendingCharacterTokens = [];\n        this.hasNonWhitespacePendingCharacterToken = false;\n        this.framesetOk = true;\n        this.skipNextNewLine = false;\n        this.fosterParentingEnabled = false;\n        this.options = Object.assign(Object.assign({}, defaultParserOptions), options);\n        this.treeAdapter = this.options.treeAdapter;\n        this.onParseError = this.options.onParseError;\n        // Always enable location info if we report parse errors.\n        if (this.onParseError) {\n            this.options.sourceCodeLocationInfo = true;\n        }\n        this.document = document !== null && document !== void 0 ? document : this.treeAdapter.createDocument();\n        this.tokenizer = new index_js_1.Tokenizer(this.options, this);\n        this.activeFormattingElements = new formatting_element_list_js_1.FormattingElementList(this.treeAdapter);\n        this.fragmentContextID = fragmentContext ? (0, html_js_1.getTagID)(this.treeAdapter.getTagName(fragmentContext)) : html_js_1.TAG_ID.UNKNOWN;\n        this._setContextModes(fragmentContext !== null && fragmentContext !== void 0 ? fragmentContext : this.document, this.fragmentContextID);\n        this.openElements = new open_element_stack_js_1.OpenElementStack(this.document, this.treeAdapter, this);\n    }\n    // API\n    static parse(html, options) {\n        const parser = new this(options);\n        parser.tokenizer.write(html, true);\n        return parser.document;\n    }\n    static getFragmentParser(fragmentContext, options) {\n        const opts = Object.assign(Object.assign({}, defaultParserOptions), options);\n        //NOTE: use a <template> element as the fragment context if no context element was provided,\n        //so we will parse in a \"forgiving\" manner\n        fragmentContext !== null && fragmentContext !== void 0 ? fragmentContext : (fragmentContext = opts.treeAdapter.createElement(html_js_1.TAG_NAMES.TEMPLATE, html_js_1.NS.HTML, []));\n        //NOTE: create a fake element which will be used as the `document` for fragment parsing.\n        //This is important for jsdom, where a new `document` cannot be created. This led to\n        //fragment parsing messing with the main `document`.\n        const documentMock = opts.treeAdapter.createElement('documentmock', html_js_1.NS.HTML, []);\n        const parser = new this(opts, documentMock, fragmentContext);\n        if (parser.fragmentContextID === html_js_1.TAG_ID.TEMPLATE) {\n            parser.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE);\n        }\n        parser._initTokenizerForFragmentParsing();\n        parser._insertFakeRootElement();\n        parser._resetInsertionMode();\n        parser._findFormInFragmentContext();\n        return parser;\n    }\n    getFragment() {\n        const rootElement = this.treeAdapter.getFirstChild(this.document);\n        const fragment = this.treeAdapter.createDocumentFragment();\n        this._adoptNodes(rootElement, fragment);\n        return fragment;\n    }\n    //Errors\n    _err(token, code, beforeToken) {\n        var _a;\n        if (!this.onParseError)\n            return;\n        const loc = (_a = token.location) !== null && _a !== void 0 ? _a : BASE_LOC;\n        const err = {\n            code,\n            startLine: loc.startLine,\n            startCol: loc.startCol,\n            startOffset: loc.startOffset,\n            endLine: beforeToken ? loc.startLine : loc.endLine,\n            endCol: beforeToken ? loc.startCol : loc.endCol,\n            endOffset: beforeToken ? loc.startOffset : loc.endOffset,\n        };\n        this.onParseError(err);\n    }\n    //Stack events\n    onItemPush(node, tid, isTop) {\n        var _a, _b;\n        (_b = (_a = this.treeAdapter).onItemPush) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n        if (isTop && this.openElements.stackTop > 0)\n            this._setContextModes(node, tid);\n    }\n    onItemPop(node, isTop) {\n        var _a, _b;\n        if (this.options.sourceCodeLocationInfo) {\n            this._setEndLocation(node, this.currentToken);\n        }\n        (_b = (_a = this.treeAdapter).onItemPop) === null || _b === void 0 ? void 0 : _b.call(_a, node, this.openElements.current);\n        if (isTop) {\n            let current;\n            let currentTagId;\n            if (this.openElements.stackTop === 0 && this.fragmentContext) {\n                current = this.fragmentContext;\n                currentTagId = this.fragmentContextID;\n            }\n            else {\n                ({ current, currentTagId } = this.openElements);\n            }\n            this._setContextModes(current, currentTagId);\n        }\n    }\n    _setContextModes(current, tid) {\n        const isHTML = current === this.document || this.treeAdapter.getNamespaceURI(current) === html_js_1.NS.HTML;\n        this.currentNotInHTML = !isHTML;\n        this.tokenizer.inForeignNode = !isHTML && !this._isIntegrationPoint(tid, current);\n    }\n    _switchToTextParsing(currentToken, nextTokenizerState) {\n        this._insertElement(currentToken, html_js_1.NS.HTML);\n        this.tokenizer.state = nextTokenizerState;\n        this.originalInsertionMode = this.insertionMode;\n        this.insertionMode = InsertionMode.TEXT;\n    }\n    switchToPlaintextParsing() {\n        this.insertionMode = InsertionMode.TEXT;\n        this.originalInsertionMode = InsertionMode.IN_BODY;\n        this.tokenizer.state = index_js_1.TokenizerMode.PLAINTEXT;\n    }\n    //Fragment parsing\n    _getAdjustedCurrentElement() {\n        return this.openElements.stackTop === 0 && this.fragmentContext\n            ? this.fragmentContext\n            : this.openElements.current;\n    }\n    _findFormInFragmentContext() {\n        let node = this.fragmentContext;\n        while (node) {\n            if (this.treeAdapter.getTagName(node) === html_js_1.TAG_NAMES.FORM) {\n                this.formElement = node;\n                break;\n            }\n            node = this.treeAdapter.getParentNode(node);\n        }\n    }\n    _initTokenizerForFragmentParsing() {\n        if (!this.fragmentContext || this.treeAdapter.getNamespaceURI(this.fragmentContext) !== html_js_1.NS.HTML) {\n            return;\n        }\n        switch (this.fragmentContextID) {\n            case html_js_1.TAG_ID.TITLE:\n            case html_js_1.TAG_ID.TEXTAREA: {\n                this.tokenizer.state = index_js_1.TokenizerMode.RCDATA;\n                break;\n            }\n            case html_js_1.TAG_ID.STYLE:\n            case html_js_1.TAG_ID.XMP:\n            case html_js_1.TAG_ID.IFRAME:\n            case html_js_1.TAG_ID.NOEMBED:\n            case html_js_1.TAG_ID.NOFRAMES:\n            case html_js_1.TAG_ID.NOSCRIPT: {\n                this.tokenizer.state = index_js_1.TokenizerMode.RAWTEXT;\n                break;\n            }\n            case html_js_1.TAG_ID.SCRIPT: {\n                this.tokenizer.state = index_js_1.TokenizerMode.SCRIPT_DATA;\n                break;\n            }\n            case html_js_1.TAG_ID.PLAINTEXT: {\n                this.tokenizer.state = index_js_1.TokenizerMode.PLAINTEXT;\n                break;\n            }\n            default:\n            // Do nothing\n        }\n    }\n    //Tree mutation\n    _setDocumentType(token) {\n        const name = token.name || '';\n        const publicId = token.publicId || '';\n        const systemId = token.systemId || '';\n        this.treeAdapter.setDocumentType(this.document, name, publicId, systemId);\n        if (token.location) {\n            const documentChildren = this.treeAdapter.getChildNodes(this.document);\n            const docTypeNode = documentChildren.find((node) => this.treeAdapter.isDocumentTypeNode(node));\n            if (docTypeNode) {\n                this.treeAdapter.setNodeSourceCodeLocation(docTypeNode, token.location);\n            }\n        }\n    }\n    _attachElementToTree(element, location) {\n        if (this.options.sourceCodeLocationInfo) {\n            const loc = location && Object.assign(Object.assign({}, location), { startTag: location });\n            this.treeAdapter.setNodeSourceCodeLocation(element, loc);\n        }\n        if (this._shouldFosterParentOnInsertion()) {\n            this._fosterParentElement(element);\n        }\n        else {\n            const parent = this.openElements.currentTmplContentOrNode;\n            this.treeAdapter.appendChild(parent, element);\n        }\n    }\n    _appendElement(token, namespaceURI) {\n        const element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n        this._attachElementToTree(element, token.location);\n    }\n    _insertElement(token, namespaceURI) {\n        const element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n        this._attachElementToTree(element, token.location);\n        this.openElements.push(element, token.tagID);\n    }\n    _insertFakeElement(tagName, tagID) {\n        const element = this.treeAdapter.createElement(tagName, html_js_1.NS.HTML, []);\n        this._attachElementToTree(element, null);\n        this.openElements.push(element, tagID);\n    }\n    _insertTemplate(token) {\n        const tmpl = this.treeAdapter.createElement(token.tagName, html_js_1.NS.HTML, token.attrs);\n        const content = this.treeAdapter.createDocumentFragment();\n        this.treeAdapter.setTemplateContent(tmpl, content);\n        this._attachElementToTree(tmpl, token.location);\n        this.openElements.push(tmpl, token.tagID);\n        if (this.options.sourceCodeLocationInfo)\n            this.treeAdapter.setNodeSourceCodeLocation(content, null);\n    }\n    _insertFakeRootElement() {\n        const element = this.treeAdapter.createElement(html_js_1.TAG_NAMES.HTML, html_js_1.NS.HTML, []);\n        if (this.options.sourceCodeLocationInfo)\n            this.treeAdapter.setNodeSourceCodeLocation(element, null);\n        this.treeAdapter.appendChild(this.openElements.current, element);\n        this.openElements.push(element, html_js_1.TAG_ID.HTML);\n    }\n    _appendCommentNode(token, parent) {\n        const commentNode = this.treeAdapter.createCommentNode(token.data);\n        this.treeAdapter.appendChild(parent, commentNode);\n        if (this.options.sourceCodeLocationInfo) {\n            this.treeAdapter.setNodeSourceCodeLocation(commentNode, token.location);\n        }\n    }\n    _insertCharacters(token) {\n        let parent;\n        let beforeElement;\n        if (this._shouldFosterParentOnInsertion()) {\n            ({ parent, beforeElement } = this._findFosterParentingLocation());\n            if (beforeElement) {\n                this.treeAdapter.insertTextBefore(parent, token.chars, beforeElement);\n            }\n            else {\n                this.treeAdapter.insertText(parent, token.chars);\n            }\n        }\n        else {\n            parent = this.openElements.currentTmplContentOrNode;\n            this.treeAdapter.insertText(parent, token.chars);\n        }\n        if (!token.location)\n            return;\n        const siblings = this.treeAdapter.getChildNodes(parent);\n        const textNodeIdx = beforeElement ? siblings.lastIndexOf(beforeElement) : siblings.length;\n        const textNode = siblings[textNodeIdx - 1];\n        //NOTE: if we have a location assigned by another token, then just update the end position\n        const tnLoc = this.treeAdapter.getNodeSourceCodeLocation(textNode);\n        if (tnLoc) {\n            const { endLine, endCol, endOffset } = token.location;\n            this.treeAdapter.updateNodeSourceCodeLocation(textNode, { endLine, endCol, endOffset });\n        }\n        else if (this.options.sourceCodeLocationInfo) {\n            this.treeAdapter.setNodeSourceCodeLocation(textNode, token.location);\n        }\n    }\n    _adoptNodes(donor, recipient) {\n        for (let child = this.treeAdapter.getFirstChild(donor); child; child = this.treeAdapter.getFirstChild(donor)) {\n            this.treeAdapter.detachNode(child);\n            this.treeAdapter.appendChild(recipient, child);\n        }\n    }\n    _setEndLocation(element, closingToken) {\n        if (this.treeAdapter.getNodeSourceCodeLocation(element) && closingToken.location) {\n            const ctLoc = closingToken.location;\n            const tn = this.treeAdapter.getTagName(element);\n            const endLoc = \n            // NOTE: For cases like <p> <p> </p> - First 'p' closes without a closing\n            // tag and for cases like <td> <p> </td> - 'p' closes without a closing tag.\n            closingToken.type === token_js_1.TokenType.END_TAG && tn === closingToken.tagName\n                ? {\n                    endTag: Object.assign({}, ctLoc),\n                    endLine: ctLoc.endLine,\n                    endCol: ctLoc.endCol,\n                    endOffset: ctLoc.endOffset,\n                }\n                : {\n                    endLine: ctLoc.startLine,\n                    endCol: ctLoc.startCol,\n                    endOffset: ctLoc.startOffset,\n                };\n            this.treeAdapter.updateNodeSourceCodeLocation(element, endLoc);\n        }\n    }\n    //Token processing\n    shouldProcessStartTagTokenInForeignContent(token) {\n        // Check that neither current === document, or ns === NS.HTML\n        if (!this.currentNotInHTML)\n            return false;\n        let current;\n        let currentTagId;\n        if (this.openElements.stackTop === 0 && this.fragmentContext) {\n            current = this.fragmentContext;\n            currentTagId = this.fragmentContextID;\n        }\n        else {\n            ({ current, currentTagId } = this.openElements);\n        }\n        if (token.tagID === html_js_1.TAG_ID.SVG &&\n            this.treeAdapter.getTagName(current) === html_js_1.TAG_NAMES.ANNOTATION_XML &&\n            this.treeAdapter.getNamespaceURI(current) === html_js_1.NS.MATHML) {\n            return false;\n        }\n        return (\n        // Check that `current` is not an integration point for HTML or MathML elements.\n        this.tokenizer.inForeignNode ||\n            // If it _is_ an integration point, then we might have to check that it is not an HTML\n            // integration point.\n            ((token.tagID === html_js_1.TAG_ID.MGLYPH || token.tagID === html_js_1.TAG_ID.MALIGNMARK) &&\n                !this._isIntegrationPoint(currentTagId, current, html_js_1.NS.HTML)));\n    }\n    _processToken(token) {\n        switch (token.type) {\n            case token_js_1.TokenType.CHARACTER: {\n                this.onCharacter(token);\n                break;\n            }\n            case token_js_1.TokenType.NULL_CHARACTER: {\n                this.onNullCharacter(token);\n                break;\n            }\n            case token_js_1.TokenType.COMMENT: {\n                this.onComment(token);\n                break;\n            }\n            case token_js_1.TokenType.DOCTYPE: {\n                this.onDoctype(token);\n                break;\n            }\n            case token_js_1.TokenType.START_TAG: {\n                this._processStartTag(token);\n                break;\n            }\n            case token_js_1.TokenType.END_TAG: {\n                this.onEndTag(token);\n                break;\n            }\n            case token_js_1.TokenType.EOF: {\n                this.onEof(token);\n                break;\n            }\n            case token_js_1.TokenType.WHITESPACE_CHARACTER: {\n                this.onWhitespaceCharacter(token);\n                break;\n            }\n        }\n    }\n    //Integration points\n    _isIntegrationPoint(tid, element, foreignNS) {\n        const ns = this.treeAdapter.getNamespaceURI(element);\n        const attrs = this.treeAdapter.getAttrList(element);\n        return foreignContent.isIntegrationPoint(tid, ns, attrs, foreignNS);\n    }\n    //Active formatting elements reconstruction\n    _reconstructActiveFormattingElements() {\n        const listLength = this.activeFormattingElements.entries.length;\n        if (listLength) {\n            const endIndex = this.activeFormattingElements.entries.findIndex((entry) => entry.type === formatting_element_list_js_1.EntryType.Marker || this.openElements.contains(entry.element));\n            const unopenIdx = endIndex < 0 ? listLength - 1 : endIndex - 1;\n            for (let i = unopenIdx; i >= 0; i--) {\n                const entry = this.activeFormattingElements.entries[i];\n                this._insertElement(entry.token, this.treeAdapter.getNamespaceURI(entry.element));\n                entry.element = this.openElements.current;\n            }\n        }\n    }\n    //Close elements\n    _closeTableCell() {\n        this.openElements.generateImpliedEndTags();\n        this.openElements.popUntilTableCellPopped();\n        this.activeFormattingElements.clearToLastMarker();\n        this.insertionMode = InsertionMode.IN_ROW;\n    }\n    _closePElement() {\n        this.openElements.generateImpliedEndTagsWithExclusion(html_js_1.TAG_ID.P);\n        this.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.P);\n    }\n    //Insertion modes\n    _resetInsertionMode() {\n        for (let i = this.openElements.stackTop; i >= 0; i--) {\n            //Insertion mode reset map\n            switch (i === 0 && this.fragmentContext ? this.fragmentContextID : this.openElements.tagIDs[i]) {\n                case html_js_1.TAG_ID.TR: {\n                    this.insertionMode = InsertionMode.IN_ROW;\n                    return;\n                }\n                case html_js_1.TAG_ID.TBODY:\n                case html_js_1.TAG_ID.THEAD:\n                case html_js_1.TAG_ID.TFOOT: {\n                    this.insertionMode = InsertionMode.IN_TABLE_BODY;\n                    return;\n                }\n                case html_js_1.TAG_ID.CAPTION: {\n                    this.insertionMode = InsertionMode.IN_CAPTION;\n                    return;\n                }\n                case html_js_1.TAG_ID.COLGROUP: {\n                    this.insertionMode = InsertionMode.IN_COLUMN_GROUP;\n                    return;\n                }\n                case html_js_1.TAG_ID.TABLE: {\n                    this.insertionMode = InsertionMode.IN_TABLE;\n                    return;\n                }\n                case html_js_1.TAG_ID.BODY: {\n                    this.insertionMode = InsertionMode.IN_BODY;\n                    return;\n                }\n                case html_js_1.TAG_ID.FRAMESET: {\n                    this.insertionMode = InsertionMode.IN_FRAMESET;\n                    return;\n                }\n                case html_js_1.TAG_ID.SELECT: {\n                    this._resetInsertionModeForSelect(i);\n                    return;\n                }\n                case html_js_1.TAG_ID.TEMPLATE: {\n                    this.insertionMode = this.tmplInsertionModeStack[0];\n                    return;\n                }\n                case html_js_1.TAG_ID.HTML: {\n                    this.insertionMode = this.headElement ? InsertionMode.AFTER_HEAD : InsertionMode.BEFORE_HEAD;\n                    return;\n                }\n                case html_js_1.TAG_ID.TD:\n                case html_js_1.TAG_ID.TH: {\n                    if (i > 0) {\n                        this.insertionMode = InsertionMode.IN_CELL;\n                        return;\n                    }\n                    break;\n                }\n                case html_js_1.TAG_ID.HEAD: {\n                    if (i > 0) {\n                        this.insertionMode = InsertionMode.IN_HEAD;\n                        return;\n                    }\n                    break;\n                }\n            }\n        }\n        this.insertionMode = InsertionMode.IN_BODY;\n    }\n    _resetInsertionModeForSelect(selectIdx) {\n        if (selectIdx > 0) {\n            for (let i = selectIdx - 1; i > 0; i--) {\n                const tn = this.openElements.tagIDs[i];\n                if (tn === html_js_1.TAG_ID.TEMPLATE) {\n                    break;\n                }\n                else if (tn === html_js_1.TAG_ID.TABLE) {\n                    this.insertionMode = InsertionMode.IN_SELECT_IN_TABLE;\n                    return;\n                }\n            }\n        }\n        this.insertionMode = InsertionMode.IN_SELECT;\n    }\n    //Foster parenting\n    _isElementCausesFosterParenting(tn) {\n        return TABLE_STRUCTURE_TAGS.has(tn);\n    }\n    _shouldFosterParentOnInsertion() {\n        return this.fosterParentingEnabled && this._isElementCausesFosterParenting(this.openElements.currentTagId);\n    }\n    _findFosterParentingLocation() {\n        for (let i = this.openElements.stackTop; i >= 0; i--) {\n            const openElement = this.openElements.items[i];\n            switch (this.openElements.tagIDs[i]) {\n                case html_js_1.TAG_ID.TEMPLATE: {\n                    if (this.treeAdapter.getNamespaceURI(openElement) === html_js_1.NS.HTML) {\n                        return { parent: this.treeAdapter.getTemplateContent(openElement), beforeElement: null };\n                    }\n                    break;\n                }\n                case html_js_1.TAG_ID.TABLE: {\n                    const parent = this.treeAdapter.getParentNode(openElement);\n                    if (parent) {\n                        return { parent, beforeElement: openElement };\n                    }\n                    return { parent: this.openElements.items[i - 1], beforeElement: null };\n                }\n                default:\n                // Do nothing\n            }\n        }\n        return { parent: this.openElements.items[0], beforeElement: null };\n    }\n    _fosterParentElement(element) {\n        const location = this._findFosterParentingLocation();\n        if (location.beforeElement) {\n            this.treeAdapter.insertBefore(location.parent, element, location.beforeElement);\n        }\n        else {\n            this.treeAdapter.appendChild(location.parent, element);\n        }\n    }\n    //Special elements\n    _isSpecialElement(element, id) {\n        const ns = this.treeAdapter.getNamespaceURI(element);\n        return html_js_1.SPECIAL_ELEMENTS[ns].has(id);\n    }\n    onCharacter(token) {\n        this.skipNextNewLine = false;\n        if (this.tokenizer.inForeignNode) {\n            characterInForeignContent(this, token);\n            return;\n        }\n        switch (this.insertionMode) {\n            case InsertionMode.INITIAL: {\n                tokenInInitialMode(this, token);\n                break;\n            }\n            case InsertionMode.BEFORE_HTML: {\n                tokenBeforeHtml(this, token);\n                break;\n            }\n            case InsertionMode.BEFORE_HEAD: {\n                tokenBeforeHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_HEAD: {\n                tokenInHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_HEAD_NO_SCRIPT: {\n                tokenInHeadNoScript(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_HEAD: {\n                tokenAfterHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_BODY:\n            case InsertionMode.IN_CAPTION:\n            case InsertionMode.IN_CELL:\n            case InsertionMode.IN_TEMPLATE: {\n                characterInBody(this, token);\n                break;\n            }\n            case InsertionMode.TEXT:\n            case InsertionMode.IN_SELECT:\n            case InsertionMode.IN_SELECT_IN_TABLE: {\n                this._insertCharacters(token);\n                break;\n            }\n            case InsertionMode.IN_TABLE:\n            case InsertionMode.IN_TABLE_BODY:\n            case InsertionMode.IN_ROW: {\n                characterInTable(this, token);\n                break;\n            }\n            case InsertionMode.IN_TABLE_TEXT: {\n                characterInTableText(this, token);\n                break;\n            }\n            case InsertionMode.IN_COLUMN_GROUP: {\n                tokenInColumnGroup(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_BODY: {\n                tokenAfterBody(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_AFTER_BODY: {\n                tokenAfterAfterBody(this, token);\n                break;\n            }\n            default:\n            // Do nothing\n        }\n    }\n    onNullCharacter(token) {\n        this.skipNextNewLine = false;\n        if (this.tokenizer.inForeignNode) {\n            nullCharacterInForeignContent(this, token);\n            return;\n        }\n        switch (this.insertionMode) {\n            case InsertionMode.INITIAL: {\n                tokenInInitialMode(this, token);\n                break;\n            }\n            case InsertionMode.BEFORE_HTML: {\n                tokenBeforeHtml(this, token);\n                break;\n            }\n            case InsertionMode.BEFORE_HEAD: {\n                tokenBeforeHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_HEAD: {\n                tokenInHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_HEAD_NO_SCRIPT: {\n                tokenInHeadNoScript(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_HEAD: {\n                tokenAfterHead(this, token);\n                break;\n            }\n            case InsertionMode.TEXT: {\n                this._insertCharacters(token);\n                break;\n            }\n            case InsertionMode.IN_TABLE:\n            case InsertionMode.IN_TABLE_BODY:\n            case InsertionMode.IN_ROW: {\n                characterInTable(this, token);\n                break;\n            }\n            case InsertionMode.IN_COLUMN_GROUP: {\n                tokenInColumnGroup(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_BODY: {\n                tokenAfterBody(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_AFTER_BODY: {\n                tokenAfterAfterBody(this, token);\n                break;\n            }\n            default:\n            // Do nothing\n        }\n    }\n    onComment(token) {\n        this.skipNextNewLine = false;\n        if (this.currentNotInHTML) {\n            appendComment(this, token);\n            return;\n        }\n        switch (this.insertionMode) {\n            case InsertionMode.INITIAL:\n            case InsertionMode.BEFORE_HTML:\n            case InsertionMode.BEFORE_HEAD:\n            case InsertionMode.IN_HEAD:\n            case InsertionMode.IN_HEAD_NO_SCRIPT:\n            case InsertionMode.AFTER_HEAD:\n            case InsertionMode.IN_BODY:\n            case InsertionMode.IN_TABLE:\n            case InsertionMode.IN_CAPTION:\n            case InsertionMode.IN_COLUMN_GROUP:\n            case InsertionMode.IN_TABLE_BODY:\n            case InsertionMode.IN_ROW:\n            case InsertionMode.IN_CELL:\n            case InsertionMode.IN_SELECT:\n            case InsertionMode.IN_SELECT_IN_TABLE:\n            case InsertionMode.IN_TEMPLATE:\n            case InsertionMode.IN_FRAMESET:\n            case InsertionMode.AFTER_FRAMESET: {\n                appendComment(this, token);\n                break;\n            }\n            case InsertionMode.IN_TABLE_TEXT: {\n                tokenInTableText(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_BODY: {\n                appendCommentToRootHtmlElement(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_AFTER_BODY:\n            case InsertionMode.AFTER_AFTER_FRAMESET: {\n                appendCommentToDocument(this, token);\n                break;\n            }\n            default:\n            // Do nothing\n        }\n    }\n    onDoctype(token) {\n        this.skipNextNewLine = false;\n        switch (this.insertionMode) {\n            case InsertionMode.INITIAL: {\n                doctypeInInitialMode(this, token);\n                break;\n            }\n            case InsertionMode.BEFORE_HEAD:\n            case InsertionMode.IN_HEAD:\n            case InsertionMode.IN_HEAD_NO_SCRIPT:\n            case InsertionMode.AFTER_HEAD: {\n                this._err(token, error_codes_js_1.ERR.misplacedDoctype);\n                break;\n            }\n            case InsertionMode.IN_TABLE_TEXT: {\n                tokenInTableText(this, token);\n                break;\n            }\n            default:\n            // Do nothing\n        }\n    }\n    onStartTag(token) {\n        this.skipNextNewLine = false;\n        this.currentToken = token;\n        this._processStartTag(token);\n        if (token.selfClosing && !token.ackSelfClosing) {\n            this._err(token, error_codes_js_1.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus);\n        }\n    }\n    /**\n     * Processes a given start tag.\n     *\n     * `onStartTag` checks if a self-closing tag was recognized. When a token\n     * is moved inbetween multiple insertion modes, this check for self-closing\n     * could lead to false positives. To avoid this, `_processStartTag` is used\n     * for nested calls.\n     *\n     * @param token The token to process.\n     */\n    _processStartTag(token) {\n        if (this.shouldProcessStartTagTokenInForeignContent(token)) {\n            startTagInForeignContent(this, token);\n        }\n        else {\n            this._startTagOutsideForeignContent(token);\n        }\n    }\n    _startTagOutsideForeignContent(token) {\n        switch (this.insertionMode) {\n            case InsertionMode.INITIAL: {\n                tokenInInitialMode(this, token);\n                break;\n            }\n            case InsertionMode.BEFORE_HTML: {\n                startTagBeforeHtml(this, token);\n                break;\n            }\n            case InsertionMode.BEFORE_HEAD: {\n                startTagBeforeHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_HEAD: {\n                startTagInHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_HEAD_NO_SCRIPT: {\n                startTagInHeadNoScript(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_HEAD: {\n                startTagAfterHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_BODY: {\n                startTagInBody(this, token);\n                break;\n            }\n            case InsertionMode.IN_TABLE: {\n                startTagInTable(this, token);\n                break;\n            }\n            case InsertionMode.IN_TABLE_TEXT: {\n                tokenInTableText(this, token);\n                break;\n            }\n            case InsertionMode.IN_CAPTION: {\n                startTagInCaption(this, token);\n                break;\n            }\n            case InsertionMode.IN_COLUMN_GROUP: {\n                startTagInColumnGroup(this, token);\n                break;\n            }\n            case InsertionMode.IN_TABLE_BODY: {\n                startTagInTableBody(this, token);\n                break;\n            }\n            case InsertionMode.IN_ROW: {\n                startTagInRow(this, token);\n                break;\n            }\n            case InsertionMode.IN_CELL: {\n                startTagInCell(this, token);\n                break;\n            }\n            case InsertionMode.IN_SELECT: {\n                startTagInSelect(this, token);\n                break;\n            }\n            case InsertionMode.IN_SELECT_IN_TABLE: {\n                startTagInSelectInTable(this, token);\n                break;\n            }\n            case InsertionMode.IN_TEMPLATE: {\n                startTagInTemplate(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_BODY: {\n                startTagAfterBody(this, token);\n                break;\n            }\n            case InsertionMode.IN_FRAMESET: {\n                startTagInFrameset(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_FRAMESET: {\n                startTagAfterFrameset(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_AFTER_BODY: {\n                startTagAfterAfterBody(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_AFTER_FRAMESET: {\n                startTagAfterAfterFrameset(this, token);\n                break;\n            }\n            default:\n            // Do nothing\n        }\n    }\n    onEndTag(token) {\n        this.skipNextNewLine = false;\n        this.currentToken = token;\n        if (this.currentNotInHTML) {\n            endTagInForeignContent(this, token);\n        }\n        else {\n            this._endTagOutsideForeignContent(token);\n        }\n    }\n    _endTagOutsideForeignContent(token) {\n        switch (this.insertionMode) {\n            case InsertionMode.INITIAL: {\n                tokenInInitialMode(this, token);\n                break;\n            }\n            case InsertionMode.BEFORE_HTML: {\n                endTagBeforeHtml(this, token);\n                break;\n            }\n            case InsertionMode.BEFORE_HEAD: {\n                endTagBeforeHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_HEAD: {\n                endTagInHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_HEAD_NO_SCRIPT: {\n                endTagInHeadNoScript(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_HEAD: {\n                endTagAfterHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_BODY: {\n                endTagInBody(this, token);\n                break;\n            }\n            case InsertionMode.TEXT: {\n                endTagInText(this, token);\n                break;\n            }\n            case InsertionMode.IN_TABLE: {\n                endTagInTable(this, token);\n                break;\n            }\n            case InsertionMode.IN_TABLE_TEXT: {\n                tokenInTableText(this, token);\n                break;\n            }\n            case InsertionMode.IN_CAPTION: {\n                endTagInCaption(this, token);\n                break;\n            }\n            case InsertionMode.IN_COLUMN_GROUP: {\n                endTagInColumnGroup(this, token);\n                break;\n            }\n            case InsertionMode.IN_TABLE_BODY: {\n                endTagInTableBody(this, token);\n                break;\n            }\n            case InsertionMode.IN_ROW: {\n                endTagInRow(this, token);\n                break;\n            }\n            case InsertionMode.IN_CELL: {\n                endTagInCell(this, token);\n                break;\n            }\n            case InsertionMode.IN_SELECT: {\n                endTagInSelect(this, token);\n                break;\n            }\n            case InsertionMode.IN_SELECT_IN_TABLE: {\n                endTagInSelectInTable(this, token);\n                break;\n            }\n            case InsertionMode.IN_TEMPLATE: {\n                endTagInTemplate(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_BODY: {\n                endTagAfterBody(this, token);\n                break;\n            }\n            case InsertionMode.IN_FRAMESET: {\n                endTagInFrameset(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_FRAMESET: {\n                endTagAfterFrameset(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_AFTER_BODY: {\n                tokenAfterAfterBody(this, token);\n                break;\n            }\n            default:\n            // Do nothing\n        }\n    }\n    onEof(token) {\n        switch (this.insertionMode) {\n            case InsertionMode.INITIAL: {\n                tokenInInitialMode(this, token);\n                break;\n            }\n            case InsertionMode.BEFORE_HTML: {\n                tokenBeforeHtml(this, token);\n                break;\n            }\n            case InsertionMode.BEFORE_HEAD: {\n                tokenBeforeHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_HEAD: {\n                tokenInHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_HEAD_NO_SCRIPT: {\n                tokenInHeadNoScript(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_HEAD: {\n                tokenAfterHead(this, token);\n                break;\n            }\n            case InsertionMode.IN_BODY:\n            case InsertionMode.IN_TABLE:\n            case InsertionMode.IN_CAPTION:\n            case InsertionMode.IN_COLUMN_GROUP:\n            case InsertionMode.IN_TABLE_BODY:\n            case InsertionMode.IN_ROW:\n            case InsertionMode.IN_CELL:\n            case InsertionMode.IN_SELECT:\n            case InsertionMode.IN_SELECT_IN_TABLE: {\n                eofInBody(this, token);\n                break;\n            }\n            case InsertionMode.TEXT: {\n                eofInText(this, token);\n                break;\n            }\n            case InsertionMode.IN_TABLE_TEXT: {\n                tokenInTableText(this, token);\n                break;\n            }\n            case InsertionMode.IN_TEMPLATE: {\n                eofInTemplate(this, token);\n                break;\n            }\n            case InsertionMode.AFTER_BODY:\n            case InsertionMode.IN_FRAMESET:\n            case InsertionMode.AFTER_FRAMESET:\n            case InsertionMode.AFTER_AFTER_BODY:\n            case InsertionMode.AFTER_AFTER_FRAMESET: {\n                stopParsing(this, token);\n                break;\n            }\n            default:\n            // Do nothing\n        }\n    }\n    onWhitespaceCharacter(token) {\n        if (this.skipNextNewLine) {\n            this.skipNextNewLine = false;\n            if (token.chars.charCodeAt(0) === unicode.CODE_POINTS.LINE_FEED) {\n                if (token.chars.length === 1) {\n                    return;\n                }\n                token.chars = token.chars.substr(1);\n            }\n        }\n        if (this.tokenizer.inForeignNode) {\n            this._insertCharacters(token);\n            return;\n        }\n        switch (this.insertionMode) {\n            case InsertionMode.IN_HEAD:\n            case InsertionMode.IN_HEAD_NO_SCRIPT:\n            case InsertionMode.AFTER_HEAD:\n            case InsertionMode.TEXT:\n            case InsertionMode.IN_COLUMN_GROUP:\n            case InsertionMode.IN_SELECT:\n            case InsertionMode.IN_SELECT_IN_TABLE:\n            case InsertionMode.IN_FRAMESET:\n            case InsertionMode.AFTER_FRAMESET: {\n                this._insertCharacters(token);\n                break;\n            }\n            case InsertionMode.IN_BODY:\n            case InsertionMode.IN_CAPTION:\n            case InsertionMode.IN_CELL:\n            case InsertionMode.IN_TEMPLATE:\n            case InsertionMode.AFTER_BODY:\n            case InsertionMode.AFTER_AFTER_BODY:\n            case InsertionMode.AFTER_AFTER_FRAMESET: {\n                whitespaceCharacterInBody(this, token);\n                break;\n            }\n            case InsertionMode.IN_TABLE:\n            case InsertionMode.IN_TABLE_BODY:\n            case InsertionMode.IN_ROW: {\n                characterInTable(this, token);\n                break;\n            }\n            case InsertionMode.IN_TABLE_TEXT: {\n                whitespaceCharacterInTableText(this, token);\n                break;\n            }\n            default:\n            // Do nothing\n        }\n    }\n}\nexports.Parser = Parser;\n//Adoption agency algorithm\n//(see: http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#adoptionAgency)\n//------------------------------------------------------------------\n//Steps 5-8 of the algorithm\nfunction aaObtainFormattingElementEntry(p, token) {\n    let formattingElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName(token.tagName);\n    if (formattingElementEntry) {\n        if (!p.openElements.contains(formattingElementEntry.element)) {\n            p.activeFormattingElements.removeEntry(formattingElementEntry);\n            formattingElementEntry = null;\n        }\n        else if (!p.openElements.hasInScope(token.tagID)) {\n            formattingElementEntry = null;\n        }\n    }\n    else {\n        genericEndTagInBody(p, token);\n    }\n    return formattingElementEntry;\n}\n//Steps 9 and 10 of the algorithm\nfunction aaObtainFurthestBlock(p, formattingElementEntry) {\n    let furthestBlock = null;\n    let idx = p.openElements.stackTop;\n    for (; idx >= 0; idx--) {\n        const element = p.openElements.items[idx];\n        if (element === formattingElementEntry.element) {\n            break;\n        }\n        if (p._isSpecialElement(element, p.openElements.tagIDs[idx])) {\n            furthestBlock = element;\n        }\n    }\n    if (!furthestBlock) {\n        p.openElements.shortenToLength(idx < 0 ? 0 : idx);\n        p.activeFormattingElements.removeEntry(formattingElementEntry);\n    }\n    return furthestBlock;\n}\n//Step 13 of the algorithm\nfunction aaInnerLoop(p, furthestBlock, formattingElement) {\n    let lastElement = furthestBlock;\n    let nextElement = p.openElements.getCommonAncestor(furthestBlock);\n    for (let i = 0, element = nextElement; element !== formattingElement; i++, element = nextElement) {\n        //NOTE: store the next element for the next loop iteration (it may be deleted from the stack by step 9.5)\n        nextElement = p.openElements.getCommonAncestor(element);\n        const elementEntry = p.activeFormattingElements.getElementEntry(element);\n        const counterOverflow = elementEntry && i >= AA_INNER_LOOP_ITER;\n        const shouldRemoveFromOpenElements = !elementEntry || counterOverflow;\n        if (shouldRemoveFromOpenElements) {\n            if (counterOverflow) {\n                p.activeFormattingElements.removeEntry(elementEntry);\n            }\n            p.openElements.remove(element);\n        }\n        else {\n            element = aaRecreateElementFromEntry(p, elementEntry);\n            if (lastElement === furthestBlock) {\n                p.activeFormattingElements.bookmark = elementEntry;\n            }\n            p.treeAdapter.detachNode(lastElement);\n            p.treeAdapter.appendChild(element, lastElement);\n            lastElement = element;\n        }\n    }\n    return lastElement;\n}\n//Step 13.7 of the algorithm\nfunction aaRecreateElementFromEntry(p, elementEntry) {\n    const ns = p.treeAdapter.getNamespaceURI(elementEntry.element);\n    const newElement = p.treeAdapter.createElement(elementEntry.token.tagName, ns, elementEntry.token.attrs);\n    p.openElements.replace(elementEntry.element, newElement);\n    elementEntry.element = newElement;\n    return newElement;\n}\n//Step 14 of the algorithm\nfunction aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement) {\n    const tn = p.treeAdapter.getTagName(commonAncestor);\n    const tid = (0, html_js_1.getTagID)(tn);\n    if (p._isElementCausesFosterParenting(tid)) {\n        p._fosterParentElement(lastElement);\n    }\n    else {\n        const ns = p.treeAdapter.getNamespaceURI(commonAncestor);\n        if (tid === html_js_1.TAG_ID.TEMPLATE && ns === html_js_1.NS.HTML) {\n            commonAncestor = p.treeAdapter.getTemplateContent(commonAncestor);\n        }\n        p.treeAdapter.appendChild(commonAncestor, lastElement);\n    }\n}\n//Steps 15-19 of the algorithm\nfunction aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry) {\n    const ns = p.treeAdapter.getNamespaceURI(formattingElementEntry.element);\n    const { token } = formattingElementEntry;\n    const newElement = p.treeAdapter.createElement(token.tagName, ns, token.attrs);\n    p._adoptNodes(furthestBlock, newElement);\n    p.treeAdapter.appendChild(furthestBlock, newElement);\n    p.activeFormattingElements.insertElementAfterBookmark(newElement, token);\n    p.activeFormattingElements.removeEntry(formattingElementEntry);\n    p.openElements.remove(formattingElementEntry.element);\n    p.openElements.insertAfter(furthestBlock, newElement, token.tagID);\n}\n//Algorithm entry point\nfunction callAdoptionAgency(p, token) {\n    for (let i = 0; i < AA_OUTER_LOOP_ITER; i++) {\n        const formattingElementEntry = aaObtainFormattingElementEntry(p, token);\n        if (!formattingElementEntry) {\n            break;\n        }\n        const furthestBlock = aaObtainFurthestBlock(p, formattingElementEntry);\n        if (!furthestBlock) {\n            break;\n        }\n        p.activeFormattingElements.bookmark = formattingElementEntry;\n        const lastElement = aaInnerLoop(p, furthestBlock, formattingElementEntry.element);\n        const commonAncestor = p.openElements.getCommonAncestor(formattingElementEntry.element);\n        p.treeAdapter.detachNode(lastElement);\n        if (commonAncestor)\n            aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement);\n        aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry);\n    }\n}\n//Generic token handlers\n//------------------------------------------------------------------\nfunction appendComment(p, token) {\n    p._appendCommentNode(token, p.openElements.currentTmplContentOrNode);\n}\nfunction appendCommentToRootHtmlElement(p, token) {\n    p._appendCommentNode(token, p.openElements.items[0]);\n}\nfunction appendCommentToDocument(p, token) {\n    p._appendCommentNode(token, p.document);\n}\nfunction stopParsing(p, token) {\n    p.stopped = true;\n    // NOTE: Set end locations for elements that remain on the open element stack.\n    if (token.location) {\n        // NOTE: If we are not in a fragment, `html` and `body` will stay on the stack.\n        // This is a problem, as we might overwrite their end position here.\n        const target = p.fragmentContext ? 0 : 2;\n        for (let i = p.openElements.stackTop; i >= target; i--) {\n            p._setEndLocation(p.openElements.items[i], token);\n        }\n        // Handle `html` and `body`\n        if (!p.fragmentContext && p.openElements.stackTop >= 0) {\n            const htmlElement = p.openElements.items[0];\n            const htmlLocation = p.treeAdapter.getNodeSourceCodeLocation(htmlElement);\n            if (htmlLocation && !htmlLocation.endTag) {\n                p._setEndLocation(htmlElement, token);\n                if (p.openElements.stackTop >= 1) {\n                    const bodyElement = p.openElements.items[1];\n                    const bodyLocation = p.treeAdapter.getNodeSourceCodeLocation(bodyElement);\n                    if (bodyLocation && !bodyLocation.endTag) {\n                        p._setEndLocation(bodyElement, token);\n                    }\n                }\n            }\n        }\n    }\n}\n// The \"initial\" insertion mode\n//------------------------------------------------------------------\nfunction doctypeInInitialMode(p, token) {\n    p._setDocumentType(token);\n    const mode = token.forceQuirks ? html_js_1.DOCUMENT_MODE.QUIRKS : doctype.getDocumentMode(token);\n    if (!doctype.isConforming(token)) {\n        p._err(token, error_codes_js_1.ERR.nonConformingDoctype);\n    }\n    p.treeAdapter.setDocumentMode(p.document, mode);\n    p.insertionMode = InsertionMode.BEFORE_HTML;\n}\nfunction tokenInInitialMode(p, token) {\n    p._err(token, error_codes_js_1.ERR.missingDoctype, true);\n    p.treeAdapter.setDocumentMode(p.document, html_js_1.DOCUMENT_MODE.QUIRKS);\n    p.insertionMode = InsertionMode.BEFORE_HTML;\n    p._processToken(token);\n}\n// The \"before html\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHtml(p, token) {\n    if (token.tagID === html_js_1.TAG_ID.HTML) {\n        p._insertElement(token, html_js_1.NS.HTML);\n        p.insertionMode = InsertionMode.BEFORE_HEAD;\n    }\n    else {\n        tokenBeforeHtml(p, token);\n    }\n}\nfunction endTagBeforeHtml(p, token) {\n    const tn = token.tagID;\n    if (tn === html_js_1.TAG_ID.HTML || tn === html_js_1.TAG_ID.HEAD || tn === html_js_1.TAG_ID.BODY || tn === html_js_1.TAG_ID.BR) {\n        tokenBeforeHtml(p, token);\n    }\n}\nfunction tokenBeforeHtml(p, token) {\n    p._insertFakeRootElement();\n    p.insertionMode = InsertionMode.BEFORE_HEAD;\n    p._processToken(token);\n}\n// The \"before head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHead(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.HTML: {\n            startTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.HEAD: {\n            p._insertElement(token, html_js_1.NS.HTML);\n            p.headElement = p.openElements.current;\n            p.insertionMode = InsertionMode.IN_HEAD;\n            break;\n        }\n        default: {\n            tokenBeforeHead(p, token);\n        }\n    }\n}\nfunction endTagBeforeHead(p, token) {\n    const tn = token.tagID;\n    if (tn === html_js_1.TAG_ID.HEAD || tn === html_js_1.TAG_ID.BODY || tn === html_js_1.TAG_ID.HTML || tn === html_js_1.TAG_ID.BR) {\n        tokenBeforeHead(p, token);\n    }\n    else {\n        p._err(token, error_codes_js_1.ERR.endTagWithoutMatchingOpenElement);\n    }\n}\nfunction tokenBeforeHead(p, token) {\n    p._insertFakeElement(html_js_1.TAG_NAMES.HEAD, html_js_1.TAG_ID.HEAD);\n    p.headElement = p.openElements.current;\n    p.insertionMode = InsertionMode.IN_HEAD;\n    p._processToken(token);\n}\n// The \"in head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInHead(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.HTML: {\n            startTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.BASE:\n        case html_js_1.TAG_ID.BASEFONT:\n        case html_js_1.TAG_ID.BGSOUND:\n        case html_js_1.TAG_ID.LINK:\n        case html_js_1.TAG_ID.META: {\n            p._appendElement(token, html_js_1.NS.HTML);\n            token.ackSelfClosing = true;\n            break;\n        }\n        case html_js_1.TAG_ID.TITLE: {\n            p._switchToTextParsing(token, index_js_1.TokenizerMode.RCDATA);\n            break;\n        }\n        case html_js_1.TAG_ID.NOSCRIPT: {\n            if (p.options.scriptingEnabled) {\n                p._switchToTextParsing(token, index_js_1.TokenizerMode.RAWTEXT);\n            }\n            else {\n                p._insertElement(token, html_js_1.NS.HTML);\n                p.insertionMode = InsertionMode.IN_HEAD_NO_SCRIPT;\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.NOFRAMES:\n        case html_js_1.TAG_ID.STYLE: {\n            p._switchToTextParsing(token, index_js_1.TokenizerMode.RAWTEXT);\n            break;\n        }\n        case html_js_1.TAG_ID.SCRIPT: {\n            p._switchToTextParsing(token, index_js_1.TokenizerMode.SCRIPT_DATA);\n            break;\n        }\n        case html_js_1.TAG_ID.TEMPLATE: {\n            p._insertTemplate(token);\n            p.activeFormattingElements.insertMarker();\n            p.framesetOk = false;\n            p.insertionMode = InsertionMode.IN_TEMPLATE;\n            p.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE);\n            break;\n        }\n        case html_js_1.TAG_ID.HEAD: {\n            p._err(token, error_codes_js_1.ERR.misplacedStartTagForHeadElement);\n            break;\n        }\n        default: {\n            tokenInHead(p, token);\n        }\n    }\n}\nfunction endTagInHead(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.HEAD: {\n            p.openElements.pop();\n            p.insertionMode = InsertionMode.AFTER_HEAD;\n            break;\n        }\n        case html_js_1.TAG_ID.BODY:\n        case html_js_1.TAG_ID.BR:\n        case html_js_1.TAG_ID.HTML: {\n            tokenInHead(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.TEMPLATE: {\n            templateEndTagInHead(p, token);\n            break;\n        }\n        default: {\n            p._err(token, error_codes_js_1.ERR.endTagWithoutMatchingOpenElement);\n        }\n    }\n}\nfunction templateEndTagInHead(p, token) {\n    if (p.openElements.tmplCount > 0) {\n        p.openElements.generateImpliedEndTagsThoroughly();\n        if (p.openElements.currentTagId !== html_js_1.TAG_ID.TEMPLATE) {\n            p._err(token, error_codes_js_1.ERR.closingOfElementWithOpenChildElements);\n        }\n        p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.TEMPLATE);\n        p.activeFormattingElements.clearToLastMarker();\n        p.tmplInsertionModeStack.shift();\n        p._resetInsertionMode();\n    }\n    else {\n        p._err(token, error_codes_js_1.ERR.endTagWithoutMatchingOpenElement);\n    }\n}\nfunction tokenInHead(p, token) {\n    p.openElements.pop();\n    p.insertionMode = InsertionMode.AFTER_HEAD;\n    p._processToken(token);\n}\n// The \"in head no script\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInHeadNoScript(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.HTML: {\n            startTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.BASEFONT:\n        case html_js_1.TAG_ID.BGSOUND:\n        case html_js_1.TAG_ID.HEAD:\n        case html_js_1.TAG_ID.LINK:\n        case html_js_1.TAG_ID.META:\n        case html_js_1.TAG_ID.NOFRAMES:\n        case html_js_1.TAG_ID.STYLE: {\n            startTagInHead(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.NOSCRIPT: {\n            p._err(token, error_codes_js_1.ERR.nestedNoscriptInHead);\n            break;\n        }\n        default: {\n            tokenInHeadNoScript(p, token);\n        }\n    }\n}\nfunction endTagInHeadNoScript(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.NOSCRIPT: {\n            p.openElements.pop();\n            p.insertionMode = InsertionMode.IN_HEAD;\n            break;\n        }\n        case html_js_1.TAG_ID.BR: {\n            tokenInHeadNoScript(p, token);\n            break;\n        }\n        default: {\n            p._err(token, error_codes_js_1.ERR.endTagWithoutMatchingOpenElement);\n        }\n    }\n}\nfunction tokenInHeadNoScript(p, token) {\n    const errCode = token.type === token_js_1.TokenType.EOF ? error_codes_js_1.ERR.openElementsLeftAfterEof : error_codes_js_1.ERR.disallowedContentInNoscriptInHead;\n    p._err(token, errCode);\n    p.openElements.pop();\n    p.insertionMode = InsertionMode.IN_HEAD;\n    p._processToken(token);\n}\n// The \"after head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterHead(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.HTML: {\n            startTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.BODY: {\n            p._insertElement(token, html_js_1.NS.HTML);\n            p.framesetOk = false;\n            p.insertionMode = InsertionMode.IN_BODY;\n            break;\n        }\n        case html_js_1.TAG_ID.FRAMESET: {\n            p._insertElement(token, html_js_1.NS.HTML);\n            p.insertionMode = InsertionMode.IN_FRAMESET;\n            break;\n        }\n        case html_js_1.TAG_ID.BASE:\n        case html_js_1.TAG_ID.BASEFONT:\n        case html_js_1.TAG_ID.BGSOUND:\n        case html_js_1.TAG_ID.LINK:\n        case html_js_1.TAG_ID.META:\n        case html_js_1.TAG_ID.NOFRAMES:\n        case html_js_1.TAG_ID.SCRIPT:\n        case html_js_1.TAG_ID.STYLE:\n        case html_js_1.TAG_ID.TEMPLATE:\n        case html_js_1.TAG_ID.TITLE: {\n            p._err(token, error_codes_js_1.ERR.abandonedHeadElementChild);\n            p.openElements.push(p.headElement, html_js_1.TAG_ID.HEAD);\n            startTagInHead(p, token);\n            p.openElements.remove(p.headElement);\n            break;\n        }\n        case html_js_1.TAG_ID.HEAD: {\n            p._err(token, error_codes_js_1.ERR.misplacedStartTagForHeadElement);\n            break;\n        }\n        default: {\n            tokenAfterHead(p, token);\n        }\n    }\n}\nfunction endTagAfterHead(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.BODY:\n        case html_js_1.TAG_ID.HTML:\n        case html_js_1.TAG_ID.BR: {\n            tokenAfterHead(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.TEMPLATE: {\n            templateEndTagInHead(p, token);\n            break;\n        }\n        default: {\n            p._err(token, error_codes_js_1.ERR.endTagWithoutMatchingOpenElement);\n        }\n    }\n}\nfunction tokenAfterHead(p, token) {\n    p._insertFakeElement(html_js_1.TAG_NAMES.BODY, html_js_1.TAG_ID.BODY);\n    p.insertionMode = InsertionMode.IN_BODY;\n    modeInBody(p, token);\n}\n// The \"in body\" insertion mode\n//------------------------------------------------------------------\nfunction modeInBody(p, token) {\n    switch (token.type) {\n        case token_js_1.TokenType.CHARACTER: {\n            characterInBody(p, token);\n            break;\n        }\n        case token_js_1.TokenType.WHITESPACE_CHARACTER: {\n            whitespaceCharacterInBody(p, token);\n            break;\n        }\n        case token_js_1.TokenType.COMMENT: {\n            appendComment(p, token);\n            break;\n        }\n        case token_js_1.TokenType.START_TAG: {\n            startTagInBody(p, token);\n            break;\n        }\n        case token_js_1.TokenType.END_TAG: {\n            endTagInBody(p, token);\n            break;\n        }\n        case token_js_1.TokenType.EOF: {\n            eofInBody(p, token);\n            break;\n        }\n        default:\n        // Do nothing\n    }\n}\nfunction whitespaceCharacterInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertCharacters(token);\n}\nfunction characterInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertCharacters(token);\n    p.framesetOk = false;\n}\nfunction htmlStartTagInBody(p, token) {\n    if (p.openElements.tmplCount === 0) {\n        p.treeAdapter.adoptAttributes(p.openElements.items[0], token.attrs);\n    }\n}\nfunction bodyStartTagInBody(p, token) {\n    const bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n    if (bodyElement && p.openElements.tmplCount === 0) {\n        p.framesetOk = false;\n        p.treeAdapter.adoptAttributes(bodyElement, token.attrs);\n    }\n}\nfunction framesetStartTagInBody(p, token) {\n    const bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n    if (p.framesetOk && bodyElement) {\n        p.treeAdapter.detachNode(bodyElement);\n        p.openElements.popAllUpToHtmlElement();\n        p._insertElement(token, html_js_1.NS.HTML);\n        p.insertionMode = InsertionMode.IN_FRAMESET;\n    }\n}\nfunction addressStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)) {\n        p._closePElement();\n    }\n    p._insertElement(token, html_js_1.NS.HTML);\n}\nfunction numberedHeaderStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)) {\n        p._closePElement();\n    }\n    if ((0, html_js_1.isNumberedHeader)(p.openElements.currentTagId)) {\n        p.openElements.pop();\n    }\n    p._insertElement(token, html_js_1.NS.HTML);\n}\nfunction preStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)) {\n        p._closePElement();\n    }\n    p._insertElement(token, html_js_1.NS.HTML);\n    //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n    //on to the next one. (Newlines at the start of pre blocks are ignored as an authoring convenience.)\n    p.skipNextNewLine = true;\n    p.framesetOk = false;\n}\nfunction formStartTagInBody(p, token) {\n    const inTemplate = p.openElements.tmplCount > 0;\n    if (!p.formElement || inTemplate) {\n        if (p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)) {\n            p._closePElement();\n        }\n        p._insertElement(token, html_js_1.NS.HTML);\n        if (!inTemplate) {\n            p.formElement = p.openElements.current;\n        }\n    }\n}\nfunction listItemStartTagInBody(p, token) {\n    p.framesetOk = false;\n    const tn = token.tagID;\n    for (let i = p.openElements.stackTop; i >= 0; i--) {\n        const elementId = p.openElements.tagIDs[i];\n        if ((tn === html_js_1.TAG_ID.LI && elementId === html_js_1.TAG_ID.LI) ||\n            ((tn === html_js_1.TAG_ID.DD || tn === html_js_1.TAG_ID.DT) && (elementId === html_js_1.TAG_ID.DD || elementId === html_js_1.TAG_ID.DT))) {\n            p.openElements.generateImpliedEndTagsWithExclusion(elementId);\n            p.openElements.popUntilTagNamePopped(elementId);\n            break;\n        }\n        if (elementId !== html_js_1.TAG_ID.ADDRESS &&\n            elementId !== html_js_1.TAG_ID.DIV &&\n            elementId !== html_js_1.TAG_ID.P &&\n            p._isSpecialElement(p.openElements.items[i], elementId)) {\n            break;\n        }\n    }\n    if (p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)) {\n        p._closePElement();\n    }\n    p._insertElement(token, html_js_1.NS.HTML);\n}\nfunction plaintextStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)) {\n        p._closePElement();\n    }\n    p._insertElement(token, html_js_1.NS.HTML);\n    p.tokenizer.state = index_js_1.TokenizerMode.PLAINTEXT;\n}\nfunction buttonStartTagInBody(p, token) {\n    if (p.openElements.hasInScope(html_js_1.TAG_ID.BUTTON)) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.BUTTON);\n    }\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, html_js_1.NS.HTML);\n    p.framesetOk = false;\n}\nfunction aStartTagInBody(p, token) {\n    const activeElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName(html_js_1.TAG_NAMES.A);\n    if (activeElementEntry) {\n        callAdoptionAgency(p, token);\n        p.openElements.remove(activeElementEntry.element);\n        p.activeFormattingElements.removeEntry(activeElementEntry);\n    }\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, html_js_1.NS.HTML);\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\nfunction bStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, html_js_1.NS.HTML);\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\nfunction nobrStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    if (p.openElements.hasInScope(html_js_1.TAG_ID.NOBR)) {\n        callAdoptionAgency(p, token);\n        p._reconstructActiveFormattingElements();\n    }\n    p._insertElement(token, html_js_1.NS.HTML);\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\nfunction appletStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, html_js_1.NS.HTML);\n    p.activeFormattingElements.insertMarker();\n    p.framesetOk = false;\n}\nfunction tableStartTagInBody(p, token) {\n    if (p.treeAdapter.getDocumentMode(p.document) !== html_js_1.DOCUMENT_MODE.QUIRKS && p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)) {\n        p._closePElement();\n    }\n    p._insertElement(token, html_js_1.NS.HTML);\n    p.framesetOk = false;\n    p.insertionMode = InsertionMode.IN_TABLE;\n}\nfunction areaStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._appendElement(token, html_js_1.NS.HTML);\n    p.framesetOk = false;\n    token.ackSelfClosing = true;\n}\nfunction isHiddenInput(token) {\n    const inputType = (0, token_js_1.getTokenAttr)(token, html_js_1.ATTRS.TYPE);\n    return inputType != null && inputType.toLowerCase() === HIDDEN_INPUT_TYPE;\n}\nfunction inputStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._appendElement(token, html_js_1.NS.HTML);\n    if (!isHiddenInput(token)) {\n        p.framesetOk = false;\n    }\n    token.ackSelfClosing = true;\n}\nfunction paramStartTagInBody(p, token) {\n    p._appendElement(token, html_js_1.NS.HTML);\n    token.ackSelfClosing = true;\n}\nfunction hrStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)) {\n        p._closePElement();\n    }\n    p._appendElement(token, html_js_1.NS.HTML);\n    p.framesetOk = false;\n    token.ackSelfClosing = true;\n}\nfunction imageStartTagInBody(p, token) {\n    token.tagName = html_js_1.TAG_NAMES.IMG;\n    token.tagID = html_js_1.TAG_ID.IMG;\n    areaStartTagInBody(p, token);\n}\nfunction textareaStartTagInBody(p, token) {\n    p._insertElement(token, html_js_1.NS.HTML);\n    //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n    //on to the next one. (Newlines at the start of textarea elements are ignored as an authoring convenience.)\n    p.skipNextNewLine = true;\n    p.tokenizer.state = index_js_1.TokenizerMode.RCDATA;\n    p.originalInsertionMode = p.insertionMode;\n    p.framesetOk = false;\n    p.insertionMode = InsertionMode.TEXT;\n}\nfunction xmpStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)) {\n        p._closePElement();\n    }\n    p._reconstructActiveFormattingElements();\n    p.framesetOk = false;\n    p._switchToTextParsing(token, index_js_1.TokenizerMode.RAWTEXT);\n}\nfunction iframeStartTagInBody(p, token) {\n    p.framesetOk = false;\n    p._switchToTextParsing(token, index_js_1.TokenizerMode.RAWTEXT);\n}\n//NOTE: here we assume that we always act as an user agent with enabled plugins, so we parse\n//<noembed> as rawtext.\nfunction noembedStartTagInBody(p, token) {\n    p._switchToTextParsing(token, index_js_1.TokenizerMode.RAWTEXT);\n}\nfunction selectStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, html_js_1.NS.HTML);\n    p.framesetOk = false;\n    p.insertionMode =\n        p.insertionMode === InsertionMode.IN_TABLE ||\n            p.insertionMode === InsertionMode.IN_CAPTION ||\n            p.insertionMode === InsertionMode.IN_TABLE_BODY ||\n            p.insertionMode === InsertionMode.IN_ROW ||\n            p.insertionMode === InsertionMode.IN_CELL\n            ? InsertionMode.IN_SELECT_IN_TABLE\n            : InsertionMode.IN_SELECT;\n}\nfunction optgroupStartTagInBody(p, token) {\n    if (p.openElements.currentTagId === html_js_1.TAG_ID.OPTION) {\n        p.openElements.pop();\n    }\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, html_js_1.NS.HTML);\n}\nfunction rbStartTagInBody(p, token) {\n    if (p.openElements.hasInScope(html_js_1.TAG_ID.RUBY)) {\n        p.openElements.generateImpliedEndTags();\n    }\n    p._insertElement(token, html_js_1.NS.HTML);\n}\nfunction rtStartTagInBody(p, token) {\n    if (p.openElements.hasInScope(html_js_1.TAG_ID.RUBY)) {\n        p.openElements.generateImpliedEndTagsWithExclusion(html_js_1.TAG_ID.RTC);\n    }\n    p._insertElement(token, html_js_1.NS.HTML);\n}\nfunction mathStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    foreignContent.adjustTokenMathMLAttrs(token);\n    foreignContent.adjustTokenXMLAttrs(token);\n    if (token.selfClosing) {\n        p._appendElement(token, html_js_1.NS.MATHML);\n    }\n    else {\n        p._insertElement(token, html_js_1.NS.MATHML);\n    }\n    token.ackSelfClosing = true;\n}\nfunction svgStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    foreignContent.adjustTokenSVGAttrs(token);\n    foreignContent.adjustTokenXMLAttrs(token);\n    if (token.selfClosing) {\n        p._appendElement(token, html_js_1.NS.SVG);\n    }\n    else {\n        p._insertElement(token, html_js_1.NS.SVG);\n    }\n    token.ackSelfClosing = true;\n}\nfunction genericStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, html_js_1.NS.HTML);\n}\nfunction startTagInBody(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.I:\n        case html_js_1.TAG_ID.S:\n        case html_js_1.TAG_ID.B:\n        case html_js_1.TAG_ID.U:\n        case html_js_1.TAG_ID.EM:\n        case html_js_1.TAG_ID.TT:\n        case html_js_1.TAG_ID.BIG:\n        case html_js_1.TAG_ID.CODE:\n        case html_js_1.TAG_ID.FONT:\n        case html_js_1.TAG_ID.SMALL:\n        case html_js_1.TAG_ID.STRIKE:\n        case html_js_1.TAG_ID.STRONG: {\n            bStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.A: {\n            aStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.H1:\n        case html_js_1.TAG_ID.H2:\n        case html_js_1.TAG_ID.H3:\n        case html_js_1.TAG_ID.H4:\n        case html_js_1.TAG_ID.H5:\n        case html_js_1.TAG_ID.H6: {\n            numberedHeaderStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.P:\n        case html_js_1.TAG_ID.DL:\n        case html_js_1.TAG_ID.OL:\n        case html_js_1.TAG_ID.UL:\n        case html_js_1.TAG_ID.DIV:\n        case html_js_1.TAG_ID.DIR:\n        case html_js_1.TAG_ID.NAV:\n        case html_js_1.TAG_ID.MAIN:\n        case html_js_1.TAG_ID.MENU:\n        case html_js_1.TAG_ID.ASIDE:\n        case html_js_1.TAG_ID.CENTER:\n        case html_js_1.TAG_ID.FIGURE:\n        case html_js_1.TAG_ID.FOOTER:\n        case html_js_1.TAG_ID.HEADER:\n        case html_js_1.TAG_ID.HGROUP:\n        case html_js_1.TAG_ID.DIALOG:\n        case html_js_1.TAG_ID.DETAILS:\n        case html_js_1.TAG_ID.ADDRESS:\n        case html_js_1.TAG_ID.ARTICLE:\n        case html_js_1.TAG_ID.SECTION:\n        case html_js_1.TAG_ID.SUMMARY:\n        case html_js_1.TAG_ID.FIELDSET:\n        case html_js_1.TAG_ID.BLOCKQUOTE:\n        case html_js_1.TAG_ID.FIGCAPTION: {\n            addressStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.LI:\n        case html_js_1.TAG_ID.DD:\n        case html_js_1.TAG_ID.DT: {\n            listItemStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.BR:\n        case html_js_1.TAG_ID.IMG:\n        case html_js_1.TAG_ID.WBR:\n        case html_js_1.TAG_ID.AREA:\n        case html_js_1.TAG_ID.EMBED:\n        case html_js_1.TAG_ID.KEYGEN: {\n            areaStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.HR: {\n            hrStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.RB:\n        case html_js_1.TAG_ID.RTC: {\n            rbStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.RT:\n        case html_js_1.TAG_ID.RP: {\n            rtStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.PRE:\n        case html_js_1.TAG_ID.LISTING: {\n            preStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.XMP: {\n            xmpStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.SVG: {\n            svgStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.HTML: {\n            htmlStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.BASE:\n        case html_js_1.TAG_ID.LINK:\n        case html_js_1.TAG_ID.META:\n        case html_js_1.TAG_ID.STYLE:\n        case html_js_1.TAG_ID.TITLE:\n        case html_js_1.TAG_ID.SCRIPT:\n        case html_js_1.TAG_ID.BGSOUND:\n        case html_js_1.TAG_ID.BASEFONT:\n        case html_js_1.TAG_ID.TEMPLATE: {\n            startTagInHead(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.BODY: {\n            bodyStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.FORM: {\n            formStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.NOBR: {\n            nobrStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.MATH: {\n            mathStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.TABLE: {\n            tableStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.INPUT: {\n            inputStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.PARAM:\n        case html_js_1.TAG_ID.TRACK:\n        case html_js_1.TAG_ID.SOURCE: {\n            paramStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.IMAGE: {\n            imageStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.BUTTON: {\n            buttonStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.APPLET:\n        case html_js_1.TAG_ID.OBJECT:\n        case html_js_1.TAG_ID.MARQUEE: {\n            appletStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.IFRAME: {\n            iframeStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.SELECT: {\n            selectStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.OPTION:\n        case html_js_1.TAG_ID.OPTGROUP: {\n            optgroupStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.NOEMBED: {\n            noembedStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.FRAMESET: {\n            framesetStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.TEXTAREA: {\n            textareaStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.NOSCRIPT: {\n            if (p.options.scriptingEnabled) {\n                noembedStartTagInBody(p, token);\n            }\n            else {\n                genericStartTagInBody(p, token);\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.PLAINTEXT: {\n            plaintextStartTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.COL:\n        case html_js_1.TAG_ID.TH:\n        case html_js_1.TAG_ID.TD:\n        case html_js_1.TAG_ID.TR:\n        case html_js_1.TAG_ID.HEAD:\n        case html_js_1.TAG_ID.FRAME:\n        case html_js_1.TAG_ID.TBODY:\n        case html_js_1.TAG_ID.TFOOT:\n        case html_js_1.TAG_ID.THEAD:\n        case html_js_1.TAG_ID.CAPTION:\n        case html_js_1.TAG_ID.COLGROUP: {\n            // Ignore token\n            break;\n        }\n        default: {\n            genericStartTagInBody(p, token);\n        }\n    }\n}\nfunction bodyEndTagInBody(p, token) {\n    if (p.openElements.hasInScope(html_js_1.TAG_ID.BODY)) {\n        p.insertionMode = InsertionMode.AFTER_BODY;\n        //NOTE: <body> is never popped from the stack, so we need to updated\n        //the end location explicitly.\n        if (p.options.sourceCodeLocationInfo) {\n            const bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n            if (bodyElement) {\n                p._setEndLocation(bodyElement, token);\n            }\n        }\n    }\n}\nfunction htmlEndTagInBody(p, token) {\n    if (p.openElements.hasInScope(html_js_1.TAG_ID.BODY)) {\n        p.insertionMode = InsertionMode.AFTER_BODY;\n        endTagAfterBody(p, token);\n    }\n}\nfunction addressEndTagInBody(p, token) {\n    const tn = token.tagID;\n    if (p.openElements.hasInScope(tn)) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped(tn);\n    }\n}\nfunction formEndTagInBody(p) {\n    const inTemplate = p.openElements.tmplCount > 0;\n    const { formElement } = p;\n    if (!inTemplate) {\n        p.formElement = null;\n    }\n    if ((formElement || inTemplate) && p.openElements.hasInScope(html_js_1.TAG_ID.FORM)) {\n        p.openElements.generateImpliedEndTags();\n        if (inTemplate) {\n            p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.FORM);\n        }\n        else if (formElement) {\n            p.openElements.remove(formElement);\n        }\n    }\n}\nfunction pEndTagInBody(p) {\n    if (!p.openElements.hasInButtonScope(html_js_1.TAG_ID.P)) {\n        p._insertFakeElement(html_js_1.TAG_NAMES.P, html_js_1.TAG_ID.P);\n    }\n    p._closePElement();\n}\nfunction liEndTagInBody(p) {\n    if (p.openElements.hasInListItemScope(html_js_1.TAG_ID.LI)) {\n        p.openElements.generateImpliedEndTagsWithExclusion(html_js_1.TAG_ID.LI);\n        p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.LI);\n    }\n}\nfunction ddEndTagInBody(p, token) {\n    const tn = token.tagID;\n    if (p.openElements.hasInScope(tn)) {\n        p.openElements.generateImpliedEndTagsWithExclusion(tn);\n        p.openElements.popUntilTagNamePopped(tn);\n    }\n}\nfunction numberedHeaderEndTagInBody(p) {\n    if (p.openElements.hasNumberedHeaderInScope()) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilNumberedHeaderPopped();\n    }\n}\nfunction appletEndTagInBody(p, token) {\n    const tn = token.tagID;\n    if (p.openElements.hasInScope(tn)) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped(tn);\n        p.activeFormattingElements.clearToLastMarker();\n    }\n}\nfunction brEndTagInBody(p) {\n    p._reconstructActiveFormattingElements();\n    p._insertFakeElement(html_js_1.TAG_NAMES.BR, html_js_1.TAG_ID.BR);\n    p.openElements.pop();\n    p.framesetOk = false;\n}\nfunction genericEndTagInBody(p, token) {\n    const tn = token.tagName;\n    const tid = token.tagID;\n    for (let i = p.openElements.stackTop; i > 0; i--) {\n        const element = p.openElements.items[i];\n        const elementId = p.openElements.tagIDs[i];\n        // Compare the tag name here, as the tag might not be a known tag with an ID.\n        if (tid === elementId && (tid !== html_js_1.TAG_ID.UNKNOWN || p.treeAdapter.getTagName(element) === tn)) {\n            p.openElements.generateImpliedEndTagsWithExclusion(tid);\n            if (p.openElements.stackTop >= i)\n                p.openElements.shortenToLength(i);\n            break;\n        }\n        if (p._isSpecialElement(element, elementId)) {\n            break;\n        }\n    }\n}\nfunction endTagInBody(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.A:\n        case html_js_1.TAG_ID.B:\n        case html_js_1.TAG_ID.I:\n        case html_js_1.TAG_ID.S:\n        case html_js_1.TAG_ID.U:\n        case html_js_1.TAG_ID.EM:\n        case html_js_1.TAG_ID.TT:\n        case html_js_1.TAG_ID.BIG:\n        case html_js_1.TAG_ID.CODE:\n        case html_js_1.TAG_ID.FONT:\n        case html_js_1.TAG_ID.NOBR:\n        case html_js_1.TAG_ID.SMALL:\n        case html_js_1.TAG_ID.STRIKE:\n        case html_js_1.TAG_ID.STRONG: {\n            callAdoptionAgency(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.P: {\n            pEndTagInBody(p);\n            break;\n        }\n        case html_js_1.TAG_ID.DL:\n        case html_js_1.TAG_ID.UL:\n        case html_js_1.TAG_ID.OL:\n        case html_js_1.TAG_ID.DIR:\n        case html_js_1.TAG_ID.DIV:\n        case html_js_1.TAG_ID.NAV:\n        case html_js_1.TAG_ID.PRE:\n        case html_js_1.TAG_ID.MAIN:\n        case html_js_1.TAG_ID.MENU:\n        case html_js_1.TAG_ID.ASIDE:\n        case html_js_1.TAG_ID.BUTTON:\n        case html_js_1.TAG_ID.CENTER:\n        case html_js_1.TAG_ID.FIGURE:\n        case html_js_1.TAG_ID.FOOTER:\n        case html_js_1.TAG_ID.HEADER:\n        case html_js_1.TAG_ID.HGROUP:\n        case html_js_1.TAG_ID.DIALOG:\n        case html_js_1.TAG_ID.ADDRESS:\n        case html_js_1.TAG_ID.ARTICLE:\n        case html_js_1.TAG_ID.DETAILS:\n        case html_js_1.TAG_ID.SECTION:\n        case html_js_1.TAG_ID.SUMMARY:\n        case html_js_1.TAG_ID.LISTING:\n        case html_js_1.TAG_ID.FIELDSET:\n        case html_js_1.TAG_ID.BLOCKQUOTE:\n        case html_js_1.TAG_ID.FIGCAPTION: {\n            addressEndTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.LI: {\n            liEndTagInBody(p);\n            break;\n        }\n        case html_js_1.TAG_ID.DD:\n        case html_js_1.TAG_ID.DT: {\n            ddEndTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.H1:\n        case html_js_1.TAG_ID.H2:\n        case html_js_1.TAG_ID.H3:\n        case html_js_1.TAG_ID.H4:\n        case html_js_1.TAG_ID.H5:\n        case html_js_1.TAG_ID.H6: {\n            numberedHeaderEndTagInBody(p);\n            break;\n        }\n        case html_js_1.TAG_ID.BR: {\n            brEndTagInBody(p);\n            break;\n        }\n        case html_js_1.TAG_ID.BODY: {\n            bodyEndTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.HTML: {\n            htmlEndTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.FORM: {\n            formEndTagInBody(p);\n            break;\n        }\n        case html_js_1.TAG_ID.APPLET:\n        case html_js_1.TAG_ID.OBJECT:\n        case html_js_1.TAG_ID.MARQUEE: {\n            appletEndTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.TEMPLATE: {\n            templateEndTagInHead(p, token);\n            break;\n        }\n        default: {\n            genericEndTagInBody(p, token);\n        }\n    }\n}\nfunction eofInBody(p, token) {\n    if (p.tmplInsertionModeStack.length > 0) {\n        eofInTemplate(p, token);\n    }\n    else {\n        stopParsing(p, token);\n    }\n}\n// The \"text\" insertion mode\n//------------------------------------------------------------------\nfunction endTagInText(p, token) {\n    var _a;\n    if (token.tagID === html_js_1.TAG_ID.SCRIPT) {\n        (_a = p.scriptHandler) === null || _a === void 0 ? void 0 : _a.call(p, p.openElements.current);\n    }\n    p.openElements.pop();\n    p.insertionMode = p.originalInsertionMode;\n}\nfunction eofInText(p, token) {\n    p._err(token, error_codes_js_1.ERR.eofInElementThatCanContainOnlyText);\n    p.openElements.pop();\n    p.insertionMode = p.originalInsertionMode;\n    p.onEof(token);\n}\n// The \"in table\" insertion mode\n//------------------------------------------------------------------\nfunction characterInTable(p, token) {\n    if (TABLE_STRUCTURE_TAGS.has(p.openElements.currentTagId)) {\n        p.pendingCharacterTokens.length = 0;\n        p.hasNonWhitespacePendingCharacterToken = false;\n        p.originalInsertionMode = p.insertionMode;\n        p.insertionMode = InsertionMode.IN_TABLE_TEXT;\n        switch (token.type) {\n            case token_js_1.TokenType.CHARACTER: {\n                characterInTableText(p, token);\n                break;\n            }\n            case token_js_1.TokenType.WHITESPACE_CHARACTER: {\n                whitespaceCharacterInTableText(p, token);\n                break;\n            }\n            // Ignore null\n        }\n    }\n    else {\n        tokenInTable(p, token);\n    }\n}\nfunction captionStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p.activeFormattingElements.insertMarker();\n    p._insertElement(token, html_js_1.NS.HTML);\n    p.insertionMode = InsertionMode.IN_CAPTION;\n}\nfunction colgroupStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertElement(token, html_js_1.NS.HTML);\n    p.insertionMode = InsertionMode.IN_COLUMN_GROUP;\n}\nfunction colStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertFakeElement(html_js_1.TAG_NAMES.COLGROUP, html_js_1.TAG_ID.COLGROUP);\n    p.insertionMode = InsertionMode.IN_COLUMN_GROUP;\n    startTagInColumnGroup(p, token);\n}\nfunction tbodyStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertElement(token, html_js_1.NS.HTML);\n    p.insertionMode = InsertionMode.IN_TABLE_BODY;\n}\nfunction tdStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertFakeElement(html_js_1.TAG_NAMES.TBODY, html_js_1.TAG_ID.TBODY);\n    p.insertionMode = InsertionMode.IN_TABLE_BODY;\n    startTagInTableBody(p, token);\n}\nfunction tableStartTagInTable(p, token) {\n    if (p.openElements.hasInTableScope(html_js_1.TAG_ID.TABLE)) {\n        p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.TABLE);\n        p._resetInsertionMode();\n        p._processStartTag(token);\n    }\n}\nfunction inputStartTagInTable(p, token) {\n    if (isHiddenInput(token)) {\n        p._appendElement(token, html_js_1.NS.HTML);\n    }\n    else {\n        tokenInTable(p, token);\n    }\n    token.ackSelfClosing = true;\n}\nfunction formStartTagInTable(p, token) {\n    if (!p.formElement && p.openElements.tmplCount === 0) {\n        p._insertElement(token, html_js_1.NS.HTML);\n        p.formElement = p.openElements.current;\n        p.openElements.pop();\n    }\n}\nfunction startTagInTable(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.TD:\n        case html_js_1.TAG_ID.TH:\n        case html_js_1.TAG_ID.TR: {\n            tdStartTagInTable(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.STYLE:\n        case html_js_1.TAG_ID.SCRIPT:\n        case html_js_1.TAG_ID.TEMPLATE: {\n            startTagInHead(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.COL: {\n            colStartTagInTable(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.FORM: {\n            formStartTagInTable(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.TABLE: {\n            tableStartTagInTable(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.TBODY:\n        case html_js_1.TAG_ID.TFOOT:\n        case html_js_1.TAG_ID.THEAD: {\n            tbodyStartTagInTable(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.INPUT: {\n            inputStartTagInTable(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.CAPTION: {\n            captionStartTagInTable(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.COLGROUP: {\n            colgroupStartTagInTable(p, token);\n            break;\n        }\n        default: {\n            tokenInTable(p, token);\n        }\n    }\n}\nfunction endTagInTable(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.TABLE: {\n            if (p.openElements.hasInTableScope(html_js_1.TAG_ID.TABLE)) {\n                p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.TABLE);\n                p._resetInsertionMode();\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.TEMPLATE: {\n            templateEndTagInHead(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.BODY:\n        case html_js_1.TAG_ID.CAPTION:\n        case html_js_1.TAG_ID.COL:\n        case html_js_1.TAG_ID.COLGROUP:\n        case html_js_1.TAG_ID.HTML:\n        case html_js_1.TAG_ID.TBODY:\n        case html_js_1.TAG_ID.TD:\n        case html_js_1.TAG_ID.TFOOT:\n        case html_js_1.TAG_ID.TH:\n        case html_js_1.TAG_ID.THEAD:\n        case html_js_1.TAG_ID.TR: {\n            // Ignore token\n            break;\n        }\n        default: {\n            tokenInTable(p, token);\n        }\n    }\n}\nfunction tokenInTable(p, token) {\n    const savedFosterParentingState = p.fosterParentingEnabled;\n    p.fosterParentingEnabled = true;\n    // Process token in `In Body` mode\n    modeInBody(p, token);\n    p.fosterParentingEnabled = savedFosterParentingState;\n}\n// The \"in table text\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInTableText(p, token) {\n    p.pendingCharacterTokens.push(token);\n}\nfunction characterInTableText(p, token) {\n    p.pendingCharacterTokens.push(token);\n    p.hasNonWhitespacePendingCharacterToken = true;\n}\nfunction tokenInTableText(p, token) {\n    let i = 0;\n    if (p.hasNonWhitespacePendingCharacterToken) {\n        for (; i < p.pendingCharacterTokens.length; i++) {\n            tokenInTable(p, p.pendingCharacterTokens[i]);\n        }\n    }\n    else {\n        for (; i < p.pendingCharacterTokens.length; i++) {\n            p._insertCharacters(p.pendingCharacterTokens[i]);\n        }\n    }\n    p.insertionMode = p.originalInsertionMode;\n    p._processToken(token);\n}\n// The \"in caption\" insertion mode\n//------------------------------------------------------------------\nconst TABLE_VOID_ELEMENTS = new Set([html_js_1.TAG_ID.CAPTION, html_js_1.TAG_ID.COL, html_js_1.TAG_ID.COLGROUP, html_js_1.TAG_ID.TBODY, html_js_1.TAG_ID.TD, html_js_1.TAG_ID.TFOOT, html_js_1.TAG_ID.TH, html_js_1.TAG_ID.THEAD, html_js_1.TAG_ID.TR]);\nfunction startTagInCaption(p, token) {\n    const tn = token.tagID;\n    if (TABLE_VOID_ELEMENTS.has(tn)) {\n        if (p.openElements.hasInTableScope(html_js_1.TAG_ID.CAPTION)) {\n            p.openElements.generateImpliedEndTags();\n            p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.CAPTION);\n            p.activeFormattingElements.clearToLastMarker();\n            p.insertionMode = InsertionMode.IN_TABLE;\n            startTagInTable(p, token);\n        }\n    }\n    else {\n        startTagInBody(p, token);\n    }\n}\nfunction endTagInCaption(p, token) {\n    const tn = token.tagID;\n    switch (tn) {\n        case html_js_1.TAG_ID.CAPTION:\n        case html_js_1.TAG_ID.TABLE: {\n            if (p.openElements.hasInTableScope(html_js_1.TAG_ID.CAPTION)) {\n                p.openElements.generateImpliedEndTags();\n                p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.CAPTION);\n                p.activeFormattingElements.clearToLastMarker();\n                p.insertionMode = InsertionMode.IN_TABLE;\n                if (tn === html_js_1.TAG_ID.TABLE) {\n                    endTagInTable(p, token);\n                }\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.BODY:\n        case html_js_1.TAG_ID.COL:\n        case html_js_1.TAG_ID.COLGROUP:\n        case html_js_1.TAG_ID.HTML:\n        case html_js_1.TAG_ID.TBODY:\n        case html_js_1.TAG_ID.TD:\n        case html_js_1.TAG_ID.TFOOT:\n        case html_js_1.TAG_ID.TH:\n        case html_js_1.TAG_ID.THEAD:\n        case html_js_1.TAG_ID.TR: {\n            // Ignore token\n            break;\n        }\n        default: {\n            endTagInBody(p, token);\n        }\n    }\n}\n// The \"in column group\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInColumnGroup(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.HTML: {\n            startTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.COL: {\n            p._appendElement(token, html_js_1.NS.HTML);\n            token.ackSelfClosing = true;\n            break;\n        }\n        case html_js_1.TAG_ID.TEMPLATE: {\n            startTagInHead(p, token);\n            break;\n        }\n        default: {\n            tokenInColumnGroup(p, token);\n        }\n    }\n}\nfunction endTagInColumnGroup(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.COLGROUP: {\n            if (p.openElements.currentTagId === html_js_1.TAG_ID.COLGROUP) {\n                p.openElements.pop();\n                p.insertionMode = InsertionMode.IN_TABLE;\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.TEMPLATE: {\n            templateEndTagInHead(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.COL: {\n            // Ignore token\n            break;\n        }\n        default: {\n            tokenInColumnGroup(p, token);\n        }\n    }\n}\nfunction tokenInColumnGroup(p, token) {\n    if (p.openElements.currentTagId === html_js_1.TAG_ID.COLGROUP) {\n        p.openElements.pop();\n        p.insertionMode = InsertionMode.IN_TABLE;\n        p._processToken(token);\n    }\n}\n// The \"in table body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTableBody(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.TR: {\n            p.openElements.clearBackToTableBodyContext();\n            p._insertElement(token, html_js_1.NS.HTML);\n            p.insertionMode = InsertionMode.IN_ROW;\n            break;\n        }\n        case html_js_1.TAG_ID.TH:\n        case html_js_1.TAG_ID.TD: {\n            p.openElements.clearBackToTableBodyContext();\n            p._insertFakeElement(html_js_1.TAG_NAMES.TR, html_js_1.TAG_ID.TR);\n            p.insertionMode = InsertionMode.IN_ROW;\n            startTagInRow(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.CAPTION:\n        case html_js_1.TAG_ID.COL:\n        case html_js_1.TAG_ID.COLGROUP:\n        case html_js_1.TAG_ID.TBODY:\n        case html_js_1.TAG_ID.TFOOT:\n        case html_js_1.TAG_ID.THEAD: {\n            if (p.openElements.hasTableBodyContextInTableScope()) {\n                p.openElements.clearBackToTableBodyContext();\n                p.openElements.pop();\n                p.insertionMode = InsertionMode.IN_TABLE;\n                startTagInTable(p, token);\n            }\n            break;\n        }\n        default: {\n            startTagInTable(p, token);\n        }\n    }\n}\nfunction endTagInTableBody(p, token) {\n    const tn = token.tagID;\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.TBODY:\n        case html_js_1.TAG_ID.TFOOT:\n        case html_js_1.TAG_ID.THEAD: {\n            if (p.openElements.hasInTableScope(tn)) {\n                p.openElements.clearBackToTableBodyContext();\n                p.openElements.pop();\n                p.insertionMode = InsertionMode.IN_TABLE;\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.TABLE: {\n            if (p.openElements.hasTableBodyContextInTableScope()) {\n                p.openElements.clearBackToTableBodyContext();\n                p.openElements.pop();\n                p.insertionMode = InsertionMode.IN_TABLE;\n                endTagInTable(p, token);\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.BODY:\n        case html_js_1.TAG_ID.CAPTION:\n        case html_js_1.TAG_ID.COL:\n        case html_js_1.TAG_ID.COLGROUP:\n        case html_js_1.TAG_ID.HTML:\n        case html_js_1.TAG_ID.TD:\n        case html_js_1.TAG_ID.TH:\n        case html_js_1.TAG_ID.TR: {\n            // Ignore token\n            break;\n        }\n        default: {\n            endTagInTable(p, token);\n        }\n    }\n}\n// The \"in row\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInRow(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.TH:\n        case html_js_1.TAG_ID.TD: {\n            p.openElements.clearBackToTableRowContext();\n            p._insertElement(token, html_js_1.NS.HTML);\n            p.insertionMode = InsertionMode.IN_CELL;\n            p.activeFormattingElements.insertMarker();\n            break;\n        }\n        case html_js_1.TAG_ID.CAPTION:\n        case html_js_1.TAG_ID.COL:\n        case html_js_1.TAG_ID.COLGROUP:\n        case html_js_1.TAG_ID.TBODY:\n        case html_js_1.TAG_ID.TFOOT:\n        case html_js_1.TAG_ID.THEAD:\n        case html_js_1.TAG_ID.TR: {\n            if (p.openElements.hasInTableScope(html_js_1.TAG_ID.TR)) {\n                p.openElements.clearBackToTableRowContext();\n                p.openElements.pop();\n                p.insertionMode = InsertionMode.IN_TABLE_BODY;\n                startTagInTableBody(p, token);\n            }\n            break;\n        }\n        default: {\n            startTagInTable(p, token);\n        }\n    }\n}\nfunction endTagInRow(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.TR: {\n            if (p.openElements.hasInTableScope(html_js_1.TAG_ID.TR)) {\n                p.openElements.clearBackToTableRowContext();\n                p.openElements.pop();\n                p.insertionMode = InsertionMode.IN_TABLE_BODY;\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.TABLE: {\n            if (p.openElements.hasInTableScope(html_js_1.TAG_ID.TR)) {\n                p.openElements.clearBackToTableRowContext();\n                p.openElements.pop();\n                p.insertionMode = InsertionMode.IN_TABLE_BODY;\n                endTagInTableBody(p, token);\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.TBODY:\n        case html_js_1.TAG_ID.TFOOT:\n        case html_js_1.TAG_ID.THEAD: {\n            if (p.openElements.hasInTableScope(token.tagID) || p.openElements.hasInTableScope(html_js_1.TAG_ID.TR)) {\n                p.openElements.clearBackToTableRowContext();\n                p.openElements.pop();\n                p.insertionMode = InsertionMode.IN_TABLE_BODY;\n                endTagInTableBody(p, token);\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.BODY:\n        case html_js_1.TAG_ID.CAPTION:\n        case html_js_1.TAG_ID.COL:\n        case html_js_1.TAG_ID.COLGROUP:\n        case html_js_1.TAG_ID.HTML:\n        case html_js_1.TAG_ID.TD:\n        case html_js_1.TAG_ID.TH: {\n            // Ignore end tag\n            break;\n        }\n        default: {\n            endTagInTable(p, token);\n        }\n    }\n}\n// The \"in cell\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCell(p, token) {\n    const tn = token.tagID;\n    if (TABLE_VOID_ELEMENTS.has(tn)) {\n        if (p.openElements.hasInTableScope(html_js_1.TAG_ID.TD) || p.openElements.hasInTableScope(html_js_1.TAG_ID.TH)) {\n            p._closeTableCell();\n            startTagInRow(p, token);\n        }\n    }\n    else {\n        startTagInBody(p, token);\n    }\n}\nfunction endTagInCell(p, token) {\n    const tn = token.tagID;\n    switch (tn) {\n        case html_js_1.TAG_ID.TD:\n        case html_js_1.TAG_ID.TH: {\n            if (p.openElements.hasInTableScope(tn)) {\n                p.openElements.generateImpliedEndTags();\n                p.openElements.popUntilTagNamePopped(tn);\n                p.activeFormattingElements.clearToLastMarker();\n                p.insertionMode = InsertionMode.IN_ROW;\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.TABLE:\n        case html_js_1.TAG_ID.TBODY:\n        case html_js_1.TAG_ID.TFOOT:\n        case html_js_1.TAG_ID.THEAD:\n        case html_js_1.TAG_ID.TR: {\n            if (p.openElements.hasInTableScope(tn)) {\n                p._closeTableCell();\n                endTagInRow(p, token);\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.BODY:\n        case html_js_1.TAG_ID.CAPTION:\n        case html_js_1.TAG_ID.COL:\n        case html_js_1.TAG_ID.COLGROUP:\n        case html_js_1.TAG_ID.HTML: {\n            // Ignore token\n            break;\n        }\n        default: {\n            endTagInBody(p, token);\n        }\n    }\n}\n// The \"in select\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelect(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.HTML: {\n            startTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.OPTION: {\n            if (p.openElements.currentTagId === html_js_1.TAG_ID.OPTION) {\n                p.openElements.pop();\n            }\n            p._insertElement(token, html_js_1.NS.HTML);\n            break;\n        }\n        case html_js_1.TAG_ID.OPTGROUP: {\n            if (p.openElements.currentTagId === html_js_1.TAG_ID.OPTION) {\n                p.openElements.pop();\n            }\n            if (p.openElements.currentTagId === html_js_1.TAG_ID.OPTGROUP) {\n                p.openElements.pop();\n            }\n            p._insertElement(token, html_js_1.NS.HTML);\n            break;\n        }\n        case html_js_1.TAG_ID.INPUT:\n        case html_js_1.TAG_ID.KEYGEN:\n        case html_js_1.TAG_ID.TEXTAREA:\n        case html_js_1.TAG_ID.SELECT: {\n            if (p.openElements.hasInSelectScope(html_js_1.TAG_ID.SELECT)) {\n                p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.SELECT);\n                p._resetInsertionMode();\n                if (token.tagID !== html_js_1.TAG_ID.SELECT) {\n                    p._processStartTag(token);\n                }\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.SCRIPT:\n        case html_js_1.TAG_ID.TEMPLATE: {\n            startTagInHead(p, token);\n            break;\n        }\n        default:\n        // Do nothing\n    }\n}\nfunction endTagInSelect(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.OPTGROUP: {\n            if (p.openElements.stackTop > 0 &&\n                p.openElements.currentTagId === html_js_1.TAG_ID.OPTION &&\n                p.openElements.tagIDs[p.openElements.stackTop - 1] === html_js_1.TAG_ID.OPTGROUP) {\n                p.openElements.pop();\n            }\n            if (p.openElements.currentTagId === html_js_1.TAG_ID.OPTGROUP) {\n                p.openElements.pop();\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.OPTION: {\n            if (p.openElements.currentTagId === html_js_1.TAG_ID.OPTION) {\n                p.openElements.pop();\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.SELECT: {\n            if (p.openElements.hasInSelectScope(html_js_1.TAG_ID.SELECT)) {\n                p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.SELECT);\n                p._resetInsertionMode();\n            }\n            break;\n        }\n        case html_js_1.TAG_ID.TEMPLATE: {\n            templateEndTagInHead(p, token);\n            break;\n        }\n        default:\n        // Do nothing\n    }\n}\n// The \"in select in table\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelectInTable(p, token) {\n    const tn = token.tagID;\n    if (tn === html_js_1.TAG_ID.CAPTION ||\n        tn === html_js_1.TAG_ID.TABLE ||\n        tn === html_js_1.TAG_ID.TBODY ||\n        tn === html_js_1.TAG_ID.TFOOT ||\n        tn === html_js_1.TAG_ID.THEAD ||\n        tn === html_js_1.TAG_ID.TR ||\n        tn === html_js_1.TAG_ID.TD ||\n        tn === html_js_1.TAG_ID.TH) {\n        p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.SELECT);\n        p._resetInsertionMode();\n        p._processStartTag(token);\n    }\n    else {\n        startTagInSelect(p, token);\n    }\n}\nfunction endTagInSelectInTable(p, token) {\n    const tn = token.tagID;\n    if (tn === html_js_1.TAG_ID.CAPTION ||\n        tn === html_js_1.TAG_ID.TABLE ||\n        tn === html_js_1.TAG_ID.TBODY ||\n        tn === html_js_1.TAG_ID.TFOOT ||\n        tn === html_js_1.TAG_ID.THEAD ||\n        tn === html_js_1.TAG_ID.TR ||\n        tn === html_js_1.TAG_ID.TD ||\n        tn === html_js_1.TAG_ID.TH) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.SELECT);\n            p._resetInsertionMode();\n            p.onEndTag(token);\n        }\n    }\n    else {\n        endTagInSelect(p, token);\n    }\n}\n// The \"in template\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTemplate(p, token) {\n    switch (token.tagID) {\n        // First, handle tags that can start without a mode change\n        case html_js_1.TAG_ID.BASE:\n        case html_js_1.TAG_ID.BASEFONT:\n        case html_js_1.TAG_ID.BGSOUND:\n        case html_js_1.TAG_ID.LINK:\n        case html_js_1.TAG_ID.META:\n        case html_js_1.TAG_ID.NOFRAMES:\n        case html_js_1.TAG_ID.SCRIPT:\n        case html_js_1.TAG_ID.STYLE:\n        case html_js_1.TAG_ID.TEMPLATE:\n        case html_js_1.TAG_ID.TITLE: {\n            startTagInHead(p, token);\n            break;\n        }\n        // Re-process the token in the appropriate mode\n        case html_js_1.TAG_ID.CAPTION:\n        case html_js_1.TAG_ID.COLGROUP:\n        case html_js_1.TAG_ID.TBODY:\n        case html_js_1.TAG_ID.TFOOT:\n        case html_js_1.TAG_ID.THEAD: {\n            p.tmplInsertionModeStack[0] = InsertionMode.IN_TABLE;\n            p.insertionMode = InsertionMode.IN_TABLE;\n            startTagInTable(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.COL: {\n            p.tmplInsertionModeStack[0] = InsertionMode.IN_COLUMN_GROUP;\n            p.insertionMode = InsertionMode.IN_COLUMN_GROUP;\n            startTagInColumnGroup(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.TR: {\n            p.tmplInsertionModeStack[0] = InsertionMode.IN_TABLE_BODY;\n            p.insertionMode = InsertionMode.IN_TABLE_BODY;\n            startTagInTableBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.TD:\n        case html_js_1.TAG_ID.TH: {\n            p.tmplInsertionModeStack[0] = InsertionMode.IN_ROW;\n            p.insertionMode = InsertionMode.IN_ROW;\n            startTagInRow(p, token);\n            break;\n        }\n        default: {\n            p.tmplInsertionModeStack[0] = InsertionMode.IN_BODY;\n            p.insertionMode = InsertionMode.IN_BODY;\n            startTagInBody(p, token);\n        }\n    }\n}\nfunction endTagInTemplate(p, token) {\n    if (token.tagID === html_js_1.TAG_ID.TEMPLATE) {\n        templateEndTagInHead(p, token);\n    }\n}\nfunction eofInTemplate(p, token) {\n    if (p.openElements.tmplCount > 0) {\n        p.openElements.popUntilTagNamePopped(html_js_1.TAG_ID.TEMPLATE);\n        p.activeFormattingElements.clearToLastMarker();\n        p.tmplInsertionModeStack.shift();\n        p._resetInsertionMode();\n        p.onEof(token);\n    }\n    else {\n        stopParsing(p, token);\n    }\n}\n// The \"after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterBody(p, token) {\n    if (token.tagID === html_js_1.TAG_ID.HTML) {\n        startTagInBody(p, token);\n    }\n    else {\n        tokenAfterBody(p, token);\n    }\n}\nfunction endTagAfterBody(p, token) {\n    var _a;\n    if (token.tagID === html_js_1.TAG_ID.HTML) {\n        if (!p.fragmentContext) {\n            p.insertionMode = InsertionMode.AFTER_AFTER_BODY;\n        }\n        //NOTE: <html> is never popped from the stack, so we need to updated\n        //the end location explicitly.\n        if (p.options.sourceCodeLocationInfo && p.openElements.tagIDs[0] === html_js_1.TAG_ID.HTML) {\n            p._setEndLocation(p.openElements.items[0], token);\n            // Update the body element, if it doesn't have an end tag\n            const bodyElement = p.openElements.items[1];\n            if (bodyElement && !((_a = p.treeAdapter.getNodeSourceCodeLocation(bodyElement)) === null || _a === void 0 ? void 0 : _a.endTag)) {\n                p._setEndLocation(bodyElement, token);\n            }\n        }\n    }\n    else {\n        tokenAfterBody(p, token);\n    }\n}\nfunction tokenAfterBody(p, token) {\n    p.insertionMode = InsertionMode.IN_BODY;\n    modeInBody(p, token);\n}\n// The \"in frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInFrameset(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.HTML: {\n            startTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.FRAMESET: {\n            p._insertElement(token, html_js_1.NS.HTML);\n            break;\n        }\n        case html_js_1.TAG_ID.FRAME: {\n            p._appendElement(token, html_js_1.NS.HTML);\n            token.ackSelfClosing = true;\n            break;\n        }\n        case html_js_1.TAG_ID.NOFRAMES: {\n            startTagInHead(p, token);\n            break;\n        }\n        default:\n        // Do nothing\n    }\n}\nfunction endTagInFrameset(p, token) {\n    if (token.tagID === html_js_1.TAG_ID.FRAMESET && !p.openElements.isRootHtmlElementCurrent()) {\n        p.openElements.pop();\n        if (!p.fragmentContext && p.openElements.currentTagId !== html_js_1.TAG_ID.FRAMESET) {\n            p.insertionMode = InsertionMode.AFTER_FRAMESET;\n        }\n    }\n}\n// The \"after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterFrameset(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.HTML: {\n            startTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.NOFRAMES: {\n            startTagInHead(p, token);\n            break;\n        }\n        default:\n        // Do nothing\n    }\n}\nfunction endTagAfterFrameset(p, token) {\n    if (token.tagID === html_js_1.TAG_ID.HTML) {\n        p.insertionMode = InsertionMode.AFTER_AFTER_FRAMESET;\n    }\n}\n// The \"after after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterBody(p, token) {\n    if (token.tagID === html_js_1.TAG_ID.HTML) {\n        startTagInBody(p, token);\n    }\n    else {\n        tokenAfterAfterBody(p, token);\n    }\n}\nfunction tokenAfterAfterBody(p, token) {\n    p.insertionMode = InsertionMode.IN_BODY;\n    modeInBody(p, token);\n}\n// The \"after after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterFrameset(p, token) {\n    switch (token.tagID) {\n        case html_js_1.TAG_ID.HTML: {\n            startTagInBody(p, token);\n            break;\n        }\n        case html_js_1.TAG_ID.NOFRAMES: {\n            startTagInHead(p, token);\n            break;\n        }\n        default:\n        // Do nothing\n    }\n}\n// The rules for parsing tokens in foreign content\n//------------------------------------------------------------------\nfunction nullCharacterInForeignContent(p, token) {\n    token.chars = unicode.REPLACEMENT_CHARACTER;\n    p._insertCharacters(token);\n}\nfunction characterInForeignContent(p, token) {\n    p._insertCharacters(token);\n    p.framesetOk = false;\n}\nfunction popUntilHtmlOrIntegrationPoint(p) {\n    while (p.treeAdapter.getNamespaceURI(p.openElements.current) !== html_js_1.NS.HTML &&\n        !p._isIntegrationPoint(p.openElements.currentTagId, p.openElements.current)) {\n        p.openElements.pop();\n    }\n}\nfunction startTagInForeignContent(p, token) {\n    if (foreignContent.causesExit(token)) {\n        popUntilHtmlOrIntegrationPoint(p);\n        p._startTagOutsideForeignContent(token);\n    }\n    else {\n        const current = p._getAdjustedCurrentElement();\n        const currentNs = p.treeAdapter.getNamespaceURI(current);\n        if (currentNs === html_js_1.NS.MATHML) {\n            foreignContent.adjustTokenMathMLAttrs(token);\n        }\n        else if (currentNs === html_js_1.NS.SVG) {\n            foreignContent.adjustTokenSVGTagName(token);\n            foreignContent.adjustTokenSVGAttrs(token);\n        }\n        foreignContent.adjustTokenXMLAttrs(token);\n        if (token.selfClosing) {\n            p._appendElement(token, currentNs);\n        }\n        else {\n            p._insertElement(token, currentNs);\n        }\n        token.ackSelfClosing = true;\n    }\n}\nfunction endTagInForeignContent(p, token) {\n    if (token.tagID === html_js_1.TAG_ID.P || token.tagID === html_js_1.TAG_ID.BR) {\n        popUntilHtmlOrIntegrationPoint(p);\n        p._endTagOutsideForeignContent(token);\n        return;\n    }\n    for (let i = p.openElements.stackTop; i > 0; i--) {\n        const element = p.openElements.items[i];\n        if (p.treeAdapter.getNamespaceURI(element) === html_js_1.NS.HTML) {\n            p._endTagOutsideForeignContent(token);\n            break;\n        }\n        const tagName = p.treeAdapter.getTagName(element);\n        if (tagName.toLowerCase() === token.tagName) {\n            //NOTE: update the token tag name for `_setEndLocation`.\n            token.tagName = tagName;\n            p.openElements.shortenToLength(i);\n            break;\n        }\n    }\n}\n//# sourceMappingURL=index.js.map"]}}